/*! Released Version 2.7.1,BUILD 1165. Fengmap Javascript SDK, see: https://www.fengmap.com for details */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.navigation=e():t.navigation=e()}(this,function(){return n=[function(t,e,n){t.exports=n(154)},function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)},function(t){function e(t){return t&&t.__esModule?t:{default:t}}t.exports=e},function(t,e,n){var g=n(7),y=n(1),v=n(63),m=n(27),w=n(23),_="prototype",b=function(t,e,n){var r,i,o,s=t&b.F,a=t&b.G,u=t&b.S,l=t&b.P,f=t&b.B,h=t&b.W,c=a?y:y[e]||(y[e]={}),p=c[_],d=a?g:u?g[e]:(g[e]||{})[_];for(r in a&&(n=e),n)i=!s&&d&&void 0!==d[r],i&&w(c,r)||(o=i?d[r]:n[r],c[r]=a&&"function"!=typeof d[r]?n[r]:f&&i?v(o,g):h&&d[r]==o?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[_]=r[_],t}(o):l&&"function"==typeof o?v(Function.call,o):o,l&&((c.virtual||(c.virtual={}))[r]=o,t&b.R&&p&&!p[r]&&m(p,r,o)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,t.exports=b},function(t,e,n){var r=n(67)("wks"),i=n(40),o=n(6).Symbol,s="function"==typeof o,a=t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=r},function(t,e,n){t.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(14),i=n(48);t.exports=n(5)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=e},function(t,e,n){var i=n(0);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}t.exports=o},function(t,e,n){var r=n(71)("wks"),i=n(55),o=n(7).Symbol,s="function"==typeof o,a=t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=r},function(t,e,n){t.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(15),i=n(98),o=n(47),s=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(21);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(25),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(18),i=n(96),o=n(65),s=Object.defineProperty;e.f=n(13)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(19);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var o=n(6),s=n(9),a=n(24),u=n(40)("src"),r=n(159),i="toString",l=(""+r).split(i);n(49).inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(a(n,"name")||s(n,"name",e)),t[e]!==n&&(i&&(a(n,u)||s(n,u,t[e]?""+t[e]:l.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:s(t,e,n):(delete t[e],s(t,e,n)))})(Function.prototype,i,function(){return"function"==typeof this&&this[u]||r.call(this)})},function(t){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:e)(t)}},function(t,e,n){"use strict";var r=n(62),i=Object.keys||function(t){var e,n=[];for(e in t)n.push(e);return n};t.exports=h;var o=Object.create(n(46));o.inherits=n(36);var s=n(145),a=n(94);o.inherits(h,s);for(var u=i(a.prototype),l=0;l<u.length;l++){var f=u[l];h.prototype[f]||(h.prototype[f]=a.prototype[f])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var r=n(17),i=n(38);t.exports=n(13)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(102),i=n(53);t.exports=function(t){return r(i(t))}},function(t,e,n){var g=n(6),y=n(49),v=n(9),m=n(22),w=n(56),_="prototype",b=function(t,e,n){var r,i,o,s,a=t&b.F,u=t&b.G,l=t&b.S,f=t&b.P,h=t&b.B,c=u?g:l?g[e]||(g[e]={}):(g[e]||{})[_],p=u?y:y[e]||(y[e]={}),d=p[_]||(p[_]={});for(r in u&&(n=e),n)i=!a&&c&&void 0!==c[r],o=(i?c:n)[r],s=h&&i?w(o,g):f&&"function"==typeof o?w(Function.call,o):o,c&&m(c,r,o,t&b.U),p[r]!=o&&v(p,r,s),f&&d[r]!=o&&(d[r]=o)};g.core=y,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,t.exports=b},function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){t.exports=n(180)},function(t,e,n){var r=n(53);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(30);t.exports=function(t){return Object(r(t))}},function(t){var n,r,e=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function a(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,l=[],f=!1,h=-1;function c(){f&&u&&(f=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!f){var t=s(c);f=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,f=!1,a(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||f||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(){return[]},e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(t){t.exports={}},function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){var n;e&&(t.super_=e,n=function(){},n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t)}},function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";n(158);var r=n(15),i=n(66),o=n(5),s="toString",a=/./[s],u=function(t){n(22)(RegExp.prototype,s,t,!0)};n(8)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?u(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):a.name!=s&&u(function(){return a.call(this)})},function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},function(t,e,n){"use strict";var r=n(51),i={};i[n(4)("toStringTag")]="z",i+""!="[object z]"&&n(22)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,e,n){var r=n(101),i=n(72);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){"use strict";n(104)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t){t.exports={}},function(t,y,e){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function n(t){return"boolean"==typeof t}function r(t){return null===t}function i(t){return null==t}function o(t){return"number"==typeof t}function s(t){return"string"==typeof t}function a(t){return"symbol"==typeof t}function u(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===g(t)}function c(t){return"[object Error]"===g(t)||t instanceof Error}function p(t){return"function"==typeof t}function d(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function g(t){return Object.prototype.toString.call(t)}y.isArray=e,y.isBoolean=n,y.isNull=r,y.isNullOrUndefined=i,y.isNumber=o,y.isString=s,y.isSymbol=a,y.isUndefined=u,y.isRegExp=l,y.isObject=f,y.isDate=h,y.isError=c,y.isFunction=p,y.isPrimitive=d,y.isBuffer=t.isBuffer}).call(this,e(93).Buffer)},function(t,e,n){var i=n(21);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)},function(t){t.exports=!1},function(t,e,n){var i=n(42),o=n(4)("toStringTag"),s="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,o){var r=o(18),i=o(100),s=o(72),a=o(70)("IE_PROTO"),u=function(){},l="prototype",f=function(){var t,e=o(97)("iframe"),n=s.length,r="<",i=">";for(e.style.display="none",o(165).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+i+"document.F=Object"+r+"/script"+i),t.close(),f=t.F;n--;)delete f[l][s[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[l]=r(t),n=new u,u[l]=null,n[a]=t):n=f(),void 0===e?n:i(n,e)}},function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t){t.exports=!0},function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},function(t,e,n){var o=n(105);t.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},function(t,e,n){t.exports=n(168)},function(t,e,n){var r=n(107),i=n(30);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(25),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports=n(213)},function(e,t,n){"use strict";(function(a){function t(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,n)});case 4:return a.nextTick(function(){t.call(null,e,n,r)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){t.apply(null,i)})}}void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?e.exports={nextTick:t}:e.exports=a}).call(this,n(34))},function(t,e,n){var o=n(64);t.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(19);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var r=n(15);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(49),i=n(6),o="__core-js_shared__",s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(50)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:e)(t)}},function(t,e,n){var r=n(71)("keys"),i=n(55);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(1),i=n(7),o="__core-js_shared__",s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(54)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(175),i=n(48),o=n(58),s=n(47),a=n(24),u=n(98),l=Object.getOwnPropertyDescriptor;e.f=n(5)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(108),i=n(76).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(67)("keys"),i=n(40);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,o){var r=o(15),i=o(178),s=o(76),a=o(75)("IE_PROTO"),u=function(){},l="prototype",f=function(){var t,e=o(99)("iframe"),n=s.length,r="<",i=">";for(e.style.display="none",o(179).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+i+"document.F=Object"+r+"/script"+i),t.close(),f=t.F;n--;)delete f[l][s[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[l]=r(t),n=new u,u[l]=null,n[a]=t):n=f(),void 0===e?n:i(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(192)(!0);n(117)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(17).f,i=n(23),o=n(12)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(12)},function(t,e,n){var r=n(7),i=n(1),o=n(54),s=n(81),a=n(17).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=!o&&r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){"use strict";var h=n(219),w=n(15),_=n(126),b=n(127),E=n(16),x=n(128),c=n(85),r=n(8),T=Math.min,p=[].push,s="split",d="length",g="lastIndex",S=4294967295,k=!r(function(){RegExp(S,"y")});n(129)("split",2,function(i,o,y,v){var m="c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[d]||2!="ab"[s](/(?:ab)*/)[d]||4!="."[s](/(.?)(.?)/)[d]||1<"."[s](/()()/)[d]||""[s](/.?/)[d]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!h(t))return y.call(n,t,e);for(var r,i,o,s=[],a=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,l=void 0===e?S:e>>>0,f=new RegExp(t.source,a+"g");(r=c.call(f,n))&&(i=f[g],!(u<i&&(s.push(n.slice(u,r.index)),1<r[d]&&r.index<n[d]&&p.apply(s,r.slice(1)),o=r[0][d],u=i,s[d]>=l)));)f[g]===r.index&&f[g]++;return u===n[d]?!o&&f.test("")||s.push(""):s.push(n.slice(u)),s[d]>l?s.slice(0,l):s}:"0"[s](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:y.call(this,t,e)}:y;return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):m.call(String(n),t,e)},function(t,e){var n=v(m,t,this,e,m!==y);if(n.done)return n.value;var r=w(t),i=String(this),o=_(r,RegExp),s=r.unicode,a=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(k?"y":"g"),u=new o(k?r:"^(?:"+r.source+")",a),l=void 0===e?S:e>>>0;if(0===l)return[];if(0===i.length)return null===x(u,i)?[i]:[];for(var f=0,h=0,c=[];h<i.length;){u.lastIndex=k?h:0;var p,d=x(u,k?i:i.slice(h));if(null===d||(p=T(E(u.lastIndex+(k?0:h)),i.length))===f)h=b(i,h,s);else{if(c.push(i.slice(f,h)),c.length===l)return c;for(var g=1;g<=d.length-1;g++)if(c.push(d[g]),c.length===l)return c;h=f=p}}return c.push(i.slice(f)),c}]})},function(t,e,n){"use strict";var r,i,s=n(66),a=RegExp.prototype.exec,u=String.prototype.replace,o=a,l="lastIndex",f=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r[l]||0!==i[l]),h=void 0!==/()??/.exec("")[1],c=f||h;c&&(o=function(t){var e,n,r,i,o=this;return h&&(n=new RegExp("^"+o.source+"$(?!\\s)",s.call(o))),f&&(e=o[l]),r=a.call(o,t),f&&r&&(o[l]=o.global?r.index+r[0].length:e),h&&r&&1<r.length&&u.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=o},function(t,ot,st){"use strict";(function(t){var e=st(2),n=st(0);n(ot,"__esModule",{value:!0}),ot.ProtoBuf=void 0;var k=e(st(57));st(242),st(87);var M=e(st(246));st(84);var I=e(st(112)),A=e(st(135)),f=e(st(139));st(132),st(136),st(252);var L=e(st(115));st(253),st(44),st(39),st(41);var R=e(st(61)),P=e(st(0));function u(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function p(t){return!0===(t&&t.__isLong__)}u.__isLong__,(0,P.default)(u.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),u.isLong=p;var o={},s={};function r(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=s[t],r)?r:(n=g(t,(0|t)<0?-1:0,!0),i&&(s[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=o[t],r)?r:(n=g(t,t<0?-1:0,!1),i&&(o[t]=n),n))}function d(t,e){if(isNaN(t)||!isFinite(t))return e?b:_;if(e){if(t<0)return b;if(v<=t)return D}else{if(t<=-m)return O;if(m<=t+1)return S}return t<0?d(-t,e).neg():g(t%l|0,t/l|0,e)}function g(t,e,n){return new u(t,e,n)}u.fromInt=r,u.fromNumber=d,u.fromBits=g;var h=Math.pow;function c(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return _;if("number"==typeof e&&(n=e,e=!1),n=n||10,n<2||36<n)throw RangeError("radix");var r;if(0<(r=t.indexOf("-")))throw Error("interior hyphen");if(0===r)return c(t.substring(1),e,n).neg();for(var i=d(h(n,8)),o=_,s=0;s<t.length;s+=8)var a,u=Math.min(8,t.length-s),l=(0,R.default)(t.substring(s,s+u),n),o=u<8?(a=d(h(n,u)),o.mul(a).add(d(l))):(o=o.mul(i),o.add(d(l)));return o.unsigned=e,o}function y(t){return t instanceof u?t:"number"==typeof t?d(t):"string"==typeof t?c(t):g(t.low,t.high,t.unsigned)}u.fromString=c,u.fromValue=y;var i=65536,a=1<<24,l=i*i,v=l*l,m=v/2,w=r(a),_=r(0);u.ZERO=_;var b=r(0,!0);u.UZERO=b;var E=r(1);u.ONE=E;var x=r(1,!0);u.UONE=x;var T=r(-1);u.NEG_ONE=T;var S=g(-1,2147483647,!1);u.MAX_VALUE=S;var D=g(-1,-1,!0);u.MAX_UNSIGNED_VALUE=D;var O=g(0,-2147483648,!1);u.MIN_VALUE=O;var N=u.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},N.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var e=d(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=d(h(t,6),this.unsigned),o=this,s="";;){var a=o.div(i),u=o.sub(a.mul(i)).toInt()>>>0,l=u.toString(t),o=a;if(o.isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;0<e&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},N.isZero=function(){return 0===this.high&&0===this.low},N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||0<=this.high},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(t){return p(t)||(t=y(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},N.eq=N.equals,N.notEquals=function(t){return!this.eq(t)},N.neq=N.notEquals,N.lessThan=function(t){return this.comp(t)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(t){return this.comp(t)<=0},N.lte=N.lessThanOrEqual,N.greaterThan=function(t){return 0<this.comp(t)},N.gt=N.greaterThan,N.greaterThanOrEqual=function(t){return 0<=this.comp(t)},N.gte=N.greaterThanOrEqual,N.compare=function(t){if(p(t)||(t=y(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(E)},N.neg=N.negate,N.add=function(t){p(t)||(t=y(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=t.high>>>16,s=65535&t.high,a=t.low>>>16,u=65535&t.low,l=0,f=0,h=0,c=0;return c+=i+u,h+=c>>>16,c&=65535,h+=r+a,f+=h>>>16,h&=65535,f+=n+s,l+=f>>>16,f&=65535,l+=e+o,l&=65535,g(h<<16|c,l<<16|f,this.unsigned)},N.subtract=function(t){return p(t)||(t=y(t)),this.add(t.neg())},N.sub=N.subtract,N.multiply=function(t){if(this.isZero())return _;if(p(t)||(t=y(t)),t.isZero())return _;if(this.eq(O))return t.isOdd()?O:_;if(t.eq(O))return this.isOdd()?O:_;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(w)&&t.lt(w))return d(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=t.high>>>16,s=65535&t.high,a=t.low>>>16,u=65535&t.low,l=0,f=0,h=0,c=0;return c+=i*u,h+=c>>>16,c&=65535,h+=r*u,f+=h>>>16,h&=65535,h+=i*a,f+=h>>>16,h&=65535,f+=n*u,l+=f>>>16,f&=65535,f+=r*a,l+=f>>>16,f&=65535,f+=i*s,l+=f>>>16,f&=65535,l+=e*u+n*a+r*s+i*o,l&=65535,g(h<<16|c,l<<16|f,this.unsigned)},N.mul=N.multiply,N.divide=function(t){if(p(t)||(t=y(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?b:_;var e,n;if(this.eq(O)){if(t.eq(E)||t.eq(T))return O;if(t.eq(O))return E;var r=this.shr(1),i=r.div(t).shl(1);return i.eq(_)?t.isNegative()?E:T:(e=this.sub(t.mul(i)),n=i.add(e.div(t)),n)}if(t.eq(O))return this.unsigned?b:_;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();for(n=_,e=this;e.gte(t);){i=Math.max(1,Math.floor(e.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(i)/Math.LN2),s=o<=48?1:h(2,o-48),a=d(i),u=a.mul(t);u.isNegative()||u.gt(e);)i-=s,a=d(i,this.unsigned),u=a.mul(t);a.isZero()&&(a=E),n=n.add(a),e=e.sub(u)}return n},N.div=N.divide,N.modulo=function(t){return p(t)||(t=y(t)),this.sub(this.div(t).mul(t))},N.mod=N.modulo,N.not=function(){return g(~this.low,~this.high,this.unsigned)},N.and=function(t){return p(t)||(t=y(t)),g(this.low&t.low,this.high&t.high,this.unsigned)},N.or=function(t){return p(t)||(t=y(t)),g(this.low|t.low,this.high|t.high,this.unsigned)},N.xor=function(t){return p(t)||(t=y(t)),g(this.low^t.low,this.high^t.high,this.unsigned)},N.shiftLeft=function(t){return p(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?g(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):g(0,this.low<<t-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(t){return p(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?g(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):g(this.high>>t-32,0<=this.high?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(t){if(p(t)&&(t=t.toInt()),t&=63,0===t)return this;var e=this.high;if(t<32){var n=this.low;return g(n>>>t|e<<32-t,e>>>t,this.unsigned)}return g(32===t?e:e>>>t-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?g(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:g(this.low,this.high,!0)};var F=function t(e,n,r){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===n&&(n=t.DEFAULT_ENDIAN),void 0===r&&(r=t.DEFAULT_NOASSERT),!r){if(e|=0,e<0)throw RangeError("Illegal capacity");n=!!n,r=!!r}this.buffer=0===e?C:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=n,this.noAssert=r};F.VERSION="5.0.1",F.LITTLE_ENDIAN=!0,F.BIG_ENDIAN=!1,F.DEFAULT_CAPACITY=16,F.DEFAULT_ENDIAN=F.BIG_ENDIAN,F.DEFAULT_NOASSERT=!1,F.Long=u||null;var B=F.prototype;B.__isByteBuffer__,(0,P.default)(B,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var C=new ArrayBuffer(0),z=String.fromCharCode;function U(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function Y(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+z.apply(String,t);1024<t.length+arguments.length&&(e.push(z.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function V(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,f=-7,h=n?i-1:0,c=n?-1:1,p=t[e+h];for(h+=c,o=p&(1<<-f)-1,p>>=-f,f+=a;0<f;o=256*o+t[e+h],h+=c,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;0<f;s=256*s+t[e+h],h+=c,f-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=l}return(p?-1:1)*s*Math.pow(2,o-r)}function j(t,e,n,r,i,o){var s,a,u,l=8*o-i-1,f=(1<<l)-1,h=f>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=1<=s+h?c/u:c*Math.pow(2,1-h),2<=e*u&&(s++,u/=2),f<=s+h?(a=0,s=f):1<=s+h?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;0<l;t[n+p]=255&s,p+=d,s/=256,l-=8);t[n+p-d]|=128*g}F.accessor=function(){return Uint8Array},F.allocate=function(t,e,n){return new F(t,e,n)},F.concat=function(t,e,n,r){"boolean"!=typeof e&&"string"==typeof e||(r=n,n=e,e=void 0);for(var i,o=0,s=0,a=t.length;s<a;++s)F.isByteBuffer(t[s])||(t[s]=F.wrap(t[s],e)),i=t[s].limit-t[s].offset,0<i&&(o+=i);if(0===o)return new F(0,n,r);for(var u,l=new F(o,n,r),s=0;s<a;)u=t[s++],i=u.limit-u.offset,i<=0||(l.view.set(u.view.subarray(u.offset,u.limit),l.offset),l.offset+=i);return l.limit=l.offset,l.offset=0,l},F.isByteBuffer=function(t){return!0===(t&&t.__isByteBuffer__)},F.type=function(){return ArrayBuffer},F.wrap=function(t,e,n,r){if("string"!=typeof e&&(r=n,n=e,e=void 0),"string"==typeof t)switch(void 0===e&&(e="utf8"),e){case"base64":return F.fromBase64(t,n);case"hex":return F.fromHex(t,n);case"binary":return F.fromBinary(t,n);case"utf8":return F.fromUTF8(t,n);case"debug":return F.fromDebug(t,n);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!==(0,L.default)(t))throw TypeError("Illegal buffer");var i;if(F.isByteBuffer(t))return i=B.clone.call(t),i.markedOffset=-1,i;if(t instanceof Uint8Array)i=new F(0,n,r),0<t.length&&(i.buffer=t.buffer,i.offset=t.byteOffset,i.limit=t.byteOffset+t.byteLength,i.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)i=new F(0,n,r),0<t.byteLength&&(i.buffer=t,i.offset=0,i.limit=t.byteLength,i.view=0<t.byteLength?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");i=new F(t.length,n,r),i.limit=t.length;for(var o=0;o<t.length;++o)i.view[o]=t[o]}return i},B.writeBitSet=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r=e,i=t.length,o=i>>3,s=0;for(e+=this.writeVarint32(i,e);o--;)u=1&!!t[s++]|(1&!!t[s++])<<1|(1&!!t[s++])<<2|(1&!!t[s++])<<3|(1&!!t[s++])<<4|(1&!!t[s++])<<5|(1&!!t[s++])<<6|(1&!!t[s++])<<7,this.writeByte(u,e++);if(s<i){for(var a=0,u=0;s<i;)u|=(1&!!t[s++])<<a++;this.writeByte(u,e++)}return n?(this.offset=e,this):e-r},B.readBitSet=function(t){var e=void 0===t;e&&(t=this.offset);var n=this.readVarint32(t),r=n.value,i=r>>3,o=0,s=[];for(t+=n.length;i--;)u=this.readByte(t++),s[o++]=!!(1&u),s[o++]=!!(2&u),s[o++]=!!(4&u),s[o++]=!!(8&u),s[o++]=!!(16&u),s[o++]=!!(32&u),s[o++]=!!(64&u),s[o++]=!!(128&u);if(o<r)for(var a=0,u=this.readByte(t++);o<r;)s[o++]=!!(u>>a++&1);return e&&(this.offset=t),s},B.readBytes=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var r=this.slice(e,e+t);return n&&(this.offset+=t),r},B.writeBytes=B.append,B.writeInt8=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),--e,this.view[e]=t,n&&(this.offset+=1),this},B.writeByte=B.writeInt8,B.readInt8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=this.view[t];return 128==(128&n)&&(n=-(255-n+1)),e&&(this.offset+=1),n},B.readByte=B.readInt8,B.writeUint8=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),--e,this.view[e]=t,n&&(this.offset+=1),this},B.writeUInt8=B.writeUint8,B.readUint8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=this.view[t];return e&&(this.offset+=1),n},B.readUInt8=B.readUint8,B.writeInt16=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),n&&(this.offset+=2),this},B.writeShort=B.writeInt16,B.readInt16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t],n|=this.view[t+1]<<8):(n=this.view[t]<<8,n|=this.view[t+1]),32768==(32768&n)&&(n=-(65535-n+1)),e&&(this.offset+=2),n},B.readShort=B.readInt16,B.writeUint16=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),n&&(this.offset+=2),this},B.writeUInt16=B.writeUint16,B.readUint16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t],n|=this.view[t+1]<<8):(n=this.view[t]<<8,n|=this.view[t+1]),e&&(this.offset+=2),n},B.readUInt16=B.readUint16,B.writeInt32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),n&&(this.offset+=4),this},B.writeInt=B.writeInt32,B.readInt32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0):(n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),n|=0,e&&(this.offset+=4),n},B.readInt=B.readInt32,B.writeUint32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),n&&(this.offset+=4),this},B.writeUInt32=B.writeUint32,B.readUint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0):(n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),e&&(this.offset+=4),n},B.readUInt32=B.readUint32,u&&(B.writeInt64=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"==typeof t)t=u.fromNumber(t);else if("string"==typeof t)t=u.fromString(t);else if(!(t&&t instanceof u))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=u.fromNumber(t):"string"==typeof t&&(t=u.fromString(t)),e+=8;var r=this.buffer.byteLength;r<e&&this.resize((r*=2)>e?r:e),e-=8;var i=t.low,o=t.high;return this.littleEndian?(this.view[e+3]=i>>>24&255,this.view[e+2]=i>>>16&255,this.view[e+1]=i>>>8&255,this.view[e]=255&i,e+=4,this.view[e+3]=o>>>24&255,this.view[e+2]=o>>>16&255,this.view[e+1]=o>>>8&255,this.view[e]=255&o):(this.view[e]=o>>>24&255,this.view[e+1]=o>>>16&255,this.view[e+2]=o>>>8&255,this.view[e+3]=255&o,e+=4,this.view[e]=i>>>24&255,this.view[e+1]=i>>>16&255,this.view[e+2]=i>>>8&255,this.view[e+3]=255&i),n&&(this.offset+=8),this},B.writeLong=B.writeInt64,B.readInt64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=0,r=0;this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0);var i=new u(n,r,!1);return e&&(this.offset+=8),i},B.readLong=B.readInt64,B.writeUint64=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"==typeof t)t=u.fromNumber(t);else if("string"==typeof t)t=u.fromString(t);else if(!(t&&t instanceof u))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=u.fromNumber(t):"string"==typeof t&&(t=u.fromString(t)),e+=8;var r=this.buffer.byteLength;r<e&&this.resize((r*=2)>e?r:e),e-=8;var i=t.low,o=t.high;return this.littleEndian?(this.view[e+3]=i>>>24&255,this.view[e+2]=i>>>16&255,this.view[e+1]=i>>>8&255,this.view[e]=255&i,e+=4,this.view[e+3]=o>>>24&255,this.view[e+2]=o>>>16&255,this.view[e+1]=o>>>8&255,this.view[e]=255&o):(this.view[e]=o>>>24&255,this.view[e+1]=o>>>16&255,this.view[e+2]=o>>>8&255,this.view[e+3]=255&o,e+=4,this.view[e]=i>>>24&255,this.view[e+1]=i>>>16&255,this.view[e+2]=i>>>8&255,this.view[e+3]=255&i),n&&(this.offset+=8),this},B.writeUInt64=B.writeUint64,B.readUint64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=0,r=0;this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0);var i=new u(n,r,!0);return e&&(this.offset+=8),i},B.readUInt64=B.readUint64),B.writeFloat32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=4,j(this.view,t,e,this.littleEndian,23,4),n&&(this.offset+=4),this},B.writeFloat=B.writeFloat32,B.readFloat32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=V(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),n},B.readFloat=B.readFloat32,B.writeFloat64=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var r=this.buffer.byteLength;return r<e&&this.resize((r*=2)>e?r:e),e-=8,j(this.view,t,e,this.littleEndian,52,8),n&&(this.offset+=8),this},B.writeDouble=B.writeFloat64,B.readFloat64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=V(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),n},B.readDouble=B.readFloat64,F.MAX_VARINT32_BYTES=5,F.calculateVarint32=function(t){return t>>>=0,t<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},F.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},F.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},B.writeVarint32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r,i=F.calculateVarint32(t);e+=i;var o=this.buffer.byteLength;for(o<e&&this.resize((o*=2)>e?o:e),e-=i,t>>>=0;128<=t;)r=127&t|128,this.view[e++]=r,t>>>=7;return this.view[e++]=t,n?(this.offset=e,this):i},B.writeVarint32ZigZag=function(t,e){return this.writeVarint32(F.zigZagEncode32(t),e)},B.readVarint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n,r=0,i=0;do{if(!this.noAssert&&t>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}n=this.view[t++],r<5&&(i|=(127&n)<<7*r),++r}while(0!=(128&n));return i|=0,e?(this.offset=t,i):{value:i,length:r}},B.readVarint32ZigZag=function(t){var e=this.readVarint32(t);return"object"===(0,L.default)(e)?e.value=F.zigZagDecode32(e.value):e=F.zigZagDecode32(e),e},u&&(F.MAX_VARINT64_BYTES=10,F.calculateVarint64=function(t){"number"==typeof t?t=u.fromNumber(t):"string"==typeof t&&(t=u.fromString(t));var e=t.toInt()>>>0,n=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==n?e<16384?e<128?1:2:e<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:r<128?9:10},F.zigZagEncode64=function(t){return"number"==typeof t?t=u.fromNumber(t,!1):"string"==typeof t?t=u.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},F.zigZagDecode64=function(t){return"number"==typeof t?t=u.fromNumber(t,!1):"string"==typeof t?t=u.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(u.ONE).toSigned().negate()).toSigned()},B.writeVarint64=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"==typeof t)t=u.fromNumber(t);else if("string"==typeof t)t=u.fromString(t);else if(!(t&&t instanceof u))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=u.fromNumber(t,!1):"string"==typeof t?t=u.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned());var r=F.calculateVarint64(t),i=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,s=t.shiftRightUnsigned(56).toInt()>>>0;e+=r;var a=this.buffer.byteLength;switch(a<e&&this.resize((a*=2)>e?a:e),e-=r,r){case 10:this.view[e+9]=s>>>7&1;case 9:this.view[e+8]=9!==r?128|s:127&s;case 8:this.view[e+7]=8!==r?o>>>21|128:o>>>21&127;case 7:this.view[e+6]=7!==r?o>>>14|128:o>>>14&127;case 6:this.view[e+5]=6!==r?o>>>7|128:o>>>7&127;case 5:this.view[e+4]=5!==r?128|o:127&o;case 4:this.view[e+3]=4!==r?i>>>21|128:i>>>21&127;case 3:this.view[e+2]=3!==r?i>>>14|128:i>>>14&127;case 2:this.view[e+1]=2!==r?i>>>7|128:i>>>7&127;case 1:this.view[e]=1!==r?128|i:127&i}return n?(this.offset+=r,this):r},B.writeVarint64ZigZag=function(t,e){return this.writeVarint64(F.zigZagEncode64(t),e)},B.readVarint64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,r=0,i=0,o=0,s=0,s=this.view[t++],r=127&s;if(128&s&&(s=this.view[t++],r|=(127&s)<<7,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],r|=(127&s)<<14,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],r|=(127&s)<<21,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],i=127&s,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],i|=(127&s)<<7,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],i|=(127&s)<<14,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],i|=(127&s)<<21,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],o=127&s,(128&s||this.noAssert&&void 0===s)&&(s=this.view[t++],o|=(127&s)<<7,128&s||this.noAssert&&void 0===s))))))))))throw Error("Buffer overrun");var a=u.fromBits(r|i<<28,i>>>4|o<<24,!1);return e?(this.offset=t,a):{value:a,length:t-n}},B.readVarint64ZigZag=function(t){var e=this.readVarint64(t);return e&&e.value instanceof u?e.value=F.zigZagDecode64(e.value):e=F.zigZagDecode64(e),e}),B.writeCString=function(t,e){var n=void 0===e;n&&(e=this.offset);var r,i=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<i;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}i=W.calculateUTF16asUTF8(U(t))[1],e+=i+1;var o=this.buffer.byteLength;return o<e&&this.resize((o*=2)>e?o:e),e-=i+1,W.encodeUTF16toUTF8(U(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,n?(this.offset=e,this):i},B.readCString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n,r=t,i=-1;return W.decodeUTF8toUTF16(function(){if(0===i)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return i=this.view[t++],0===i?null:i}.bind(this),n=Y(),!0),e?(this.offset=t,n()):{string:n(),length:t-r}},B.writeIString=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r=e,i=W.calculateUTF16asUTF8(U(t),this.noAssert)[1];e+=4+i;var o=this.buffer.byteLength;if(o<e&&this.resize((o*=2)>e?o:e),e-=4+i,this.littleEndian?(this.view[e+3]=i>>>24&255,this.view[e+2]=i>>>16&255,this.view[e+1]=i>>>8&255,this.view[e]=255&i):(this.view[e]=i>>>24&255,this.view[e+1]=i>>>16&255,this.view[e+2]=i>>>8&255,this.view[e+3]=255&i),e+=4,W.encodeUTF16toUTF8(U(t),function(t){this.view[e++]=t}.bind(this)),e!==r+4+i)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+i));return n?(this.offset=e,this):e-r},B.readIString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=t,r=this.readUint32(t),i=this.readUTF8String(r,F.METRICS_BYTES,t+=4);return t+=i.length,e?(this.offset=t,i.string):{string:i.string,length:t-n}},F.METRICS_CHARS="c",F.METRICS_BYTES="b",B.writeUTF8String=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r=e,i=W.calculateUTF16asUTF8(U(t))[1];e+=i;var o=this.buffer.byteLength;return o<e&&this.resize((o*=2)>e?o:e),e-=i,W.encodeUTF16toUTF8(U(t),function(t){this.view[e++]=t}.bind(this)),n?(this.offset=e,this):e-r},B.writeString=B.writeUTF8String,F.calculateUTF8Chars=function(t){return W.calculateUTF16asUTF8(U(t))[0]},F.calculateUTF8Bytes=function(t){return W.calculateUTF16asUTF8(U(t))[1]},F.calculateString=F.calculateUTF8Bytes,B.readUTF8String=function(t,e,n){"number"==typeof e&&(n=e,e=void 0);var r=void 0===n;if(r&&(n=this.offset),void 0===e&&(e=F.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o=0,s=n;if(e===F.METRICS_CHARS){if(i=Y(),W.decodeUTF8(function(){return o<t&&n<this.limit?this.view[n++]:null}.bind(this),function(t){++o,W.UTF8toUTF16(t,i)}),o!==t)throw RangeError("Illegal range: Truncated data, "+o+" == "+t);return r?(this.offset=n,i()):{string:i(),length:n-s}}if(e!==F.METRICS_BYTES)throw TypeError("Unsupported metrics: "+e);if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+t+") <= "+this.buffer.byteLength)}var a=n+t;if(W.decodeUTF8toUTF16(function(){return n<a?this.view[n++]:null}.bind(this),i=Y(),this.noAssert),n!==a)throw RangeError("Illegal range: Truncated data, "+n+" == "+a);return r?(this.offset=n,i()):{string:i(),length:n-s}},B.readString=B.readUTF8String,B.writeVString=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r=e,i=W.calculateUTF16asUTF8(U(t),this.noAssert)[1],o=F.calculateVarint32(i);e+=o+i;var s=this.buffer.byteLength;if(s<e&&this.resize((s*=2)>e?s:e),e-=o+i,e+=this.writeVarint32(i,e),W.encodeUTF16toUTF8(U(t),function(t){this.view[e++]=t}.bind(this)),e!==r+i+o)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+i+o));return n?(this.offset=e,this):e-r},B.readVString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,r=this.readVarint32(t),i=this.readUTF8String(r.value,F.METRICS_BYTES,t+=r.length);return t+=i.length,e?(this.offset=t,i.string):{string:i.string,length:t-n}},B.append=function(t,e,n){"number"!=typeof e&&"string"==typeof e||(n=e,e=void 0);var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof F||(t=F.wrap(t,e));var i=t.limit-t.offset;if(i<=0)return this;n+=i;var o=this.buffer.byteLength;return o<n&&this.resize((o*=2)>n?o:n),n-=i,this.view.set(t.view.subarray(t.offset,t.limit),n),t.offset+=i,r&&(this.offset+=i),this},B.appendTo=function(t,e){return t.append(this,e),this},B.assert=function(t){return this.noAssert=!t,this},B.capacity=function(){return this.buffer.byteLength},B.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},B.clone=function(t){var e=new F(0,this.littleEndian,this.noAssert);return t?(e.buffer=new ArrayBuffer(this.buffer.byteLength),e.view=new Uint8Array(e.buffer)):(e.buffer=this.buffer,e.view=this.view),e.offset=this.offset,e.markedOffset=this.markedOffset,e.limit=this.limit,e},B.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var n=e-t;if(0===n)return this.buffer=C,this.view=null,0<=this.markedOffset&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var r=new ArrayBuffer(n),i=new Uint8Array(r);return i.set(this.view.subarray(t,e)),this.buffer=r,this.view=i,0<=this.markedOffset&&(this.markedOffset-=t),this.offset=0,this.limit=n,this},B.copy=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new F(0,this.littleEndian,this.noAssert);var n=e-t,r=new F(n,this.littleEndian,this.noAssert);return r.offset=0,r.limit=n,0<=r.markedOffset&&(r.markedOffset-=t),this.copyTo(r,0,t,e),r},B.copyTo=function(t,e,n,r){var i,o;if(!this.noAssert&&!F.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(o=void 0===e)?t.offset:0|e,n=(i=void 0===n)?this.offset:0|n,r=void 0===r?this.limit:0|r,e<0||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(n<0||r>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var s=r-n;return 0===s?t:(t.ensureCapacity(e+s),t.view.set(this.view.subarray(n,r),e),i&&(this.offset+=s),o&&(t.offset+=s),this)},B.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},B.fill=function(t,e,n){var r=void 0===e;if(r&&(e=this.offset),"string"==typeof t&&0<t.length&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||n<e||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(n<=e)return this;for(;e<n;)this.view[e++]=t;return r&&(this.offset=e),this},B.flip=function(){return this.limit=this.offset,this.offset=0,this},B.mark=function(t){if(t=void 0===t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},B.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},B.LE=function(t){return this.littleEndian=void 0===t||!!t,this},B.BE=function(t){return this.littleEndian=void 0!==t&&!t,this},B.prepend=function(t,e,n){"number"!=typeof e&&"string"==typeof e||(n=e,e=void 0);var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof F||(t=F.wrap(t,e));var i=t.limit-t.offset;if(i<=0)return this;var o,s,a=i-n;return 0<a?(o=new ArrayBuffer(this.buffer.byteLength+a),s=new Uint8Array(o),s.set(this.view.subarray(n,this.buffer.byteLength),i),this.buffer=o,this.view=s,this.offset+=a,0<=this.markedOffset&&(this.markedOffset+=a),this.limit+=a,n+=a):new Uint8Array(this.buffer),this.view.set(t.view.subarray(t.offset,t.limit),n-i),t.offset=t.limit,r&&(this.offset-=i),this},B.prependTo=function(t,e){return t.prepend(this,e),this},B.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},B.remaining=function(){return this.limit-this.offset},B.reset=function(){return 0<=this.markedOffset?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},B.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if(t|=0,t<0)throw RangeError("Illegal capacity: 0 <= "+t)}var e,n;return this.buffer.byteLength<t&&(e=new ArrayBuffer(t),n=new Uint8Array(e),n.set(this.view),this.buffer=e,this.view=n),this},B.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e||Array.prototype.reverse.call(this.view.subarray(t,e)),this},B.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},B.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=t,n.limit=e,n},B.toBuffer=function(t){var e=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,e<0||n<e||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(!t&&0===e&&n===this.buffer.byteLength)return this.buffer;if(e===n)return C;var r=new ArrayBuffer(n-e);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(e,n),0),r},B.toArrayBuffer=B.toBuffer,B.toString=function(t,e,n){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(t="utf8",e=t,n=e),t){case"utf8":return this.toUTF8(e,n);case"base64":return this.toBase64(e,n);case"hex":return this.toHex(e,n);case"binary":return this.toBinary(e,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var G=function(){for(var t={},i=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],s=[],e=0,n=i.length;e<n;++e)s[i[e]]=e;return t.encode=function(t,e){for(var n,r;null!==(n=t());)e(i[n>>2&63]),r=(3&n)<<4,null!==(n=t())?(r|=n>>4&15,e(i[63&(r|n>>4&15)]),r=(15&n)<<2,null!==(n=t())?(e(i[63&(r|n>>6&3)]),e(i[63&n])):(e(i[63&r]),e(61))):(e(i[63&r]),e(61),e(61))},t.decode=function(t,e){var n,r,i;function o(t){throw Error("Illegal character code: "+t)}for(;null!==(n=t());)if(r=s[n],void 0===r&&o(n),null!==(n=t())&&(i=s[n],void 0===i&&o(n),e(r<<2>>>0|(48&i)>>4),null!==(n=t()))){if(r=s[n],void 0===r){if(61===n)break;o(n)}if(e((15&i)<<4>>>0|(60&r)>>2),null!==(n=t())){if(i=s[n],void 0===i){if(61===n)break;o(n)}e((3&r)<<6>>>0|i)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();B.toBase64=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),t|=0,e|=0,t<0||e>this.capacity||e<t)throw RangeError("begin, end");var n;return G.encode(function(){return t<e?this.view[t++]:null}.bind(this),n=Y()),n()},F.fromBase64=function(t,e){if("string"!=typeof t)throw TypeError("str");var n=new F(t.length/4*3,e),r=0;return G.decode(U(t),function(t){n.view[r++]=t}),n.limit=r,n},F.btoa=function(t){return F.fromBinary(t).toBase64()},F.atob=function(t){return F.fromBase64(t).toBinary()},B.toBinary=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),t|=0,e|=0,t<0||e>this.capacity()||e<t)throw RangeError("begin, end");if(t===e)return"";for(var n=[],r=[];t<e;)n.push(this.view[t++]),1024<=n.length&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},F.fromBinary=function(t,e){if("string"!=typeof t)throw TypeError("str");for(var n,r=0,i=t.length,o=new F(i,e);r<i;){if(n=t.charCodeAt(r),255<n)throw RangeError("illegal char code: "+n);o.view[r++]=n}return o.limit=i,o},B.toDebug=function(t){for(var e,n=-1,r=this.buffer.byteLength,i="",o="",s="";n<r;){if(-1!==n&&(e=this.view[n],i+=e<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=32<e&&e<127?String.fromCharCode(e):".")),++n,t&&0<n&&n%16==0&&n!==r){for(;i.length<51;)i+=" ";s+=i+o+"\n",i=o=""}n===this.offset&&n===this.limit?i+=n===this.markedOffset?"!":"|":n===this.offset?i+=n===this.markedOffset?"[":"<":n===this.limit?i+=n===this.markedOffset?"]":">":i+=n===this.markedOffset?"'":t||0!==n&&n!==r?" ":""}if(t&&" "!==i){for(;i.length<51;)i+=" ";s+=i+o+"\n"}return t?s:i},F.fromDebug=function(t,e,n){for(var r,i,o=t.length,s=new F((o+1)/3|0,e,n),a=0,u=0,l=!1,f=!1,h=!1,c=!1,p=!1;a<o;){switch(r=t.charAt(a++)){case"!":if(!n){if(f||h||c){p=!0;break}f=h=c=!0}s.offset=s.markedOffset=s.limit=u,l=!1;break;case"|":if(!n){if(f||c){p=!0;break}f=c=!0}s.offset=s.limit=u,l=!1;break;case"[":if(!n){if(f||h){p=!0;break}f=h=!0}s.offset=s.markedOffset=u,l=!1;break;case"<":if(!n){if(f){p=!0;break}f=!0}s.offset=u,l=!1;break;case"]":if(!n){if(c||h){p=!0;break}c=h=!0}s.limit=s.markedOffset=u,l=!1;break;case">":if(!n){if(c){p=!0;break}c=!0}s.limit=u,l=!1;break;case"'":if(!n){if(h){p=!0;break}h=!0}s.markedOffset=u,l=!1;break;case" ":l=!1;break;default:if(!n&&l){p=!0;break}if(i=(0,R.default)(r+t.charAt(a++),16),!n&&(isNaN(i)||i<0||255<i))throw TypeError("Illegal str: Not a debug encoded string");s.view[u++]=i,l=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+a)}if(!n){if(!f||!c)throw TypeError("Illegal str: Missing offset or limit");if(u<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+o)}return s},B.toHex=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||e<t||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var n,r=new Array(e-t);t<e;)n=this.view[t++],n<16?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},F.fromHex=function(t,e,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var r,i=t.length,o=new F(i/2|0,e),s=0,a=0;s<i;s+=2){if(r=(0,R.default)(t.substring(s,s+2),16),!n&&(!isFinite(r)||r<0||255<r))throw TypeError("Illegal str: Contains non-hex characters");o.view[a++]=r}return o.limit=a,o};var q,W=(q={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<128?e(127&n):(n<2048?e(n>>6&31|192):(n<65536?e(n>>12&15|224):(e(n>>18&7|240),e(n>>12&63|128)),e(n>>6&63|128)),e(63&n|128)),n=null},decodeUTF8:function(t,e){for(var n,r,i,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(n=t());)if(0==(128&n))e(n);else if(192==(224&n))null===(r=t())&&s([n,r]),e((31&n)<<6|63&r);else if(224==(240&n))null!==(r=t())&&null!==(i=t())||s([n,r,i]),e((15&n)<<12|(63&r)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);null!==(r=t())&&null!==(i=t())&&null!==(o=t())||s([n,r,i,o]),e((7&n)<<18|(63&r)<<12|(63&i)<<6|63&o)}},UTF16toUTF8:function(t,e){for(var n,r=null;null!==(n=null!==r?r:t());)55296<=n&&n<=57343&&null!==(r=t())&&56320<=r&&r<=57343?(e(1024*(n-55296)+r-56320+65536),r=null):e(n);null!==r&&e(r)},UTF8toUTF16:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<=65535?e(n):(n-=65536,e(55296+(n>>10)),e(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,e){q.UTF16toUTF8(t,function(t){q.encodeUTF8(t,e)})},decodeUTF8toUTF16:function(t,e){q.decodeUTF8(t,function(t){q.UTF8toUTF16(t,e)})},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,n=0;null!==(e=t());)n+=e<128?1:e<2048?2:e<65536?3:4;return n},calculateUTF16asUTF8:function(t){var e=0,n=0;return q.UTF16toUTF8(t,function(t){++e,n+=t<128?1:t<2048?2:t<65536?3:4}),[e,n]}},q);B.toUTF8=function(e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||n<e||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}var t;try{W.decodeUTF8toUTF16(function(){return e<n?this.view[e++]:null}.bind(this),t=Y())}catch(t){if(e!==n)throw RangeError("Illegal range: Truncated data, "+e+" != "+n)}return t()},F.fromUTF8=function(t,e,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var r=new F(W.calculateUTF16asUTF8(U(t),!0)[1],e,n),i=0;return W.encodeUTF16toUTF8(U(t),function(t){r.view[i++]=t}),r.limit=i,r};var H,Z,X,$,Q,J,K,tt,et,nt={};function rt(e){e.messages&&e.messages.forEach(function(t){t.syntax=e.syntax,rt(t)}),e.enums&&e.enums.forEach(function(t){t.syntax=e.syntax})}function it(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}ot.ProtoBuf=nt,nt.ByteBuffer=F,nt.Long=F.Long||null,nt.VERSION="5.0.1",nt.WIRE_TYPES={},nt.WIRE_TYPES.VARINT=0,nt.WIRE_TYPES.BITS64=1,nt.WIRE_TYPES.LDELIM=2,nt.WIRE_TYPES.STARTGROUP=3,nt.WIRE_TYPES.ENDGROUP=4,nt.WIRE_TYPES.BITS32=5,nt.PACKABLE_WIRE_TYPES=[nt.WIRE_TYPES.VARINT,nt.WIRE_TYPES.BITS64,nt.WIRE_TYPES.BITS32],nt.TYPES={int32:{name:"int32",wireType:nt.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:nt.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:nt.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:nt.WIRE_TYPES.VARINT,defaultValue:nt.Long?nt.Long.ZERO:void 0},uint64:{name:"uint64",wireType:nt.WIRE_TYPES.VARINT,defaultValue:nt.Long?nt.Long.UZERO:void 0},sint64:{name:"sint64",wireType:nt.WIRE_TYPES.VARINT,defaultValue:nt.Long?nt.Long.ZERO:void 0},bool:{name:"bool",wireType:nt.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:nt.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:nt.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:nt.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:nt.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:nt.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:nt.WIRE_TYPES.BITS64,defaultValue:nt.Long?nt.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:nt.WIRE_TYPES.BITS64,defaultValue:nt.Long?nt.Long.ZERO:void 0},float:{name:"float",wireType:nt.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:nt.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:nt.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:nt.WIRE_TYPES.STARTGROUP,defaultValue:null}},nt.MAP_KEY_TYPES=[nt.TYPES.int32,nt.TYPES.sint32,nt.TYPES.sfixed32,nt.TYPES.uint32,nt.TYPES.fixed32,nt.TYPES.int64,nt.TYPES.sint64,nt.TYPES.sfixed64,nt.TYPES.uint64,nt.TYPES.fixed64,nt.TYPES.bool,nt.TYPES.string,nt.TYPES.bytes],nt.ID_MIN=1,nt.ID_MAX=536870911,nt.convertFieldsToCamelCase=!1,nt.populateAccessors=!0,nt.populateDefaults=!0,nt.Util=(H={},H.IS_NODE=!("object"!==(void 0===t?"undefined":(0,L.default)(t))||t+""!="[object process]"||t.browser),H.XHR=function(){for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=null,n=0;n<t.length;n++){try{e=t[n]()}catch(t){continue}break}if(!e)throw Error("XMLHttpRequest is not supported");return e},H.fetch=function(t,n){if(n&&"function"!=typeof n&&(n=null),H.IS_NODE){var e=st(265);if(n)e.readFile(t,function(t,e){n(t?null:""+e)});else try{return e.readFileSync(t)}catch(t){return null}}else{var r=H.XHR();if(r.open("GET",t,!!n),r.setRequestHeader("Accept","text/plain"),"function"==typeof r.overrideMimeType&&r.overrideMimeType("text/plain"),!n)return r.send(null),200==r.status||0==r.status&&"string"==typeof r.responseText?r.responseText:null;if(r.onreadystatechange=function(){4==r.readyState&&(200==r.status||0==r.status&&"string"==typeof r.responseText?n(r.responseText):n(null))},4==r.readyState)return;r.send(null)}},H.toCamelCase=function(t){return t.replace(/_([a-zA-Z])/g,function(t,e){return e.toUpperCase()})},H),nt.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},nt.DotProto=function(i,s){var t={},e=function(t){this.source=t+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},n=e.prototype;n._readString=function(){var t='"'===this._stringOpen?s.STRING_DQ:s.STRING_SQ;t.lastIndex=this.index-1;var e=t.exec(this.source);if(!e)throw Error("unterminated string");return this.index=t.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,e[1]},n.next=function(){if(0<this.stack.length)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var t,e,n;do{for(t=!1;s.WHITESPACE.test(n=this.source.charAt(this.index));)if("\n"===n&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,t=!0}else{if("*"!==(n=this.source.charAt(this.index)))return"/";do{if("\n"===n&&++this.line,++this.index===this.source.length)return null;e=n,n=this.source.charAt(this.index)}while("*"!==e||"/"!==n);++this.index,t=!0}}while(t);if(this.index===this.source.length)return null;var r=this.index;s.DELIM.lastIndex=0;var i=s.DELIM.test(this.source.charAt(r++));if(!i)for(;r<this.source.length&&!s.DELIM.test(this.source.charAt(r));)++r;var o=this.source.substring(this.index,this.index=r);return'"'!==o&&"'"!==o||(this._stringOpen=o),o},n.peek=function(){if(0===this.stack.length){var t=this.next();if(null===t)return null;this.stack.push(t)}return this.stack[0]},n.skip=function(t){var e=this.next();if(e!==t)throw Error("illegal '"+e+"', '"+t+"' expected")},n.omit=function(t){return this.peek()===t&&(this.next(),!0)},n.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},t.Tokenizer=e;var r=function(t){this.tn=new e(t),this.proto3=!1},o=r.prototype;function a(t,e){var n=-1,r=1;if("-"==t.charAt(0)&&(r=-1,t=t.substring(1)),s.NUMBER_DEC.test(t))n=(0,R.default)(t);else if(s.NUMBER_HEX.test(t))n=(0,R.default)(t.substring(2),16);else{if(!s.NUMBER_OCT.test(t))throw Error("illegal id value: "+(r<0?"-":"")+t);n=(0,R.default)(t.substring(1),8)}if(n=r*n|0,!e&&n<0)throw Error("illegal id value: "+(r<0?"-":"")+t);return n}function u(t){var e=1;if("-"==t.charAt(0)&&(e=-1,t=t.substring(1)),s.NUMBER_DEC.test(t))return e*(0,R.default)(t,10);if(s.NUMBER_HEX.test(t))return e*(0,R.default)(t.substring(2),16);if(s.NUMBER_OCT.test(t))return e*(0,R.default)(t.substring(1),8);if("inf"===t)return e*(1/0);if("nan"===t)return NaN;if(s.NUMBER_FLT.test(t))return e*(0,f.default)(t);throw Error("illegal number value: "+(e<0?"-":"")+t)}function l(t,e,n){void 0===t[e]?t[e]=n:((0,A.default)(t[e])||(t[e]=[t[e]]),t[e].push(n))}return o.parse=function(){var t,e,n={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},r=!0;try{for(;t=this.tn.next();)switch(t){case"package":if(!r||null!==n.package)throw Error("unexpected 'package'");if(t=this.tn.next(),!s.TYPEREF.test(t))throw Error("illegal package name: "+t);this.tn.skip(";"),n.package=t;break;case"import":if(!r)throw Error("unexpected 'import'");t=this.tn.peek(),"public"!==t&&!(e="weak"===t)||this.tn.next(),t=this._readString(),this.tn.skip(";"),e||n.imports.push(t);break;case"syntax":if(!r)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(n,null),r=!1;break;case"enum":this._parseEnum(n),r=!1;break;case"option":this._parseOption(n);break;case"service":this._parseService(n);break;case"extend":this._parseExtend(n);break;default:throw Error("unexpected '"+t+"'")}}catch(t){throw t.message="Parse error at line "+this.tn.line+": "+t.message,t}return delete n.name,n},r.parse=function(t){return new r(t).parse()},o._readString=function(){var t,e,n="";do{if(e=this.tn.next(),"'"!==e&&'"'!==e)throw Error("illegal string delimiter: "+e);n+=this.tn.next(),this.tn.skip(e),t=this.tn.peek()}while('"'===t||'"'===t);return n},o._readValue=function(t){var e=this.tn.peek();if('"'===e||"'"===e)return this._readString();if(this.tn.next(),s.NUMBER.test(e))return u(e);if(s.BOOL.test(e))return"true"===e.toLowerCase();if(t&&s.TYPEREF.test(e))return e;throw Error("illegal value: "+e)},o._parseOption=function(t,e){var n=this.tn.next(),r=!1;if("("===n&&(r=!0,n=this.tn.next()),!s.TYPEREF.test(n))throw Error("illegal option name: "+n);var i=n;r&&(this.tn.skip(")"),i="("+i+")",n=this.tn.peek(),s.FQTYPEREF.test(n)&&(i+=n,this.tn.next())),this.tn.skip("="),this._parseOptionValue(t,i),e||this.tn.skip(";")},o._parseOptionValue=function(t,e){var n=this.tn.peek();if("{"!==n)l(t.options,e,this._readValue(!0));else for(this.tn.skip("{");"}"!==(n=this.tn.next());){if(!s.NAME.test(n))throw Error("illegal option name: "+e+"."+n);this.tn.omit(":")?l(t.options,e+"."+n,this._readValue(!0)):this._parseOptionValue(t,e+"."+n)}},o._parseService=function(t){var e=this.tn.next();if(!s.NAME.test(e))throw Error("illegal service name at line "+this.tn.line+": "+e);var n=e,r={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(e=this.tn.next());)if("option"===e)this._parseOption(r);else{if("rpc"!==e)throw Error("illegal service token: "+e);this._parseServiceRPC(r)}this.tn.omit(";"),t.services.push(r)},o._parseServiceRPC=function(t){var e="rpc",n=this.tn.next();if(!s.NAME.test(n))throw Error("illegal rpc service method name: "+n);var r=n,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),n=this.tn.next(),"stream"===n.toLowerCase()&&(i.request_stream=!0,n=this.tn.next()),!s.TYPEREF.test(n))throw Error("illegal rpc service request type: "+n);if(i.request=n,this.tn.skip(")"),n=this.tn.next(),"returns"!==n.toLowerCase())throw Error("illegal rpc service request type delimiter: "+n);if(this.tn.skip("("),n=this.tn.next(),"stream"===n.toLowerCase()&&(i.response_stream=!0,n=this.tn.next()),i.response=n,this.tn.skip(")"),n=this.tn.peek(),"{"===n){for(this.tn.next();"}"!==(n=this.tn.next());){if("option"!==n)throw Error("illegal rpc service token: "+n);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===t[e]&&(t[e]={}),t[e][r]=i},o._parseMessage=function(t,e){var n=!!e,r=this.tn.next(),i={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!s.NAME.test(r))throw Error("illegal "+(n?"group":"message")+" name: "+r);for(i.name=r,n&&(this.tn.skip("="),e.id=a(this.tn.next()),i.isGroup=!0),r=this.tn.peek(),"["===r&&e&&this._parseFieldOptions(e),this.tn.skip("{");"}"!==(r=this.tn.next());)if(s.RULE.test(r))this._parseMessageField(i,r);else if("oneof"===r)this._parseMessageOneOf(i);else if("enum"===r)this._parseEnum(i);else if("message"===r)this._parseMessage(i);else if("option"===r)this._parseOption(i);else if("service"===r)this._parseService(i);else if("extensions"===r)i.extensions=this._parseExtensionRanges();else if("reserved"===r)this._parseIgnored();else if("extend"===r)this._parseExtend(i);else{if(!s.TYPEREF.test(r))throw Error("illegal message token: "+r);if(!this.proto3)throw Error("illegal field rule: "+r);this._parseMessageField(i,"optional",r)}return this.tn.omit(";"),t.messages.push(i),i},o._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},o._parseMessageField=function(t,e,n){if(!s.RULE.test(e))throw Error("illegal message field rule: "+e);var r,i={rule:e,type:"",name:"",options:{},id:0};if("map"===e){if(n)throw Error("illegal type: "+n);if(this.tn.skip("<"),r=this.tn.next(),!s.TYPE.test(r)&&!s.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(i.keytype=r,this.tn.skip(","),r=this.tn.next(),!s.TYPE.test(r)&&!s.TYPEREF.test(r))throw Error("illegal message field: "+r);if(i.type=r,this.tn.skip(">"),r=this.tn.next(),!s.NAME.test(r))throw Error("illegal message field name: "+r);i.name=r,this.tn.skip("="),i.id=a(this.tn.next()),r=this.tn.peek(),"["===r&&this._parseFieldOptions(i),this.tn.skip(";")}else if(n=void 0!==n?n:this.tn.next(),"group"===n){var o=this._parseMessage(t,i);if(!/^[A-Z]/.test(o.name))throw Error("illegal group name: "+o.name);i.type=o.name,i.name=o.name.toLowerCase(),this.tn.omit(";")}else{if(!s.TYPE.test(n)&&!s.TYPEREF.test(n))throw Error("illegal message field type: "+n);if(i.type=n,r=this.tn.next(),!s.NAME.test(r))throw Error("illegal message field name: "+r);i.name=r,this.tn.skip("="),i.id=a(this.tn.next()),r=this.tn.peek(),"["===r&&this._parseFieldOptions(i),this.tn.skip(";")}return t.fields.push(i),i},o._parseMessageOneOf=function(t){var e=this.tn.next();if(!s.NAME.test(e))throw Error("illegal oneof name: "+e);var n,r=e,i=[];for(this.tn.skip("{");"}"!==(e=this.tn.next());)n=this._parseMessageField(t,"optional",e),n.oneof=r,i.push(n.id);this.tn.omit(";"),t.oneofs[r]=i},o._parseFieldOptions=function(t){this.tn.skip("[");for(var e=!0;"]"!==this.tn.peek();)e||this.tn.skip(","),this._parseOption(t,!0),e=!1;this.tn.next()},o._parseEnum=function(t){var e={name:"",values:[],options:{}},n=this.tn.next();if(!s.NAME.test(n))throw Error("illegal name: "+n);for(e.name=n,this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(e);else{if(!s.NAME.test(n))throw Error("illegal name: "+n);this.tn.skip("=");var r={name:n,id:a(this.tn.next(),!0)},n=this.tn.peek();"["===n&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),e.values.push(r)}this.tn.omit(";"),t.enums.push(e)},o._parseExtensionRanges=function(){var t,e,n,r=[];do{for(e=[];;){switch(t=this.tn.next(),t){case"min":n=i.ID_MIN;break;case"max":n=i.ID_MAX;break;default:n=u(t)}if(e.push(n),2===e.length)break;if("to"!==this.tn.peek()){e.push(n);break}this.tn.next()}r.push(e)}while(this.tn.omit(","));return this.tn.skip(";"),r},o._parseExtend=function(t){var e=this.tn.next();if(!s.TYPEREF.test(e))throw Error("illegal extend reference: "+e);var n={ref:e,fields:[]};for(this.tn.skip("{");"}"!==(e=this.tn.next());)if(s.RULE.test(e))this._parseMessageField(n,e);else{if(!s.TYPEREF.test(e))throw Error("illegal extend token: "+e);if(!this.proto3)throw Error("illegal field rule: "+e);this._parseMessageField(n,"optional",e)}return this.tn.omit(";"),t.messages.push(n),n},o.toString=function(){return"Parser at line "+this.tn.line},t.Parser=r,t}(nt,nt.Lang),nt.Reflect=function(g){var s={},f=function(t,e,n){this.builder=t,this.parent=e,this.name=n,this.className},t=f.prototype;t.fqn=function(){for(var t=this.name,e=this;e=e.parent,null!=e;)t=e.name+"."+t;return t},t.toString=function(t){return(t?this.className+" ":"")+this.fqn()},t.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},s.T=f;var a=function(t,e,n,r,i){f.call(this,t,e,n),this.className="Namespace",this.children=[],this.options=r||{},this.syntax=i||"proto2"},e=a.prototype=(0,I.default)(f.prototype);e.getChildren=function(t){if(t=t||null,null==t)return this.children.slice();for(var e=[],n=0,r=this.children.length;n<r;++n)this.children[n]instanceof t&&e.push(this.children[n]);return e},e.addChild=function(t){var e;if(e=this.getChild(t.name))if(e instanceof c.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName))e.name=e.originalName;else{if(!(t instanceof c.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+t.name);t.name=t.originalName}this.children.push(t)},e.getChild=function(t){for(var e="number"==typeof t?"id":"name",n=0,r=this.children.length;n<r;++n)if(this.children[n][e]===t)return this.children[n];return null},e.resolve=function(t,e){var n,r="string"==typeof t?t.split("."):t,i=this,o=0;if(""===r[o]){for(;null!==i.parent;)i=i.parent;o++}do{do{if(!(i instanceof s.Namespace)){i=null;break}if(n=i.getChild(r[o]),!n||!(n instanceof s.T)||e&&!(n instanceof s.Namespace)){i=null;break}i=n,o++}while(o<r.length);if(null!=i)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=i);return i},e.qn=function(t){for(var e=[],n=t;e.unshift(n.name),n=n.parent,null!==n;);for(var r=1;r<=e.length;r++){var i=e.slice(e.length-r);if(t===this.resolve(i,t instanceof s.Namespace))return i.join(".")}return t.fqn()},e.build=function(){for(var t,e={},n=this.children,r=0,i=n.length;r<i;++r)t=n[r],t instanceof a&&(e[t.name]=t.build());return P.default&&(0,P.default)(e,"$options",{value:this.buildOpt()}),e},e.buildOpt=function(){for(var t={},e=(0,M.default)(this.options),n=0,r=e.length;n<r;++n){var i=e[n],o=this.options[e[n]];t[i]=o}return t},e.getOption=function(t){return void 0===t?this.options:void 0!==this.options[t]?this.options[t]:null},s.Namespace=a;var h=function(t,e,n,r){if(this.type=t,this.resolvedType=e,this.isMapKey=n,this.syntax=r,n&&g.MAP_KEY_TYPES.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},n=h.prototype;function r(t){if("string"==typeof t&&(t=g.TYPES[t]),void 0===t.defaultValue)throw Error("default value for type "+t.name+" is not supported");return t==g.TYPES.bytes?new F(0):t.defaultValue}function u(t,e){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new g.Long(t.low,t.high,void 0===e?t.unsigned:e);if("string"==typeof t)return g.Long.fromString(t,e||!1,10);if("number"==typeof t)return g.Long.fromNumber(t,e||!1);throw Error("not convertible to Long")}h.defaultFieldValue=r,n.verifyValue=function(e){var n=this;function r(t,e){throw Error("Illegal value for "+n.toString(!0)+" of type "+n.type.name+": "+t+" ("+e+")")}switch(this.type){case g.TYPES.int32:case g.TYPES.sint32:case g.TYPES.sfixed32:return("number"!=typeof e||e==e&&e%1!=0)&&r((0,L.default)(e),"not an integer"),4294967295<e?0|e:e;case g.TYPES.uint32:case g.TYPES.fixed32:return("number"!=typeof e||e==e&&e%1!=0)&&r((0,L.default)(e),"not an integer"),e<0?e>>>0:e;case g.TYPES.int64:case g.TYPES.sint64:case g.TYPES.sfixed64:if(g.Long)try{return u(e,!1)}catch(t){r((0,L.default)(e),t.message)}else r((0,L.default)(e),"requires Long.js");case g.TYPES.uint64:case g.TYPES.fixed64:if(g.Long)try{return u(e,!0)}catch(t){r((0,L.default)(e),t.message)}else r((0,L.default)(e),"requires Long.js");case g.TYPES.bool:return"boolean"!=typeof e&&r((0,L.default)(e),"not a boolean"),e;case g.TYPES.float:case g.TYPES.double:return"number"!=typeof e&&r((0,L.default)(e),"not a number"),e;case g.TYPES.string:return"string"==typeof e||e&&e instanceof String||r((0,L.default)(e),"not a string"),""+e;case g.TYPES.bytes:return F.isByteBuffer(e)?e:F.wrap(e,"base64");case g.TYPES.enum:for(var t=this.resolvedType.getChildren(g.Reflect.Enum.Value),i=0;i<t.length;i++){if(t[i].name==e)return t[i].id;if(t[i].id==e)return t[i].id}if("proto3"===this.syntax)return("number"!=typeof e||e==e&&e%1!=0)&&r((0,L.default)(e),"not an integer"),(4294967295<e||e<0)&&r((0,L.default)(e),"not in range for uint32"),e;r(e,"not a valid enum value");case g.TYPES.group:case g.TYPES.message:if(e&&"object"===(0,L.default)(e)||r((0,L.default)(e),"object expected"),e instanceof this.resolvedType.clazz)return e;if(e instanceof g.Builder.Message){var o={};for(i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);e=o}return new this.resolvedType.clazz(e)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+e+" (undefined type "+this.type+")")},n.calculateLength=function(t,e){if(null===e)return 0;var n;switch(this.type){case g.TYPES.int32:return e<0?F.calculateVarint64(e):F.calculateVarint32(e);case g.TYPES.uint32:return F.calculateVarint32(e);case g.TYPES.sint32:return F.calculateVarint32(F.zigZagEncode32(e));case g.TYPES.fixed32:case g.TYPES.sfixed32:case g.TYPES.float:return 4;case g.TYPES.int64:case g.TYPES.uint64:return F.calculateVarint64(e);case g.TYPES.sint64:return F.calculateVarint64(F.zigZagEncode64(e));case g.TYPES.fixed64:case g.TYPES.sfixed64:return 8;case g.TYPES.bool:return 1;case g.TYPES.enum:return F.calculateVarint32(e);case g.TYPES.double:return 8;case g.TYPES.string:return n=F.calculateUTF8Bytes(e),F.calculateVarint32(n)+n;case g.TYPES.bytes:if(e.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+e.remaining()+" bytes remaining");return F.calculateVarint32(e.remaining())+e.remaining();case g.TYPES.message:return n=this.resolvedType.calculate(e),F.calculateVarint32(n)+n;case g.TYPES.group:return n=this.resolvedType.calculate(e),n+F.calculateVarint32(t<<3|g.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+e+" (unknown type)")},n.encodeValue=function(t,e,n){if(null===e)return n;switch(this.type){case g.TYPES.int32:e<0?n.writeVarint64(e):n.writeVarint32(e);break;case g.TYPES.uint32:n.writeVarint32(e);break;case g.TYPES.sint32:n.writeVarint32ZigZag(e);break;case g.TYPES.fixed32:n.writeUint32(e);break;case g.TYPES.sfixed32:n.writeInt32(e);break;case g.TYPES.int64:case g.TYPES.uint64:n.writeVarint64(e);break;case g.TYPES.sint64:n.writeVarint64ZigZag(e);break;case g.TYPES.fixed64:n.writeUint64(e);break;case g.TYPES.sfixed64:n.writeInt64(e);break;case g.TYPES.bool:"string"==typeof e?n.writeVarint32("false"===e.toLowerCase()?0:!!e):n.writeVarint32(e?1:0);break;case g.TYPES.enum:n.writeVarint32(e);break;case g.TYPES.float:n.writeFloat32(e);break;case g.TYPES.double:n.writeFloat64(e);break;case g.TYPES.string:n.writeVString(e);break;case g.TYPES.bytes:if(e.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+e.remaining()+" bytes remaining");var r=e.offset;n.writeVarint32(e.remaining()),n.append(e),e.offset=r;break;case g.TYPES.message:var i=(new F).LE();this.resolvedType.encode(e,i),n.writeVarint32(i.offset),n.append(i.flip());break;case g.TYPES.group:this.resolvedType.encode(e,n),n.writeVarint32(t<<3|g.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+e+" (unknown type)")}return n},n.decode=function(t,e,n){if(e!=this.type.wireType)throw Error("Unexpected wire type for element");var r,i;switch(this.type){case g.TYPES.int32:return 0|t.readVarint32();case g.TYPES.uint32:return t.readVarint32()>>>0;case g.TYPES.sint32:return 0|t.readVarint32ZigZag();case g.TYPES.fixed32:return t.readUint32()>>>0;case g.TYPES.sfixed32:return 0|t.readInt32();case g.TYPES.int64:return t.readVarint64();case g.TYPES.uint64:return t.readVarint64().toUnsigned();case g.TYPES.sint64:return t.readVarint64ZigZag();case g.TYPES.fixed64:return t.readUint64();case g.TYPES.sfixed64:return t.readInt64();case g.TYPES.bool:return!!t.readVarint32();case g.TYPES.enum:return t.readVarint32();case g.TYPES.float:return t.readFloat();case g.TYPES.double:return t.readDouble();case g.TYPES.string:return t.readVString();case g.TYPES.bytes:if(i=t.readVarint32(),t.remaining()<i)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+i+" required but got only "+t.remaining());return r=t.clone(),r.limit=r.offset+i,t.offset+=i,r;case g.TYPES.message:return i=t.readVarint32(),this.resolvedType.decode(t,i);case g.TYPES.group:return this.resolvedType.decode(t,-1,n)}throw Error("[INTERNAL] Illegal decode type")},n.valueFromString=function(t){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case g.TYPES.int32:case g.TYPES.sint32:case g.TYPES.sfixed32:case g.TYPES.uint32:case g.TYPES.fixed32:return this.verifyValue((0,R.default)(t));case g.TYPES.int64:case g.TYPES.sint64:case g.TYPES.sfixed64:case g.TYPES.uint64:case g.TYPES.fixed64:return this.verifyValue(t);case g.TYPES.bool:return"true"===t;case g.TYPES.string:return this.verifyValue(t);case g.TYPES.bytes:return F.fromBinary(t)}},n.valueToString=function(t){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===g.TYPES.bytes?t.toString("binary"):t.toString()},s.Element=h;var c=function(t,e,n,r,i,o){a.call(this,t,e,n,r,o),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},i=c.prototype=(0,I.default)(a.prototype);function y(t,e){var n=e.readVarint32(),r=7&n,i=n>>>3;switch(r){case g.WIRE_TYPES.VARINT:for(;n=e.readUint8(),128==(128&n););break;case g.WIRE_TYPES.BITS64:e.offset+=8;break;case g.WIRE_TYPES.LDELIM:n=e.readVarint32(),e.offset+=n;break;case g.WIRE_TYPES.STARTGROUP:y(i,e);break;case g.WIRE_TYPES.ENDGROUP:if(i===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+i+" ("+t+" expected)");case g.WIRE_TYPES.BITS32:e.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+r)}return!0}i.build=function(t){if(this.clazz&&!t)return this.clazz;var e=function(h,s){var a=s.getChildren(h.Reflect.Message.Field),u=s.getChildren(h.Reflect.Message.OneOf),r=function t(e){h.Builder.Message.call(this);for(var n,r=0,i=u.length;r<i;++r)this[u[r].name]=null;for(r=0,i=a.length;r<i;++r){var o=a[r];this[o.name]=o.repeated?[]:o.map?new h.Map(o):null,!o.required&&"proto3"!==s.syntax||null===o.defaultValue||(this[o.name]=o.defaultValue)}if(0<arguments.length)if(1!==arguments.length||null===e||"object"!==(0,L.default)(e)||!("function"!=typeof e.encode||e instanceof t)||(0,A.default)(e)||e instanceof h.Map||F.isByteBuffer(e)||e instanceof ArrayBuffer||h.Long&&e instanceof h.Long)for(r=0,i=arguments.length;r<i;++r)void 0!==(n=arguments[r])&&this.$set(a[r].name,n);else this.$set(e)},o=r.prototype=(0,I.default)(h.Builder.Message.prototype);o.add=function(t,e,n){var r=s._fieldsByName[t];if(!n){if(!r)throw Error(this+"#"+t+" is undefined");if(!(r instanceof h.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+r.toString(!0));if(!r.repeated)throw Error(this+"#"+t+" is not a repeated field");e=r.verifyValue(e,!0)}return null===this[t]&&(this[t]=[]),this[t].push(e),this},o.$add=o.add,o.set=function(t,e,n){if(t&&"object"===(0,L.default)(t)){for(var r in n=e,t)t.hasOwnProperty(r)&&void 0!==(e=t[r])&&this.$set(r,e,n);return this}var i,o=s._fieldsByName[t];if(n)this[t]=e;else{if(!o)throw Error(this+"#"+t+" is not a field: undefined");if(!(o instanceof h.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));this[o.name]=e=o.verifyValue(e)}return o&&o.oneof&&(i=this[o.oneof.name],null!==e?(null!==i&&i!==o.name&&(this[i]=null),this[o.oneof.name]=o.name):i===t&&(this[o.oneof.name]=null)),this},o.$set=o.set,o.get=function(t,e){if(e)return this[t];var n=s._fieldsByName[t];if(!(n&&n instanceof h.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(n instanceof h.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+n.toString(!0));return this[n.name]},o.$get=o.get;for(var t=0;t<a.length;t++){var e=a[t];e instanceof h.Reflect.Message.ExtensionField||s.builder.options.populateAccessors&&function(n){var t=n.originalName.replace(/(_[a-zA-Z])/g,function(t){return t.toUpperCase().replace("_","")}),t=t.substring(0,1).toUpperCase()+t.substring(1),e=n.originalName.replace(/([A-Z])/g,function(t){return"_"+t}),r=function(t,e){return this[n.name]=e?t:n.verifyValue(t),this},i=function(){return this[n.name]};null===s.getChild("set"+t)&&(o["set"+t]=r),null===s.getChild("set_"+e)&&(o["set_"+e]=r),null===s.getChild("get"+t)&&(o["get"+t]=i),null===s.getChild("get_"+e)&&(o["get_"+e]=i)}(e)}function c(t,n,r,i){if(null===t||"object"!==(0,L.default)(t)){if(i&&i instanceof h.Reflect.Enum){var e=h.Reflect.Enum.getName(i.object,t);if(null!==e)return e}return t}if(F.isByteBuffer(t))return n?t.toBase64():t.toBuffer();if(h.Long.isLong(t))return r?t.toString():h.Long.fromValue(t);var o;if((0,A.default)(t))return o=[],t.forEach(function(t,e){o[e]=c(t,n,r,i)}),o;if(o={},t instanceof h.Map){for(var s=t.entries(),a=s.next();!a.done;a=s.next())o[t.keyElem.valueToString(a.value[0])]=c(a.value[1],n,r,t.valueElem.resolvedType);return o}var u,l=t.$type,f=void 0;for(u in t)t.hasOwnProperty(u)&&(l&&(f=l.getChild(u))?o[u]=c(t[u],n,r,f.resolvedType):o[u]=c(t[u],n,r));return o}return o.encode=function(e,t){"boolean"==typeof e&&(t=e,e=void 0);var n=!1;e||(e=new F,n=!0);var r=e.littleEndian;try{return s.encode(this,e.LE(),t),(n?e.flip():e).LE(r)}catch(t){throw e.LE(r),t}},r.encode=function(t,e,n){return new r(t).encode(e,n)},o.calculate=function(){return s.calculate(this)},o.encodeDelimited=function(t,e){var n=!1;t||(t=new F,n=!0);var r=(new F).LE();return s.encode(this,r,e).flip(),t.writeVarint32(r.remaining()),t.append(r),n?t.flip():t},o.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toArrayBuffer()),t}},o.toArrayBuffer=o.encodeAB,o.encodeNB=function(){try{return this.encode().toBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBuffer()),t}},o.toBuffer=o.encodeNB,o.encode64=function(){try{return this.encode().toBase64()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBase64()),t}},o.toBase64=o.encode64,o.encodeHex=function(){try{return this.encode().toHex()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toHex()),t}},o.toHex=o.encodeHex,o.toRaw=function(t,e){return c(this,!!t,!!e,this.$type)},o.encodeJSON=function(){return(0,k.default)(c(this,!0,!0,this.$type))},r.decode=function(e,t,n){"string"==typeof t&&(n=t,t=-1),"string"==typeof e&&(e=F.wrap(e,n||"base64")),e=F.isByteBuffer(e)?e:F.wrap(e);var r=e.littleEndian;try{var i=s.decode(e.LE());return e.LE(r),i}catch(t){throw e.LE(r),t}},r.decodeDelimited=function(e,t){if("string"==typeof e&&(e=F.wrap(e,t||"base64")),e=F.isByteBuffer(e)?e:F.wrap(e),e.remaining()<1)return null;var n=e.offset,r=e.readVarint32();if(e.remaining()<r)return e.offset=n,null;try{var i=s.decode(e.slice(e.offset,e.offset+r).LE());return e.offset+=r,i}catch(t){throw e.offset+=r,t}},r.decode64=function(t){return r.decode(t,"base64")},r.decodeHex=function(t){return r.decode(t,"hex")},r.decodeJSON=function(t){return new r(JSON.parse(t))},o.toString=function(){return s.toString()},P.default&&((0,P.default)(r,"$options",{value:s.buildOpt()}),(0,P.default)(o,"$options",{value:r.$options}),(0,P.default)(r,"$type",{value:s}),(0,P.default)(o,"$type",{value:s})),r}(g,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var n,r=0,i=this.children.length;r<i;r++)if(n=this.children[r],n instanceof v||n instanceof c||n instanceof b){if(e.hasOwnProperty(n.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+n.toString(!0)+" cannot override static property '"+n.name+"'");e[n.name]=n.build()}else if(n instanceof c.Field)n.build(),this._fields.push(n),this._fieldsById[n.id]=n,this._fieldsByName[n.name]=n;else if(!(n instanceof c.OneOf||n instanceof _))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[r].toString(!0));return this.clazz=e},i.encode=function(t,e,n){for(var r,i,o=null,s=0,a=this._fields.length;s<a;++s)r=this._fields[s],i=t[r.name],r.required&&null===i?null===o&&(o=r):r.encode(n?i:r.verifyValue(i),e,t);if(null===o)return e;var u=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw u.encoded=e,u},i.calculate=function(t){for(var e,n,r=0,i=0,o=this._fields.length;i<o;++i){if(e=this._fields[i],n=t[e.name],e.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+e);r+=e.calculate(n,t)}return r},i.decode=function(t,e,n){e="number"==typeof e?e:-1;for(var r,i,o,s,a,u,l=t.offset,f=new this.clazz;t.offset<l+e||-1===e&&0<t.remaining();){if(r=t.readVarint32(),i=7&r,o=r>>>3,i===g.WIRE_TYPES.ENDGROUP){if(o!==n)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+o+" ("+(n?n+" expected":"not a group")+")");break}if(s=this._fieldsById[o])s.repeated&&!s.options.packed?f[s.name].push(s.decode(i,t)):s.map?(a=s.decode(i,t),f[s.name].set(a[0],a[1])):(f[s.name]=s.decode(i,t),s.oneof&&(u=f[s.oneof.name],null!==u&&u!==s.name&&(f[u]=null),f[s.oneof.name]=s.name));else switch(i){case g.WIRE_TYPES.VARINT:t.readVarint32();break;case g.WIRE_TYPES.BITS32:t.offset+=4;break;case g.WIRE_TYPES.BITS64:t.offset+=8;break;case g.WIRE_TYPES.LDELIM:var h=t.readVarint32();t.offset+=h;break;case g.WIRE_TYPES.STARTGROUP:for(;y(o,t););break;default:throw Error("Illegal wire type for unknown field "+o+" in "+this.toString(!0)+"#decode: "+i)}}for(var c=0,p=this._fields.length;c<p;++c)if(s=this._fields[c],null===f[s.name])if("proto3"===this.syntax)f[s.name]=s.defaultValue;else{if(s.required){var d=Error("Missing at least one required field for "+this.toString(!0)+": "+s.name);throw d.decoded=f,d}g.populateDefaults&&null!==s.defaultValue&&(f[s.name]=s.defaultValue)}return f},s.Message=c;var l=function(t,e,n,r,i,o,s,a,u,l){f.call(this,t,e,o),this.className="Message.Field",this.required="required"===n,this.repeated="repeated"===n,this.map="map"===n,this.keyType=r||null,this.type=i,this.resolvedType=null,this.id=s,this.options=a||{},this.defaultValue=null,this.oneof=u||null,this.syntax=l||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof c.ExtensionField||(this.name=g.Util.toCamelCase(this.name))},o=l.prototype=(0,I.default)(f.prototype);o.build=function(){this.element=new h(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new h(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=h.defaultFieldValue(this.type)},o.verifyValue=function(t,e){e=e||!1;var n=this;function r(t,e){throw Error("Illegal value for "+n.toString(!0)+" of type "+n.type.name+": "+t+" ("+e+")")}if(null===t)return this.required&&r((0,L.default)(t),"required"),"proto3"===this.syntax&&this.type!==g.TYPES.message&&r((0,L.default)(t),"proto3 field without field presence cannot be null"),null;if(!this.repeated||e)return this.map&&!e?t instanceof g.Map?t:(t instanceof Object||r((0,L.default)(t),"expected ProtoBuf.Map or raw object for map field"),new g.Map(this,t)):(!this.repeated&&(0,A.default)(t)&&r((0,L.default)(t),"no array expected"),this.element.verifyValue(t));(0,A.default)(t)||(t=[t]);for(var i=[],o=0;o<t.length;o++)i.push(this.element.verifyValue(t[o]));return i},o.hasWirePresence=function(t,e){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&e[this.oneof.name]===this.name)return!0;switch(this.type){case g.TYPES.int32:case g.TYPES.sint32:case g.TYPES.sfixed32:case g.TYPES.uint32:case g.TYPES.fixed32:return 0!==t;case g.TYPES.int64:case g.TYPES.sint64:case g.TYPES.sfixed64:case g.TYPES.uint64:case g.TYPES.fixed64:return 0!==t.low||0!==t.high;case g.TYPES.bool:return t;case g.TYPES.float:case g.TYPES.double:return 0!==t;case g.TYPES.string:return 0<t.length;case g.TYPES.bytes:return 0<t.remaining();case g.TYPES.enum:return 0!==t;case g.TYPES.message:return null!==t;default:return!0}},o.encode=function(e,r,t){if(null===this.type||"object"!==(0,L.default)(this.type))throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===e||this.repeated&&0==e.length)return r;try{if(this.repeated)if(this.options.packed&&0<=g.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){r.writeVarint32(this.id<<3|g.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);for(var n=r.offset,i=0;i<e.length;i++)this.element.encodeValue(this.id,e[i],r);var o,s=r.offset-n,a=F.calculateVarint32(s);1<a&&(o=r.slice(n,r.offset),n+=a-1,r.offset=n,r.append(o)),r.writeVarint32(s,n-a)}else for(i=0;i<e.length;i++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e[i],r);else this.map?e.forEach(function(t,e){var n=F.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,e)+F.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,t);r.writeVarint32(this.id<<3|g.WIRE_TYPES.LDELIM),r.writeVarint32(n),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,e,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,t,r)},this):this.hasWirePresence(e,t)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e,r))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+e+" ("+t+")")}return r},o.calculate=function(e,t){if(e=this.verifyValue(e),null===this.type||"object"!==(0,L.default)(this.type))throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===e||this.repeated&&0==e.length)return 0;var n,r,i=0;try{if(this.repeated)if(this.options.packed&&0<=g.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){for(i+=F.calculateVarint32(this.id<<3|g.WIRE_TYPES.LDELIM),r=0,n=0;n<e.length;n++)r+=this.element.calculateLength(this.id,e[n]);i+=F.calculateVarint32(r),i+=r}else for(n=0;n<e.length;n++)i+=F.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,e[n]);else this.map?e.forEach(function(t,e){var n=F.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,e)+F.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,t);i+=F.calculateVarint32(this.id<<3|g.WIRE_TYPES.LDELIM),i+=F.calculateVarint32(n),i+=n},this):this.hasWirePresence(e,t)&&(i+=F.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,e))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+e+" ("+t+")")}return i},o.decode=function(t,e,n){var r=!this.map&&t==this.type.wireType||!n&&this.repeated&&this.options.packed&&t==g.WIRE_TYPES.LDELIM||this.map&&t==g.WIRE_TYPES.LDELIM;if(!r)throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==g.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&0<=g.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)&&!n){a=e.readVarint32(),a=e.offset+a;for(var i=[];e.offset<a;)i.push(this.decode(this.type.wireType,e,!0));return i}if(this.map){var o=h.defaultFieldValue(this.keyType),s=h.defaultFieldValue(this.type),a=e.readVarint32();if(e.remaining()<a)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+a+" required but got only "+e.remaining());var u=e.clone();for(u.limit=u.offset+a,e.offset+=a;0<u.remaining();){var l=u.readVarint32();t=7&l;var f=l>>>3;if(1===f)o=this.keyElement.decode(u,t,f);else{if(2!==f)throw Error("Unexpected tag in map field key/value submessage");s=this.element.decode(u,t,f)}}return[o,s]}return this.element.decode(e,t,this.id)},s.Message.Field=l;var p=function(t,e,n,r,i,o,s){l.call(this,t,e,n,null,r,i,o,s),this.extension};p.prototype=(0,I.default)(l.prototype),s.Message.ExtensionField=p;var d=function(t,e,n){f.call(this,t,e,n),this.fields=[]};s.Message.OneOf=d;var v=function(t,e,n,r,i){a.call(this,t,e,n,r,i),this.className="Enum",this.object=null};v.getName=function(t,e){for(var n,r=(0,M.default)(t),i=0;i<r.length;++i)if(t[n=r[i]]===e)return n;return null};var m=v.prototype=(0,I.default)(a.prototype);m.build=function(t){if(this.object&&!t)return this.object;for(var e=new g.Builder.Enum,n=this.getChildren(v.Value),r=0,i=n.length;r<i;++r)e[n[r].name]=n[r].id;return P.default&&(0,P.default)(e,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=e},s.Enum=v;var w=function(t,e,n,r){f.call(this,t,e,n),this.className="Enum.Value",this.id=r};w.prototype=(0,I.default)(f.prototype),s.Enum.Value=w;var _=function(t,e,n,r){f.call(this,t,e,n),this.field=r};_.prototype=(0,I.default)(f.prototype),s.Extension=_;var b=function(t,e,n,r){a.call(this,t,e,n,r),this.className="Service",this.clazz=null},E=b.prototype=(0,I.default)(a.prototype);E.build=function(t){return this.clazz&&!t?this.clazz:this.clazz=function(e,i){for(var o=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(t,e,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},t=o.prototype=(0,I.default)(e.Builder.Service.prototype),n=i.getChildren(e.Reflect.Service.RPCMethod),r=0;r<n.length;r++)!function(r){t[r.name]=function(t,n){try{try{t=r.resolvedRequestType.clazz.decode(F.wrap(t))}catch(t){if(!(t instanceof TypeError))throw t}if(null===t||"object"!==(0,L.default)(t))throw Error("Illegal arguments");t instanceof r.resolvedRequestType.clazz||(t=new r.resolvedRequestType.clazz(t)),this.rpcImpl(r.fqn(),t,function(t,e){if(t)n(t);else{null===e&&(e="");try{e=r.resolvedResponseType.clazz.decode(e)}catch(t){}e&&e instanceof r.resolvedResponseType.clazz?n(null,e):n(Error("Illegal response type received in service method "+i.name+"#"+r.name))}})}catch(t){setTimeout(n.bind(this,t),0)}},o[r.name]=function(t,e,n){new o(t)[r.name](e,n)},P.default&&((0,P.default)(o[r.name],"$options",{value:r.buildOpt()}),(0,P.default)(t[r.name],"$options",{value:o[r.name].$options}))}(n[r]);return P.default&&((0,P.default)(o,"$options",{value:i.buildOpt()}),(0,P.default)(t,"$options",{value:o.$options}),(0,P.default)(o,"$type",{value:i}),(0,P.default)(t,"$type",{value:i})),o}(g,this)},s.Service=b;var x=function(t,e,n,r){f.call(this,t,e,n),this.className="Service.Method",this.options=r||{}},T=x.prototype=(0,I.default)(f.prototype);T.buildOpt=e.buildOpt,s.Service.Method=x;var S=function(t,e,n,r,i,o,s,a){x.call(this,t,e,n,a),this.className="Service.RPCMethod",this.requestName=r,this.responseName=i,this.requestStream=o,this.responseStream=s,this.resolvedRequestType=null,this.resolvedResponseType=null};return S.prototype=(0,I.default)(x.prototype),s.Service.RPCMethod=S,s}(nt),nt.Builder=(Z=nt,X=nt.Lang,$=nt.Reflect,Q=function(t){this.ns=new $.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=t||{}},J=Q.prototype,Q.isMessage=function(t){return"string"==typeof t.name&&void 0===t.values&&void 0===t.rpc},Q.isMessageField=function(t){return"string"==typeof t.rule&&"string"==typeof t.name&&"string"==typeof t.type&&void 0!==t.id},Q.isEnum=function(t){return"string"==typeof t.name&&!(void 0===t.values||!(0,A.default)(t.values)||0===t.values.length)},Q.isService=function(t){return!("string"!=typeof t.name||"object"!==(0,L.default)(t.rpc)||!t.rpc)},Q.isExtend=function(t){return"string"==typeof t.ref},J.reset=function(){return this.ptr=this.ns,this},J.define=function(t){if("string"!=typeof t||!X.TYPEREF.test(t))throw Error("illegal namespace: "+t);return t.split(".").forEach(function(t){var e=this.ptr.getChild(t);null===e&&this.ptr.addChild(e=new $.Namespace(this,this.ptr,t)),this.ptr=e},this),this},J.create=function(t){if(!t)return this;if((0,A.default)(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(var e=[t];0<e.length;){if(t=e.pop(),!(0,A.default)(t))throw Error("not a valid namespace: "+(0,k.default)(t));for(;0<t.length;){var n=t.shift();if(Q.isMessage(n)){var o=new $.Message(this,this.ptr,n.name,n.options,n.isGroup,n.syntax),r={};n.oneofs&&(0,M.default)(n.oneofs).forEach(function(t){o.addChild(r[t]=new $.Message.OneOf(this,o,t))},this),n.fields&&n.fields.forEach(function(t){if(null!==o.getChild(0|t.id))throw Error("duplicate or invalid field id in "+o.name+": "+t.id);if(t.options&&"object"!==(0,L.default)(t.options))throw Error("illegal field options in "+o.name+"#"+t.name);var e=null;if("string"==typeof t.oneof&&!(e=r[t.oneof]))throw Error("illegal oneof in "+o.name+"#"+t.name+": "+t.oneof);t=new $.Message.Field(this,o,t.rule,t.keytype,t.type,t.name,t.id,t.options,e,n.syntax),e&&e.fields.push(t),o.addChild(t)},this);var i=[];if(n.enums&&n.enums.forEach(function(t){i.push(t)}),n.messages&&n.messages.forEach(function(t){i.push(t)}),n.services&&n.services.forEach(function(t){i.push(t)}),n.extensions&&("number"==typeof n.extensions[0]?o.extensions=[n.extensions]:o.extensions=n.extensions),this.ptr.addChild(o),0<i.length){e.push(t),t=i,i=null,this.ptr=o,o=null;continue}i=null}else if(Q.isEnum(n))o=new $.Enum(this,this.ptr,n.name,n.options,n.syntax),n.values.forEach(function(t){o.addChild(new $.Enum.Value(this,o,t.name,t.id))},this),this.ptr.addChild(o);else if(Q.isService(n))o=new $.Service(this,this.ptr,n.name,n.options),(0,M.default)(n.rpc).forEach(function(t){var e=n.rpc[t];o.addChild(new $.Service.RPCMethod(this,o,t,e.request,e.response,!!e.request_stream,!!e.response_stream,e.options))},this),this.ptr.addChild(o);else{if(!Q.isExtend(n))throw Error("not a valid definition: "+(0,k.default)(n));if(o=this.ptr.resolve(n.ref,!0),o)n.fields.forEach(function(e){if(null!==o.getChild(0|e.id))throw Error("duplicate extended field id in "+o.name+": "+e.id);if(o.extensions){var n=!1;if(o.extensions.forEach(function(t){e.id>=t[0]&&e.id<=t[1]&&(n=!0)}),!n)throw Error("illegal extended field id in "+o.name+": "+e.id+" (not within valid ranges)")}var t=e.name;this.options.convertFieldsToCamelCase&&(t=Z.Util.toCamelCase(t));var r=new $.Message.ExtensionField(this,o,e.rule,e.type,this.ptr.fqn()+"."+t,e.id,e.options),i=new $.Extension(this,this.ptr,e.name,r);r.extension=i,this.ptr.addChild(i),o.addChild(r)},this);else if(!/\.?google\.protobuf\./.test(n.ref))throw Error("extended message "+n.ref+" is not defined")}n=null,o=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},J.import=function(e,t){var n="/";if("string"==typeof t){if(Z.Util.IS_NODE&&(t=st(144).resolve(t)),!0===this.files[t])return this.reset();this.files[t]=!0}else if("object"===(0,L.default)(t)){var r=t.root;Z.Util.IS_NODE&&(r=st(144).resolve(r)),(0<=r.indexOf("\\")||0<=t.file.indexOf("\\"))&&(n="\\");var i=r+n+t.file;if(!0===this.files[i])return this.reset();this.files[i]=!0}if(e.imports&&0<e.imports.length){var o,s=!1;"object"===(0,L.default)(t)?(this.importRoot=t.root,s=!0,o=this.importRoot,t=t.file,(0<=o.indexOf("\\")||0<=t.indexOf("\\"))&&(n="\\")):"string"==typeof t?this.importRoot?o=this.importRoot:0<=t.indexOf("/")?(o=t.replace(/\/[^\/]*$/,""),""===o&&(o="/")):0<=t.indexOf("\\")?(o=t.replace(/\\[^\\]*$/,""),n="\\"):o=".":o=null;for(var a=0;a<e.imports.length;a++)if("string"==typeof e.imports[a]){if(!o)throw Error("cannot determine import root");var u=e.imports[a];if("google/protobuf/descriptor.proto"===u)continue;if(u=o+n+u,!0===this.files[u])continue;/\.proto$/i.test(u)&&!Z.DotProto&&(u=u.replace(/\.proto$/,".json"));var l=Z.Util.fetch(u);if(null===l)throw Error("failed to import '"+u+"' in '"+t+"': file not found");/\.json$/i.test(u)?this.import(JSON.parse(l+""),u):this.import(Z.DotProto.Parser.parse(l),u)}else t?/\.(\w+)$/.test(t)?this.import(e.imports[a],t.replace(/^(.+)\.(\w+)$/,function(t,e,n){return e+"_import"+a+"."+n})):this.import(e.imports[a],t+"_import"+a):this.import(e.imports[a]);s&&(this.importRoot=null)}e.package&&this.define(e.package),e.syntax&&rt(e);var f=this.ptr;return e.options&&(0,M.default)(e.options).forEach(function(t){f.options[t]=e.options[t]}),e.messages&&(this.create(e.messages),this.ptr=f),e.enums&&(this.create(e.enums),this.ptr=f),e.services&&(this.create(e.services),this.ptr=f),e.extends&&this.create(e.extends),this.reset()},J.resolveAll=function(){var t;if(null==this.ptr||"object"===(0,L.default)(this.ptr.type))return this;if(this.ptr instanceof $.Namespace)this.ptr.children.forEach(function(t){this.ptr=t,this.resolveAll()},this);else if(this.ptr instanceof $.Message.Field){if(X.TYPE.test(this.ptr.type))this.ptr.type=Z.TYPES[this.ptr.type];else{if(!X.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(t=(this.ptr instanceof $.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0),!t)throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=t,t instanceof $.Enum){if(this.ptr.type=Z.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==t.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(t instanceof $.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=t.isGroup?Z.TYPES.group:Z.TYPES.message}}if(this.ptr.map){if(!X.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=Z.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof Z.Reflect.Service.Method){if(!(this.ptr instanceof Z.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(t=this.ptr.parent.resolve(this.ptr.requestName,!0),!(t&&t instanceof Z.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=t,t=this.ptr.parent.resolve(this.ptr.responseName,!0),!(t&&t instanceof Z.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=t}else if(!(this.ptr instanceof Z.Reflect.Message.OneOf||this.ptr instanceof Z.Reflect.Extension||this.ptr instanceof Z.Reflect.Enum.Value))throw Error("illegal object in namespace: "+(0,L.default)(this.ptr)+": "+this.ptr);return this.reset()},J.build=function(t){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!t)return this.result;for(var e="string"==typeof t?t.split("."):t,n=this.result,r=0;r<e.length;r++){if(!n[e[r]]){n=null;break}n=n[e[r]]}return n},J.lookup=function(t,e){return t?this.ns.resolve(t,e):this.ns},J.toString=function(){return"Builder"},Q.Message=function(){},Q.Enum=function(){},Q.Service=function(){},Q),nt.Map=(K=nt.Reflect,tt=function(t,e){if(!t.map)throw Error("field is not a map");if(this.field=t,this.keyElem=new K.Element(t.keyType,null,!0,t.syntax),this.valueElem=new K.Element(t.type,t.resolvedType,!1,t.syntax),this.map={},(0,P.default)(this,"size",{get:function(){return(0,M.default)(this.map).length}}),e)for(var n=(0,M.default)(e),r=0;r<n.length;r++){var i=this.keyElem.valueFromString(n[r]),o=this.valueElem.verifyValue(e[n[r]]);this.map[this.keyElem.valueToString(i)]={key:i,value:o}}},et=tt.prototype,et.clear=function(){this.map={}},et.delete=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t)),n=e in this.map;return delete this.map[e],n},et.entries=function(){for(var t,e=[],n=(0,M.default)(this.map),r=0;r<n.length;r++)e.push([(t=this.map[n[r]]).key,t.value]);return it(e)},et.keys=function(){for(var t=[],e=(0,M.default)(this.map),n=0;n<e.length;n++)t.push(this.map[e[n]].key);return it(t)},et.values=function(){for(var t=[],e=(0,M.default)(this.map),n=0;n<e.length;n++)t.push(this.map[e[n]].value);return it(t)},et.forEach=function(t,e){for(var n,r=(0,M.default)(this.map),i=0;i<r.length;i++)t.call(e,(n=this.map[r[i]]).value,n.key,this)},et.set=function(t,e){var n=this.keyElem.verifyValue(t),r=this.valueElem.verifyValue(e);return this.map[this.keyElem.valueToString(n)]={key:n,value:r},this},et.get=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t));if(e in this.map)return this.map[e].value},et.has=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t));return e in this.map},tt),nt.loadProto=function(t,e,n){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(n=e,e=void 0),nt.loadJson(nt.DotProto.Parser.parse(t),e,n)},nt.protoFromString=nt.loadProto,nt.loadProtoFile=function(e,n,r){if(n&&"object"===(0,L.default)(n)?(r=n,n=null):n&&"function"==typeof n||(n=null),n)return nt.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(t){if(null!==t)try{n(null,nt.loadProto(t,r,e))}catch(t){n(t)}else n(Error("Failed to fetch file"))});var t=nt.Util.fetch("object"===(0,L.default)(e)?e.root+"/"+e.file:e);return null===t?null:nt.loadProto(t,r,e)},nt.protoFromFile=nt.loadProtoFile,nt.newBuilder=function(t){return t=t||{},void 0===t.convertFieldsToCamelCase&&(t.convertFieldsToCamelCase=nt.convertFieldsToCamelCase),void 0===t.populateAccessors&&(t.populateAccessors=nt.populateAccessors),new nt.Builder(t)},nt.loadJson=function(t,e,n){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(n=e,e=null),e&&"object"===(0,L.default)(e)||(e=nt.newBuilder()),"string"==typeof t&&(t=JSON.parse(t)),e.import(t,n),e.resolveAll(),e},nt.loadJsonFile=function(e,n,r){if(n&&"object"===(0,L.default)(n)?(r=n,n=null):n&&"function"==typeof n||(n=null),n)return nt.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(t){if(null!==t)try{n(null,nt.loadJson(JSON.parse(t),r,e))}catch(t){n(t)}else n(Error("Failed to fetch file"))});var t=nt.Util.fetch("object"===(0,L.default)(e)?e.root+"/"+e.file:e);return null===t?null:nt.loadJson(JSON.parse(t),r,e)}}).call(this,st(34))},function(t,e,n){"use strict";var r=n(137),i=n(243),o=n(35),s=n(58);t.exports=n(244)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(14).f,i=n(24),o=n(4)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var l=n(33),f=n(59),h=n(16);t.exports=function(t,e,n){for(var r=l(this),i=h(r.length),o=arguments.length,s=f(1<o?e:void 0,i),a=2<o?n:void 0,u=void 0===a?i:f(a,i);s<u;)r[s++]=t;return r}},function(t){"use strict";var e,n="object"==typeof Reflect?Reflect:null,f=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};function u(t){console&&console.warn&&console.warn(t)}e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=m,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function s(t,e,n,r){var i,o,s,a;return l(n),o=t._events,void 0===o?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s?(s=o[e]=n,++t._eventsCount):("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=h(t),0<i&&s.length>i&&!s.warned&&(s.warned=!0,a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit"),a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,u(a))),t}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?v(i):g(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function y(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function v(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function m(i,o){return new Promise(function(t,e){function n(){void 0!==r&&i.removeListener("error",r),t([].slice.call(arguments))}var r;"error"!==o&&(r=function(t){i.removeListener(o,n),e(t)},i.once("error",r)),i.once(o,n)})}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return h(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r,i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(0<e.length&&(r=e[0]),r instanceof Error)throw r;var s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)f(a,this,e);else for(var u=a.length,l=g(a,u),n=0;n<u;++n)f(l[n],this,e);return!0},i.prototype.addListener=function(t,e){return s(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return s(this,t,e,!0)},i.prototype.once=function(t,e){return l(e),this.on(t,c(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,c(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,i,o,s;if(l(e),r=this._events,void 0===r)return this;if(n=r[t],void 0===n)return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)r=i[o],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;0<=o;o--)this.removeListener(t,e[o]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return 0<this._eventsCount?e(this._events):[]}},function(t,e,n){e=t.exports=n(145),e.Stream=e,e.Readable=e,e.Writable=n(94),e.Duplex=n(26),e.Transform=n(150),e.PassThrough=n(281)},function(t,e,n){var r=n(93),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,tt,et){"use strict";(function(t){var r=et(272),o=et(273),s=et(146);function e(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function n(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=h.prototype):(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,n){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,n);if("number"!=typeof t)return i(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function i(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,n,r):"string"==typeof e?c(t,e,n):g(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,r){return u(e),e<=0||void 0===n?a(t,e):"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n)}function f(t,e){if(u(e),t=a(t,e<0?0:0|y(e)),!h.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!h.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(e,n);t=a(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function p(t,e){var n=e.length<0?0:0|y(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),h.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=h.prototype):t=p(t,e),t}function g(t,e){if(h.isBuffer(e)){var n=0|y(e.length);return t=a(t,n),0===t.length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||K(e.length)?a(t,0):p(t,e);if("Buffer"===e.type&&s(e.data))return p(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),h.alloc(+t)}function m(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(r)return Z(t).length;e=(""+e).toLowerCase(),r=!0}}function w(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t=t||"utf8";;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return L(this,e,n);case"ascii":return D(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:E(t,e,n,r,i);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):E(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(t,e,n,r,i){var o=1,s=t.length,a=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var l=-1,f=n;f<s;f++)if(u(t,f)===u(e,-1===l?0:f-l)){if(-1===l&&(l=f),f-l+1===a)return l*o}else-1!==l&&(f-=f-l),l=-1;else for(s<n+a&&(n=s-a),f=n;0<=f;f--){for(var h=!0,c=0;c<a;c++)if(u(t,f+c)!==u(e,c)){h=!1;break}if(h)return f}return-1}function x(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),i<r&&(r=i)):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function T(t,e,n,r){return J(Z(e,t.length-n),t,n,r)}function S(t,e,n,r){return J(X(e),t,n,r)}function k(t,e,n,r){return S(t,e,n,r)}function M(t,e,n,r){return J(Q(e),t,n,r)}function I(t,e,n,r){return J($(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function L(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,l=t[i],f=null,h=239<l?4:223<l?3:191<l?2:1;if(i+h<=n)switch(h){case 1:l<128&&(f=l);break;case 2:o=t[i+1],128==(192&o)&&(u=(31&l)<<6|63&o,127<u&&(f=u));break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s,2047<u&&(u<55296||57343<u)&&(f=u));break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a,65535<u&&u<1114112&&(f=u))}null===f?(f=65533,h=1):65535<f&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=h}return P(r)}tt.Buffer=h,tt.SlowBuffer=v,tt.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:e(),tt.kMaxLength=n(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,n){return i(null,t,e,n)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,n){return l(null,t,e,n)},h.allocUnsafe=function(t){return f(null,t)},h.allocUnsafeSlow=function(t){return f(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;for(var n=h.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},h.byteLength=m,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?L(this,0,t):w.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=tt.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,r,i){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,s=n-e,a=Math.min(o,s),u=this.slice(r,i),l=t.slice(e,n),f=0;f<a;++f)if(u[f]!==l[f]){o=u[f],s=l[f];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},h.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return T(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function P(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=R));return n}function D(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=H(t[o]);return i}function F(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function z(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Y(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(t,e,n,r,i){return i||Y(t,e,n,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,i){return i||Y(t,e,n,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,n,r,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):n<t&&(t=n),e<0?(e+=n,e<0&&(e=0)):n<e&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=h.prototype;else for(var r=e-t,i=new h(r,void 0),o=0;o<r;++o)i[o]=this[o+t];return i},h.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},h.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},h.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,i<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return i*=128,i<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,r){var i;t=+t,e|=0,n|=0,r||(i=Math.pow(2,8*n)-1,C(this,t,e,n,i,0));var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,r){var i;t=+t,e|=0,n|=0,r||(i=Math.pow(2,8*n)-1,C(this,t,e,n,i,0));var o=n-1,s=1;for(this[e+o]=255&t;0<=--o&&(s*=256);)this[e+o]=t/s&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,n,r){var i;t=+t,e|=0,r||(i=Math.pow(2,8*n-1),C(this,t,e,n,i-1,-i));var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeIntBE=function(t,e,n,r){var i;t=+t,e|=0,r||(i=Math.pow(2,8*n-1),C(this,t,e,n,i-1,-i));var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,n){return V(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return V(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},h.prototype.fill=function(t,e,n,r){if("string"==typeof t){var i;if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length&&(i=t.charCodeAt(0),i<256&&(t=i)),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t=t||0,"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else for(var o=h.isBuffer(t)?t:Z(new h(t,r).toString()),s=o.length,a=0;a<n-e;++a)this[a+e]=o[a%s];return this};var G=/[^+\/0-9A-Za-z-_]/g;function q(t){if(t=W(t).replace(G,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function W(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function Z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),55295<n&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function $(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Q(t){return r.toByteArray(q(t))}function J(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K(t){return t!=t}}).call(this,et(37))},function(F,t,B){"use strict";(function(t,e,n){var s=B(62);function c(t){var e=this;this.next=null,this.entry=null,this.finish=function(){N(e,t)}}F.exports=m;var a,u=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:s.nextTick;m.WritableState=v;var r=Object.create(B(46));r.inherits=B(36);var i={deprecate:B(279)},o=B(147),l=B(92).Buffer,f=n.Uint8Array||function(){};function h(t){return l.from(t)}function p(t){return l.isBuffer(t)||t instanceof f}var d,g=B(148);function y(){}function v(t,e){a=a||B(26),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){k(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function m(t){if(a=a||B(26),!(d.call(m,this)||this instanceof a))return new m(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function w(t,e){var n=new Error("write after end");t.emit("error",n),s.nextTick(e,n)}function _(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),s.nextTick(r,o),i=!1),i}function b(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n)),e}function E(t,e,n,r,i,o){var s;n||(s=b(e,r,i),r!==s&&(n=!0,i="buffer",r=s));var a=e.objectMode?1:r.length;e.length+=a;var u,l=e.length<e.highWaterMark;return l||(e.needDrain=!0),e.writing||e.corked?(u=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):x(t,e,!1,a,r,i,o),l}function x(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,n,r,i){--e.pendingcb,n?(s.nextTick(i,r),s.nextTick(D,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),D(t,e))}function S(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function k(t,e){var n,r=t._writableState,i=r.sync,o=r.writecb;S(r),e?T(t,r,i,e,o):(n=L(r),n||r.corked||r.bufferProcessing||!r.bufferedRequest||A(t,r),i?u(M,t,r,n,o):M(t,r,n,o))}function M(t,e,n,r){n||I(t,e),e.pendingcb--,r(),D(t,e)}function I(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function A(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)i[s]=n,n.isBuf||(a=!1),n=n.next,s+=1;i.allBuffers=a,x(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new c(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,f=n.callback,h=e.objectMode?1:u.length;if(x(t,e,!1,h,u,l,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function L(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function R(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),D(e,n)})}function P(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,s.nextTick(R,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function D(t,e){var n=L(e);return n&&(P(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function O(t,e,n){e.ending=!0,D(t,e),n&&(e.finished?s.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function N(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}r.inherits(m,o),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===m&&t&&t._writableState instanceof v}})):d=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=!r.objectMode&&p(t);return o&&!l.isBuffer(t)&&(t=h(t)),"function"==typeof e&&(n=e,e=null),e=o?"buffer":e||r.defaultEncoding,"function"!=typeof n&&(n=y),r.ended?w(this,n):(o||_(this,r,t,n))&&(r.pendingcb++,i=E(this,r,o,t,e,n)),i},m.prototype.cork=function(){var t=this._writableState;t.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||A(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||O(this,r,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,B(34),B(277).setImmediate,B(37))},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e._Math=void 0,n(39),n(41);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var o=[],t=0;t<256;t++)o[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=o[255&t]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+"-"+o[255&e]+o[e>>8&255]+"-"+o[e>>16&15|64]+o[e>>24&255]+"-"+o[63&n|128]+o[n>>8&255]+"-"+o[n>>16&255]+o[n>>24&255]+o[255&r]+o[r>>8&255]+o[r>>16&255]+o[r>>24&255];return i.toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*i.DEG2RAD},radToDeg:function(t){return t*i.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};e._Math=i},function(t,e,n){t.exports=!n(13)&&!n(20)(function(){return 7!=Object.defineProperty(n(97)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(19),i=n(7).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){t.exports=!n(5)&&!n(8)(function(){return 7!=Object.defineProperty(n(99)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(21),i=n(6).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var s=n(17),a=n(18),u=n(43);t.exports=n(13)?Object.defineProperties:function(t,e){a(t);for(var n,r=u(e),i=r.length,o=0;o<i;)s.f(t,n=r[o++],e[n]);return t}},function(t,e,n){var s=n(23),a=n(28),u=n(163)(!1),l=n(70)("IE_PROTO");t.exports=function(t,e){var n,r=a(t),i=0,o=[];for(n in r)n!=l&&s(r,n)&&o.push(n);for(;e.length>i;)s(r,n=e[i++])&&(~u(o,n)||o.push(n));return o}},function(t,e,n){var r=n(68);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(69),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(29),i=n(8),s=n(30),a=/"/g,o=function(t,e,n,r){var i=String(s(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),o+">"+i+"</"+e+">"};t.exports=function(e,t){var n={};n[e]=t(o),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(6),i=n(24),o=n(42),s=n(173),f=n(47),a=n(8),u=n(74).f,l=n(73).f,h=n(14).f,c=n(176).trim,p="Number",d=r[p],g=d,y=d.prototype,v=o(n(77)(y))==p,m="trim"in String.prototype,w=function(t){var e=f(t,!1);if("string"==typeof e&&2<e.length){e=m?e.trim():c(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var s,a=e.slice(2),u=0,l=a.length;u<l;u++)if(s=a.charCodeAt(u),s<48||i<s)return NaN;return parseInt(a,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(v?a(function(){y.valueOf.call(n)}):o(n)!=p)?s(new g(w(e)),n,d):w(e)};for(var _,b=n(5)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)i(g,_=b[E])&&!i(d,_)&&h(d,_,l(g,_));d.prototype=y,y.constructor=d,n(22)(r,p,d)}},function(t,e,n){var r=n(42);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var s=n(24),a=n(58),u=n(109)(!1),l=n(75)("IE_PROTO");t.exports=function(t,e){var n,r=a(t),i=0,o=[];for(n in r)n!=l&&s(r,n)&&o.push(n);for(;e.length>i;)s(r,n=e[i++])&&(~u(o,n)||o.push(n));return o}},function(t,e,n){var u=n(58),l=n(16),f=n(59);t.exports=function(a){return function(t,e,n){var r,i=u(t),o=l(i.length),s=f(n,o);if(a&&e!=e){for(;s<o;)if(r=i[s++],r!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}},function(t,e,n){var r=n(108),i=n(76);t.exports=Object.keys||function(t){return r(t,i)}},function(t){function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=e},function(t,e,n){t.exports=n(184)},function(t,e,n){t.exports=n(187)},function(t,e,n){var r=n(60),i=n(38),o=n(28),s=n(65),a=n(23),u=n(96),l=Object.getOwnPropertyDescriptor;e.f=n(13)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(e,t,n){var r=n(116),i=n(121);function o(t){return e.exports=o="function"==typeof i&&"symbol"==typeof r?function(t){return typeof t}:function(t){return t&&"function"==typeof i&&t.constructor===i&&t!==i.prototype?"symbol":typeof t},o(t)}e.exports=o},function(t,e,n){t.exports=n(191)},function(t,e,n){"use strict";var w=n(54),_=n(3),b=n(118),E=n(27),x=n(45),T=n(193),S=n(80),k=n(119),M=n(12)("iterator"),I=!([].keys&&"next"in[].keys()),A="@@iterator",L="keys",R="values",P=function(){return this};t.exports=function(t,e,n,r,i,o,s){T(n,e,r);var a,u,l,f=function(t){if(!I&&t in d)return d[t];switch(t){case L:case R:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",c=i==R,p=!1,d=t.prototype,g=d[M]||d[A]||i&&d[i],y=g||f(i),v=i?c?f("entries"):y:void 0,m="Array"==e&&d.entries||g;if(m&&(l=k(m.call(new t)),l!==Object.prototype&&l.next&&(S(l,h,!0),w||"function"==typeof l[M]||E(l,M,P))),c&&g&&g.name!==R&&(p=!0,y=function(){return g.call(this)}),w&&!s||!I&&!p&&d[M]||E(d,M,y),x[e]=y,x[h]=P,i)if(a={values:c?y:f(R),keys:o?y:f(L),entries:v},s)for(u in a)u in d||b(d,u,a[u]);else _(_.P+_.F*(I||p),e,a);return a}},function(t,e,n){t.exports=n(27)},function(t,e,n){var r=n(23),i=n(32),o=n(70)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){n(194);for(var r=n(7),i=n(27),o=n(45),s=n(12)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],f=r[l],h=f&&f.prototype;h&&!h[s]&&i(h,s,l),o[l]=o.Array}},function(t,e,n){t.exports=n(197)},function(t,e,n){var r=n(68);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(101),i=n(72).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var i=n(3),o=n(1),s=n(20);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],r={};r[t]=e(n),i(i.S+i.F*s(function(){n(1)}),"Object",r)}},function(t,e,n){var s=n(3),r=n(53),a=n(20),u=n(83),i="["+u+"]",l="​",o=RegExp("^"+i+i+"*"),f=RegExp(i+i+"*$"),h=function(t,e,n){var r={},i=a(function(){return!!u[t]()||l[t]()!=l}),o=r[t]=i?e(c):u[t];n&&(r[n]=o),s(s.P+s.F*i,"String",r)},c=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(f,"")),t};t.exports=h},function(t,e,n){var i=n(15),o=n(105),s=n(4)("species");t.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||null==(n=i(r)[s])?e:o(n)}},function(t,e,n){"use strict";var r=n(220)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){"use strict";var i=n(51),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){"use strict";n(221);var f=n(22),h=n(9),c=n(8),p=n(30),d=n(4),g=n(85),y=d("species"),v=!c(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),m=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(n,t,e){var o,r,i,s,a=d(n),u=!c(function(){var t={};return t[a]=function(){return 7},7!=""[n](t)}),l=u?!c(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[y]=function(){return e}),e[a](""),!t}):void 0;u&&l&&("replace"!==n||v)&&("split"!==n||m)||(o=/./[a],r=e(p,a,""[n],function(t,e,n,r,i){return e.exec===g?u&&!i?{done:!0,value:o.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),i=r[0],s=r[1],f(String.prototype,n,i),h(RegExp.prototype,a,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}))}},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var u=r(n(57)),o=r(n(223)),s=r(n(224)),a=r(n(131)),l=new a.default,f=l.netArea,h={check:f+"sdk/check",onlineCheck:f+"sdk/auth/web",fmFileServer:f+"sdk/auth/downMaps"},c="026685bf295f587b5dffc1f18d5dc27c",p=function(t,e,n){if(!t||"string"!=typeof e||32!=e.length)return!1;if(null==t||""==t)return!0;var r=o.default.decryption(e,c),i=s.default.encryption(n),r=o.default.decryption(r,i);return r==t},d=function(t,e,n){n=n||"fengmap.localhost:";var r=s.default.encryption(n+e),i=o.default.decryption(t,r);return i},g=function(){var t=new Date,e=(t.getFullYear(),t.getMonth()+1),t=t.getDate(),n=t%2==0?1:-1,r=Math.max(Math.pow(t%10+ +n,2)+n*e,0),i=Math.abs(2*t+n*e);return""+r+i},y=(g(),function(t,e,n){d(t,e);var r=window.location.host,i=r.indexOf(":");-1<i&&(r=r.slice(0,i));var o=r||"0.0.0.0";return{webURL:o,appKey:t,mapId:n,appName:e}}),v={checkOffLine:function(t,e,n,r){n=n||r;var i=d(t,e);return n==i},checkIsOnLine:function(t,e){l.getData(h.check,function(){t&&t()},function(){e&&e()})},checkOnLine:function(t,e,n,r,i,o){var s=h.onlineCheck,a=y(t,e,n),a=(0,u.default)(a);l.getData(s,function(t){t?t.success?r&&r(t):i&&i(t):i&&i()},function(t){t?(t=JSON.parse(t),i&&i(t)):i&&i()},o,a,{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"})},checkLicense:p,getCerityData:y,ls:0},m=v;e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0,n(132);var o=r(n(10)),s=r(n(11)),h=r(n(225)),a=r(n(133)),u=function(){function t(){(0,o.default)(this,t),this.netArea=a.default}return(0,s.default)(t,[{key:"getScene",value:function(t,e,n,r,i,o,s){var a=n?e+".scene":e,u=t+"/"+a+".fmap";null===e&&(u=t);var l=new h.default;r&&(n||(u=t),l.setRequestHeader({"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"})),l.requestMethod=i||"GET",l.sendData=r,l.setResponseType("arraybuffer"),l.getFile(u,function(t){o(t,e)},function(t){console.error("网络请求错误"),s&&s(t)})}},{key:"getFloor",value:function(t,e,n,r,i,o,s){var a,u,l,f;s?this.getUrlFloor(t,e,n,r,i,o):(a=new h.default,"fengmap"==t&&(t=this.netArea+"sdk/authLayered/downMaps",a.requestMethod="POST",a.sendData=o,a.setRequestHeader({"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"})),u=t+"/"+n+"."+e+".biz.fmap",l=t+"/"+n+"."+e+".geo.fmap",f=t+"/"+n+"."+e+".navi.fmap",a.setResponseType("arraybuffer"),a.getFile(l,function(n){a.getFile(u,function(e){a.getFile(f,function(t){i(n,e,t,r)},function(){console.error("网络请求错误")})},function(){console.error("网络请求错误")})},function(){console.error("网络请求错误")}))}},{key:"getUrlFloor",value:function(t,e,n,s,a,u){var r=new h.default;"fengmap"==t&&(t=this.netArea+"sdk/authLayered/obtainMapRoute",r.requestMethod="POST",r.sendData=u,r.setRequestHeader({"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"}));var i=t+"/"+n+"."+e+".biz.fmap",o=t+"/"+n+"."+e+".geo.fmap",l=t+"/"+n+"."+e+".navi.fmap",f=this;r.getFile(o,function(o){r.getFile(i,function(i){r.getFile(l,function(t){var e=t.replace('"',"").replace('"',""),n=i.replace('"',"").replace('"',""),r=o.replace('"',"").replace('"',"");f.getUrlFloorData(n,r,e,s,u,a)},function(){console.error("网络请求错误")})},function(){console.error("网络请求错误")})},function(){console.error("网络请求错误")})}},{key:"getUrlFloorData",value:function(t,e,r,i,n,o){var s=new h.default;s.sendData=null,s.requestMethod="GET",s.setRequestHeader({"X-Requested-With":"XMLHttpRequest"}),s.setResponseType("arraybuffer"),s.getFile(e,function(n){s.getFile(t,function(e){s.getFile(r,function(t){o(n,e,t,i)},function(){console.error("网络请求错误")})},function(){console.error("网络请求错误")})},function(){console.error("网络请求错误")})}},{key:"getTheme",value:function(t,n){var e=new h.default;e.getFile(t,function(t){var e=JSON.parse(t);n(e)},function(){})}},{key:"getData",value:function(t,e,n,r,i,o){var s=new h.default;s.requestMethod=r||"GET",s.sendData=i,s.setRequestHeader(o),s.getFile(t,function(t){t=JSON.parse(t),e(t)},function(t){n(t)})}},{key:"getUrl",value:function(t,e,n,r,i,o,s){var a=n?e+".scene":e,u=t+"/"+a+".fmap",l=new h.default;r&&(n||(u=t),l.setRequestHeader({"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"})),l.requestMethod=i||"GET",l.sendData=r,l.getFile(u,function(t){o(t,e)},function(t){console.error("网络请求错误"),s&&s(t)})}}]),t}(),l=u;e.default=l},function(t,e,n){"use strict";var T=n(15),r=n(33),S=n(16),k=n(25),M=n(127),I=n(128),A=Math.max,L=Math.min,c=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,R=function(t){return void 0===t?t:String(t)};n(129)("replace",2,function(i,o,b,E){return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):b.call(String(n),t,e)},function(t,e){var n=E(b,t,this,e);if(n.done)return n.value;var r=T(t),i=String(this),o="function"==typeof e;o||(e=String(e));var s,a=r.global;a&&(s=r.unicode,r.lastIndex=0);for(var u=[];;){var l=I(r,i);if(null===l)break;if(u.push(l),!a)break;var f=String(l[0]);""===f&&(r.lastIndex=M(i,S(r.lastIndex),s))}for(var h="",c=0,p=0;p<u.length;p++){l=u[p];for(var d=String(l[0]),g=A(L(k(l.index),i.length),0),y=[],v=1;v<l.length;v++)y.push(R(l[v]));var m,w=l.groups,_=o?(m=[d].concat(y,g,i),void 0!==w&&m.push(w),String(e.apply(void 0,m))):x(d,i,g,y,w,e);c<=g&&(h+=i.slice(c,g)+_,c=g+d.length)}return h+i.slice(c)}];function x(o,s,a,u,l,t){var f=a+o.length,h=u.length,e=d;return void 0!==l&&(l=r(l),e=p),b.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return s.slice(0,a);case"'":return s.slice(f);case"<":n=l[e.slice(1,-1)];break;default:var r=+e;if(0===r)return t;if(h<r){var i=c(r/10);return 0!==i&&i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}})},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i="https://console.fengmap.com/api-s/",o=i;e.default=o},function(t,e,n){var r=n(231),i=n(12)("iterator"),o=n(45);t.exports=n(1).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){t.exports=n(232)},function(t,e,n){var r=n(14).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n(5)&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){var r=n(4)("unscopables"),i=Array.prototype;null==i[r]&&n(9)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){var r=n(24),i=n(33),o=n(75)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){t.exports=n(249)},function(t,e,n){for(var r,i=n(6),o=n(9),s=n(40),a=s("typed_array"),u=s("view"),l=!(!i.ArrayBuffer||!i.DataView),f=l,h=0,c=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<c;)(r=i[p[h++]])?(o(r.prototype,a,!0),o(r.prototype,u,!0)):f=!1;t.exports={ABV:l,CONSTR:f,TYPED:a,VIEW:u}},function(t,e,n){var i=n(22);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(25),i=n(16);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,l,e){(function(i){function o(t,e){for(var n=0,r=t.length-1;0<=r;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;)t.unshift("..");return t}function r(t){"string"!=typeof t&&(t+="");for(var e=0,n=-1,r=!0,i=t.length-1;0<=i;--i)if(47===t.charCodeAt(i)){if(!r){e=i+1;break}}else-1===n&&(r=!1,n=i+1);return-1===n?"":t.slice(e,n)}function s(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}l.resolve=function(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){var r=0<=n?arguments[n]:i.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},l.normalize=function(t){var e=l.isAbsolute(t),n="/"===a(t,-1);return t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},l.isAbsolute=function(t){return"/"===t.charAt(0)},l.join=function(){var t=Array.prototype.slice.call(arguments,0);return l.normalize(s(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},l.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<e?[]:t.slice(e,n-e+1)}t=l.resolve(t).substr(1),e=l.resolve(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),s=o,a=0;a<o;a++)if(r[a]!==i[a]){s=a;break}for(var u=[],a=s;a<r.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},l.sep="/",l.delimiter=":",l.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;1<=o;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},l.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},l.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;0<=s;--s){var a=t.charCodeAt(s);if(47===a){if(i)continue;n=s+1;break}-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1)}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,e(34))},function(q,t,W){"use strict";(function(t,v){var m=W(62);q.exports=g;var s,r=W(146);g.ReadableState=d,W(90).EventEmitter;var w=function(t,e){return t.listeners(e).length},i=W(147),a=W(92).Buffer,e=t.Uint8Array||function(){};function u(t){return a.from(t)}function o(t){return a.isBuffer(t)||t instanceof e}var n=Object.create(W(46));n.inherits=W(36);var l,f=W(274),_=void 0,_=f&&f.debuglog?f.debuglog("stream"):function(){},h=W(275),c=W(148);n.inherits(g,i);var p=["error","close","destroy","pause","resume"];function b(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function d(t,e){s=s||W(26),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l=l||W(149).StringDecoder,this.decoder=new l(t.encoding),this.encoding=t.encoding)}function g(t){if(s=s||W(26),!(this instanceof g))return new g(t);this._readableState=new d(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function y(t,e,n,r,i){var o,s=t._readableState;return null===e?(s.reading=!1,I(t,s)):(i||(o=x(s,e)),o?t.emit("error",o):s.objectMode||e&&0<e.length?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=u(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?E(t,s,e,!1):R(t,s)):E(t,s,e,!1))):r||(s.reading=!1)),T(s)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&A(t)),R(t,e)}function x(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function T(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),g.prototype.destroy=c.destroy,g.prototype._undestroy=c.undestroy,g.prototype._destroy=function(t,e){this.push(null),e(t)},g.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=a.from(t,e),e=""),n=!0),y(this,t,e,!1,n)},g.prototype.unshift=function(t){return y(this,t,null,!0,!1)},g.prototype.isPaused=function(){return!1===this._readableState.flowing},g.prototype.setEncoding=function(t){return l=l||W(149).StringDecoder,this._readableState.decoder=new l(t),this._readableState.encoding=t,this};var S=8388608;function k(t){return S<=t?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function M(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=k(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t,e){var n;e.ended||(e.decoder&&(n=e.decoder.end(),n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)),e.ended=!0,A(t))}function A(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?m.nextTick(L,t):L(t))}function L(t){_("emit readable"),t.emit("readable"),B(t)}function R(t,e){e.readingMore||(e.readingMore=!0,m.nextTick(P,t,e))}function P(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function D(e){return function(){var t=e._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&w(e,"data")&&(t.flowing=!0,B(e))}}function O(t){_("readable nexttick read 0"),t.read(0)}function N(t,e){e.resumeScheduled||(e.resumeScheduled=!0,m.nextTick(F,t,e))}function F(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0)}function B(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function C(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=z(t,e.buffer,e.decoder),n);var n}function z(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():(n?U:Y)(t,e),r}function U(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,0===t){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}function Y(t,e){var n=a.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),t-=s,0===t){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}function V(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,m.nextTick(j,e,t))}function j(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function G(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}g.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),(0===e.length&&e.ended?V:A)(this),null;if(t=M(t,e),0===t&&e.ended)return 0===e.length&&V(this),null;var r,i=e.needReadable;return _("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,_("length less than watermark",i)),e.ended||e.reading?(i=!1,_("reading or ended",i)):i&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=M(n,e))),r=0<t?C(t,e):null,null===r?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&V(this)),null!==r&&this.emit("data",r),r},g.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},g.prototype.pipe=function(n,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,_("pipe count=%d opts=%j",i.pipesCount,t);var e=(!t||!1!==t.end)&&n!==v.stdout&&n!==v.stderr,o=e?a:y;function s(t,e){_("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,f())}function a(){_("onend"),n.end()}i.endEmitted?m.nextTick(o):r.once("end",o),n.on("unpipe",s);var u=D(r);n.on("drain",u);var l=!1;function f(){_("cleanup"),n.removeListener("close",d),n.removeListener("finish",g),n.removeListener("drain",u),n.removeListener("error",p),n.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",c),l=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||u()}var h=!1;function c(t){_("ondata"),h=!1;var e=n.write(t);!1!==e||h||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==G(i.pipes,n))&&!l&&(_("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function p(t){_("onerror",t),y(),n.removeListener("error",p),0===w(n,"error")&&n.emit("error",t)}function d(){n.removeListener("finish",g),y()}function g(){_("onfinish"),n.removeListener("close",d),y()}function y(){_("unpipe"),r.unpipe(n)}return r.on("data",c),b(n,"error",p),n.once("close",d),n.once("finish",g),n.emit("pipe",r),i.flowing||(_("pipe resume"),r.resume()),n},g.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=G(e.pipes,t);return-1===s||(e.pipes.splice(s,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},g.prototype.on=function(t,e){var n,r=i.prototype.on.call(this,t,e);return"data"===t?!1!==this._readableState.flowing&&this.resume():"readable"===t&&(n=this._readableState,n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&A(this):m.nextTick(O,this))),r},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,N(this,t)),this},g.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},g.prototype.wrap=function(n){var t,r=this,i=this._readableState,o=!1;for(t in n.on("end",function(){var t;_("wrapped end"),i.decoder&&!i.ended&&(t=i.decoder.end(),t&&t.length&&r.push(t)),r.push(null)}),n.on("data",function(t){var e;_("wrapped data"),i.decoder&&(t=i.decoder.write(t)),i.objectMode&&null==t||(i.objectMode||t&&t.length)&&(e=r.push(t),e||(o=!0,n.pause()))}),n)void 0===this[t]&&"function"==typeof n[t]&&(this[t]=function(t){return function(){return n[t].apply(n,arguments)}}(t));for(var e=0;e<p.length;e++)n.on(p[e],this.emit.bind(this,p[e]));return this._read=function(t){_("wrapped _read",t),o&&(o=!1,n.resume())},this},Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),g._fromList=C}).call(this,W(37),W(34))},function(t){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,e,n){t.exports=n(90).EventEmitter},function(t,e,n){"use strict";var o=n(62);function r(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(s,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}t.exports={destroy:r,undestroy:i}},function(t,e,n){"use strict";var r=n(280).Buffer,i=r.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function s(t){var e=o(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function a(t){var e;switch(this.encoding=s(t),this.encoding){case"utf16le":this.text=d,this.end=g,e=4;break;case"utf8":this.fillLast=h,e=4;break;case"base64":this.text=y,this.end=v,e=3;break;default:return this.write=m,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function u(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function l(t,e,n){var r=e.length-1;if(r<n)return 0;var i=u(e[r]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=u(e[r]),0<=i?(0<i&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=u(e[r]),0<=i?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0))}function f(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function h(t){var e=this.lastTotal-this.lastNeed,n=f(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){var n=l(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function d(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function g(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function y(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function v(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function m(t){return t.toString(this.encoding)}function w(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=p,a.prototype.text=c,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=s;var r=n(26),i=Object.create(n(46));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){u(n,t,e)}):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(36),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r,i=this._transformState;i.writecb=n,i.writechunk=t,i.writeencoding=e,i.transforming||(r=this._readableState,(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark))},s.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.Vector3=c,n(44);var o,s,a,u,l=r(n(31)),f=n(95),h=n(152);function c(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}(0,l.default)(c.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(u=new h.Quaternion,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(u.setFromEuler(t))}),applyAxisAngle:(a=new h.Quaternion,function(t,e){return this.applyQuaternion(a.setFromAxisAngle(t,e))}),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,l=a*n+s*e-i*r,f=a*r+i*n-o*e,h=-i*e-o*n-s*r;return this.x=u*a+h*-i+l*-s-f*-o,this.y=l*a+h*-o+f*-i-u*-s,this.z=f*a+h*-s+u*-o-l*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(s=new c,function(t){return s.copy(this).projectOnVector(t),this.sub(s)}),reflect:(o=new c,function(t){return this.sub(o.copy(t).multiplyScalar(2*this.dot(t)))}),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(f._Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}})},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.Quaternion=u;var o=r(n(289)),x=r(n(292)),s=r(n(31)),a=n(95);function u(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}(0,s.default)(u,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,s){var a,u,l,f,h,c,p,d,g=n[r+0],y=n[r+1],v=n[r+2],m=n[r+3],w=i[o+0],_=i[o+1],b=i[o+2],E=i[o+3];m===E&&g===w&&y===_&&v===b||(c=1-s,a=g*w+y*_+v*b+m*E,u=0<=a?1:-1,l=1-a*a,l>x.default&&(f=Math.sqrt(l),h=Math.atan2(f,a*u),c=Math.sin(c*h)/f,s=Math.sin(s*h)/f),p=s*u,g=g*c+w*p,y=y*c+_*p,v=v*c+b*p,m=m*c+E*p,c===1-s&&(d=1/Math.sqrt(g*g+y*y+v*v+m*m),g*=d,y*=d,v*=d,m*=d)),t[e]=g,t[e+1]=y,t[e+2]=v,t[e+3]=m}}),(0,o.default)(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),(0,s.default)(u.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,s=Math.cos,a=Math.sin,u=s(n/2),l=s(r/2),f=s(i/2),h=a(n/2),c=a(r/2),p=a(i/2);return"XYZ"===o?(this._x=h*l*f+u*c*p,this._y=u*c*f-h*l*p,this._z=u*l*p+h*c*f,this._w=u*l*f-h*c*p):"YXZ"===o?(this._x=h*l*f+u*c*p,this._y=u*c*f-h*l*p,this._z=u*l*p-h*c*f,this._w=u*l*f+h*c*p):"ZXY"===o?(this._x=h*l*f-u*c*p,this._y=u*c*f+h*l*p,this._z=u*l*p+h*c*f,this._w=u*l*f-h*c*p):"ZYX"===o?(this._x=h*l*f-u*c*p,this._y=u*c*f+h*l*p,this._z=u*l*p-h*c*f,this._w=u*l*f+h*c*p):"YZX"===o?(this._x=h*l*f+u*c*p,this._y=u*c*f+h*l*p,this._z=u*l*p-h*c*f,this._w=u*l*f-h*c*p):"XZY"===o&&(this._x=h*l*f-u*c*p,this._y=u*c*f-h*l*p,this._z=u*l*p+h*c*f,this._w=u*l*f+h*c*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],u=n[9],l=n[2],f=n[6],h=n[10],c=r+a+h;return 0<c?(e=.5/Math.sqrt(c+1),this._w=.25/e,this._x=(f-u)*e,this._y=(o-l)*e,this._z=(s-i)*e):a<r&&h<r?(e=2*Math.sqrt(1+r-a-h),this._w=(f-u)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(o+l)/e):h<a?(e=2*Math.sqrt(1+a-r-h),this._w=(o-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(u+f)/e):(e=2*Math.sqrt(1+h-r-a),this._w=(s-i)/e,this._x=(o+l)/e,this._y=(u+f)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=1e-6,r=t.dot(e)+1;return r<n?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=r,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(a._Math.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,u=e._z,l=e._w;return this._x=n*l+o*s+r*u-i*a,this._y=r*l+o*a+i*s-n*u,this._z=i*l+o*u+n*a-r*s,this._w=o*l-n*s-r*a-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),1<=s)return this._w=o,this._x=n,this._y=r,this._z=i,this;var a=1-s*s;if(a<=x.default){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(a),f=Math.atan2(l,s),h=Math.sin((1-e)*f)/l,c=Math.sin(e*f)/l;return this._w=o*h+this._w*c,this._x=n*h+this._x*c,this._y=r*h+this._y*c,this._z=i*h+this._z*c,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}})},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var o,s=r(n(156)),a=r(n(157)),u=r(n(287)),l=r(n(288)),f=n(151),h=n(95),c=n(295),p=n(152),d=window.fengmap||{},g={VERSION:s.default.VERSION,BUILD:s.default.BUILD,FMNavigation:a.default,FMNaviMode:u.default,FMNaviPriority:l.default};for(o in g)g.hasOwnProperty(o)&&(d[o]=g[o]);window.fengmap=d,window.Geo=window.Geo||{Vector3:f.Vector3,_Math:h._Math,Matrix4:c.Matrix4,Quaternion:p.Quaternion};var y=d;e.default=y},function(t,e,n){n(155);var r=n(1).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(3);r(r.S+r.F*!n(13),"Object",{defineProperty:n(17).f})},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i={VERSION:"2.7.1",BUILD:1165},o=i;e.default=o},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0,n(39),n(41);var o=r(n(160));n(44);var u=r(n(57));n(169);var l=r(n(170));n(106);var s,O,f,a,h,c,p,N,d,g,y,v,m,w=r(n(31)),_=r(n(10)),b=r(n(11)),E=r(n(111)),x=r(n(183)),T=r(n(190)),S=r(n(205)),k=r(n(209)),M=r(n(222));function I(r){var i=A();return function(){var t,e=(0,S.default)(r),n=i?(t=(0,S.default)(this).constructor,(0,o.default)(e,arguments,t)):e.apply(this,arguments);return(0,T.default)(this,n)}}function A(){if("undefined"==typeof Reflect||!o.default)return!1;if(o.default.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call((0,o.default)(Date,[],function(){})),!0}catch(t){return!1}}n(271),n(286),window.fengmap&&(s={},window.fengmap,s=window.fengmap.inner||{},O=s.Graphics||{},f=s.FMSegment||{},a=s.FMNaviMode||{},h=s.FMNaviPriority||{},c=s.FMRouteCalcuResult||{},p=s.EventDispatcher||{},N=s.DataManager||{},d=s.FMUtil||{},g=s.FMImageMarker||{},y=s.FMLineMarker||{},v=s.FMLocationMarker||{},m=s.FMLanguageType||{});var L=function(t){(0,x.default)(r,t);var n=I(r);function r(t){var e;return(0,_.default)(this,r),e=n.call(this),t.map&&t.scaleLevel&&!t.scale&&(t.scale=t.map.mapScaleLevels[t.scaleLevel]),t.map&&t.offsetHeight&&!t.lineMarkerHeight&&(t.lineMarkerHeight=t.offsetHeight),e.map=null,e.sceneData=null,e.speed=5,e.followSpeed=.2,e.followPosition=!0,e.followAngle=!1,e.locationMarkerFollowAngle=!0,e.isMultiGroups=!1,e.inTime=1.2,e.tiltAngle=80,e.changeGroupTiltAngle=30,e.scale=282,e.changeTiltAngle=!0,e.minScale=141,e.extendScale=1.3,e.locationMarkerUrl="",e.locationMarkerSize=100,e.locationMarkerHeight=3,e.lineMarkerHeight=1,e.imageMarkerHeight=6,e.directionAssert=10,e.combineAsset=5,e.completeDistance=0,e.naviLanguage=m.ZH,e.naviMode=a.MODULE_SHORTEST,e.naviPriority=h.PRIORITY_DEFAULT,e.autoRoute=!0,e.autoClearNaviLine=!0,e.lineStyle={lineWidth:10,radius:.5,dash:{size:4,gap:2}},e._passingPts={},e._passPtsEpson=1,e._failedInsertedPts={},(0,w.default)((0,E.default)(e),t),e._init(),e}return(0,b.default)(r,[{key:"_init",value:function(){var t,e,n=this;this.map&&(this.mapServerURL&&this.mapID?(t={key:this.map.MapOptions.key,appName:this.map.MapOptions.appName,tile:!1,mapServerURL:this.mapServerURL,mapID:this.mapID},e=new M.default(t),e.openMap(function(){var t=e.dataManager._sceneDecodeData[n.mapID];n._analyser=new fengmap.FMNaviAnalyser({}),n._analyser.initByScene(t),n.callback()})):(this._analyser=new fengmap.FMNaviAnalyser,this._analyser.init(this.map)),this._naviDescriptionsCalculator=new k.default({map:this.map,directionAssert:this.directionAssert,combineAsset:this.combineAsset,naviLanguage:this.naviLanguage,completeDistance:this.completeDistance})),this._simulateParams=null,this._startData=null,this._endData=null,this._startMarker=null,this._endMarker=null,this._startMarkerLayer=null,this._endMarkerLayer=null,this._locationMarker=null,this._naviLineMarkers=[],this._naviResults=[],this._naviDescriptions=[],this._naviDescriptionsData=[],this._naviDistance=0,this._naviGroupsDistance=null,this._naviEntracesDistance=[null,null],this._timer=new fm.Clock,this._pause=!1,this._toPos=null,this._toRot=null,this._allLen=0,this._preGid=0,this._locateLastGroupID=null,this._changeGrouping=!1,this._animateFun=null,this._isSimulating=!1,this._isEnd=!1,this._groupPointsIndex=0,this._gpsData=null,this._tiltToAnimater=null,this._scaleToAnimater=null,this._moveToAnimater=null,this._focusGroupToAnimater=null,this._passingPts={},this._failedInsertedPts={}}},{key:"on",value:function(t,e){this.addEventListener(t,e)}},{key:"off",value:function(t,e){this.removeEventListener(t,e)}},{key:"dispose",value:function(){this.stop(),this.map=null,this._analyser&&(this._analyser.dispose(),this._analyser=null),this._naviDescriptionsCalculator&&(this._naviDescriptionsCalculator.dispose(),this._naviDescriptionsCalculator=null)}},{key:"getRouteDescriptions",value:function(t,e){var n=t||this._naviResults;if(!this._isNaviResultsValide(n))return{};var r=(0,w.default)({},e);r.map||(r.map=this._map,r.analyser=this);var i=new k.default(r),o=i.calculate(n);return{naviDescriptions:o[0],naviDescriptionsData:o[1],naviDistance:o[2],naviGroupsDistance:o[3]}}},{key:"setLineStyle",value:function(t){this._naviLineMarker&&this._naviLineMarker.updateStyle(t),this.lineStyle=t}},{key:"setNaviLanguage",value:function(t){if(!t||"string"!=typeof t)return!1;var e,n=t.toLowerCase();return(n==m.ZH||n==m.EN)&&(this.naviLanguage!=n&&(this.naviLanguage=n,this._naviDescriptionsCalculator&&(this._naviDescriptionsCalculator.naviLanguage=n),0<this._naviResults.length&&(e=this._naviDescriptionsCalculator.calculate(this._naviResults),this._naviDescriptions=e[0],this._naviDescriptionsData=e[1])),!0)}},{key:"setStartPoint",value:function(t,e){this._startData=(0,w.default)({},this._startData,t,{x:t.x,y:t.y,groupID:t.groupID});var n=null;return t.url&&!e&&(n=this._createMarker(t,!0)),this.autoRoute&&(this._getNaviResult(),this._needDrawLines=!0),n}},{key:"setEndPoint",value:function(t,e){this._endData=t;var n=null;return!t.url||t.noMarker||e||(n=this._createMarker(t,!1)),this.autoRoute&&(this._getNaviResult(),this._needDrawLines=!0),n}},{key:"route",value:function(t,e){this._getNaviResult(t,e),this._needDrawLines=!0}},{key:"naviConstraint",value:function(t){if(this._startData&&this._endData){var e={index:-1,coord:{groupID:t.groupID},angle:null,distance:Number.MAX_VALUE,distanceToNext:Number.MAX_VALUE,remain:this._naviDistance},n=this._analyse().map(function(t){return{x:t.x,y:t.z,z:0,groupID:t.gid,index:t._index}}),r=this._analyser._navi._graphs.get(t.groupID);if(r){for(var i=r.queryContainExtentId(t),o={},s=1;s<n.length;s++){var a,u=n[s-1],l=n[s];u.groupID===t.groupID&&l.groupID===t.groupID&&i==r.queryContainExtentId(u)&&(a=O.pointDistanceToLine(t,u,l,o),a<e.distance&&(e.distance=a,(0,w.default)(e.coord,o),e.angle=this._getRouteAngle(u,l),e.index=u.index,e.distanceToNext=O.distanceOfTwoPoints(o,l)))}if(-1==e.index)for(var f=0;f<n.length;f++){var h,c=n[f];c.groupID==t.groupID&&i==r.queryContainExtentId(c)&&(h=O.distanceOfTwoPoints(t,c),h<e.distance&&(e.distance=h,(0,w.default)(e.coord,c),e.index=c.index,e.distanceToNext=0,n[f+1]&&n[f+1].groupID==t.groupID&&(e.distanceToNext=O.distanceOfTwoPoints(t,n[f+1]))))}if(-1!=e.index){for(var p,d,g=0,y=n.length-1;y>e.index;y--)y-1>e.index&&(p=n[y],d=n[y-1],p.groupID==d.groupID&&(g+=O.distanceOfTwoPoints(p,d)));n[e.index+1]&&n[e.index+1].groupID==e.coord.groupID&&(g+=O.distanceOfTwoPoints(n[e.index+1],e.coord)),e.remain=g}return e}}}},{key:"pathConstraint",value:function(t){return this._analyser?this._analyser.pathConstraint(t):null}},{key:"locate",value:function(t,e){this._isSimulating&&this.stop(),t.groupID||t.groupId&&(t.groupID=t.groupId),t.groupID!=this._locateLastGroupID&&(this._locateLastGroupID=t.groupID),this.locateWalking(t,e)}},{key:"dropPtsByCicle",value:function(t){var e,n=[];for(e in this._passingPts)if(e==t.groupID)for(var r=0;r<this._passingPts[e].length;r++){var i=this._passingPts[e][r],o=Math.pow(i[0]-t.x,2),s=Math.pow(i[1]-t.y,2),a=Math.sqrt(o+s);a<this._passPtsEpson&&(n.push(i),this._passingPts[e].splice(r,1),r--)}return n}},{key:"locateWalking",value:function(t,e){var n=this.dropPtsByCicle(t),r=this.naviConstraint(t);if(r){if(this._naviLineMarker.passed)for(var i=0;i<this._naviLineMarker._lineNodes.length;i++)this._naviLineMarker._lineNodes[i].line.material.uniforms.miny.value=1-r.remain/this._naviDistance,this._naviLineMarker._lineNodes[i].line.material.uniforms.pcolor.value=new fm.Color(this._naviLineMarker.passedColor);else for(var o=0;o<this._naviLineMarker._lineNodes.length;o++)this._naviLineMarker._lineNodes[o].line.material.uniforms.miny.value=0;var s={type:"walking",distance:r.distance,remain:r.remain,walk:this._naviDistance-r.remain,distanceToNext:r.distanceToNext,angle:r.angle,point:r.coord,groupID:t.groupID,index:r.index,isReal:!0,noArrivedPassingPts:this.passingPts};0<n.length&&(s.passing=n),this.dispatchEvent(s),this._locationMarker&&(r.coord.height=this.locationMarkerHeight,this._locationMarker.setPosition(r.coord),e?this._locationMarker.rotate(e):this._locationMarker.rotate(r.angle))}}},{key:"locateNoConstraint",value:function(t,e){this._isSimulating&&this.stop(),t.groupID||t.groupId&&(t.groupID=t.groupId),t.groupID!==this._locateLastGroupID&&(this._locateLastGroupID=t.groupID),this.locateWalkingNoConstraint(t,e)}},{key:"locateWalkingNoConstraint",value:function(t,e){var n=this.naviConstraint(t);n&&(this.dispatchEvent({type:"walking",distance:n.distance,remain:n.remain,walk:this._naviDistance-n.remain,distanceToNext:n.distanceToNext,angle:n.angle,point:n.coord,groupID:t.groupID,index:n.index,isReal:!0}),this._locationMarker&&(t.height=this.locationMarkerHeight,this._locationMarker.setPosition(t),e&&this._locationMarker.rotate(e)))}},{key:"clearLocationMarker",value:function(){this._locationMarker&&(this.map.removeLocationMarker(this._locationMarker),this._locationMarker=null)}},{key:"clearMarkers",value:function(){this._startMarker&&(this._startMarkerLayer.removeMarker(this._startMarker),this._startMarkerLayer=null,this._startMarker=null,this._startData=null),this._endMarker&&(this._endMarkerLayer.removeMarker(this._endMarker),this._endMarkerLayer=null,this._endMarker=null,this._endData=null)}},{key:"drawNaviLine",value:function(){if(this._startData&&this._endData)return this._needDrawLines=!1,this.autoClearNaviLine&&this.clearNaviLines(),this._naviLineMarker=this._drawLines(this._naviResults),this._naviLineMarker}},{key:"clearNaviLine",value:function(){this._naviLineMarker&&(this.map.removeLineMarker(this._naviLineMarker),this._naviLineMarker=null)}},{key:"clearNaviLines",value:function(){for(var t=0;t<this._naviLineMarkers.length;t++)this.map.removeLineMarker(this._naviLineMarkers[t]),this._naviLineMarkers[t]=null;this._naviLineMarkers=[]}},{key:"focusNaviLineSegment",value:function(t,e){var n,r,i,o=this,s=null,a=null,u=null;this._naviDescriptionsData&&t<this._naviDescriptionsData.length&&(i=this._naviDescriptionsData[t],a=i.startPoint,u=i.endPoint,u=u||a,n=i.startGID,r=i.endGID,a.z=this.map.getFMGroup(n).height,u.z=this.map.getFMGroup(r).height,s={x:(a.x+u.x)/2,y:(a.y+u.y)/2,z:u.z}),s&&(e=e||{},e.rawLevel=!0,this._moveTo({x:s.x,y:s.y,groupID:r},this._getValueOrDefault(e,"time","duration",this.inTime),null,function(){var t;a&&u&&(t=o.map.getScaleValueByVectics(a,u),!(0,l.default)(t)&&0<t&&(t*=e.extendScale||o.extendScale,o._scaleTo(t,o._getValueOrDefault(e,"time","duration",o.inTime),null,e.callback)))}))}},{key:"clearAll",value:function(){this.clearMarkers(),this.clearNaviLine(),this.clearLocationMarker()}},{key:"simulate",value:function(t){var e,n,r=this;this._startData&&this._endData&&0!=this._naviResults.length&&(e=t||{},this._simulateParams=(0,w.default)({},e),n=e.inTime||this.inTime,e.scale=e.scale||this.scale||0,this._locationMarker||this._initLocationMarker(),this._locationMarkerToStartPoint(),this._needDrawLines&&this.drawNaviLine(),this.followPosition?this._focusGroupToAnimater=this._focusGroupTo(this._startData.groupID,n,null,function(){r._moveToAnimater=r._moveTo(r._startData,n,null,function(){var t=e.scale<r.minScale?r.minScale:e.scale;r.changeTiltAngle?r._tiltToAnimater=r._tiltTo(r.tiltAngle,n,null,function(){r._scaleToAnimater=r._scaleTo(t,n,null,function(){r._works()})}):r._scaleToAnimater=r._scaleTo(t,n,null,function(){r._works()})})}):this._works())}},{key:"pause",value:function(){this._tiltToAnimater&&this._tiltToAnimater.pause(),this._scaleToAnimater&&this._scaleToAnimater.pause(),this._moveToAnimater&&this._moveToAnimater.pause(),this._focusGroupToAnimater&&this._focusGroupToAnimater.pause(),this._pause=!0}},{key:"resume",value:function(){this._tiltToAnimater&&this._tiltToAnimater.resume(),this._scaleToAnimater&&this._scaleToAnimater.resume(),this._moveToAnimater&&this._moveToAnimater.resume(),this._focusGroupToAnimater&&this._focusGroupToAnimater.resume(),this._pause=!1}},{key:"stop",value:function(){this._gpsStop=!0,this._timer.stop(),this._tiltToAnimater&&(this.map.removeAnimater(this._tiltToAnimater),this._tiltToAnimater=null),this._scaleToAnimater&&(this.map.removeAnimater(this._scaleToAnimater),this._scaleToAnimater=null),this._moveToAnimater&&(this.map.removeAnimater(this._moveToAnimater),this._moveToAnimater=null),this._focusGroupToAnimater&&(this.map.removeAnimater(this._focusGroupToAnimater),this._focusGroupToAnimater=null),this._animateFun&&this.map.off("update",this._animateFun),this._pause=!1,this._toPos=null,this._toRot=null,this._allLen=0,this._preGid=0,this._changeGrouping=!1,this._animateFun=null,this._isSimulating=!1,this._isEnd=!1,this._groupPointsIndex=0,this._gpsData=null}},{key:"_initLocationMarker",value:function(){this._locationMarker||(this._locationMarker=new v({id:"location",map:this.map,url:this.locationMarkerUrl||"",size:this.locationMarkerSize}),this.map.addLocationMarker(this._locationMarker))}},{key:"_getValueOrDefault",value:function(t){for(var e,n=arguments.length<=1?0:arguments.length-1,r=0;r<n;r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];if(t[i])return t[i]}return e=(arguments.length<=1?0:arguments.length-1)-1+1,e<1||arguments.length<=e?void 0:arguments[e]}},{key:"_isNaviGroup",value:function(t){if(this._startData&&this._endData)return t==this._startData.groupID||t==this._endData.groupID}},{key:"_createMarker",value:function(t,e){if(t.groupID){var n=t.url?t.url:e?"image/small/marker/nav_location_start.png":"image/small/marker/nav_location_end.png",r=e?this._startMarkerLayer:this._endMarkerLayer,i=e?this._startMarker:this._endMarker,o="number"==typeof t.height?t.height:this.imageMarkerHeight;return r&&i&&r.removeMarker(i),r&&r.groupID==t.groupID||(r=this.map.getFMGroup(t.groupID).getOrCreateLayer("imageMarker")),i=new g({x:t.x,y:t.y,map:this.map,url:n,height:o,size:t.size||64,anchor:t.anchor,callback:function(){t.callback&&t.callback(i)}}),r.addMarker(i),e?(this._startMarker=i,this._startMarkerLayer=r):(this._endMarker=i,this._endMarkerLayer=r),i}}},{key:"_getGroupsPoints",value:function(){for(var t=this._naviResults,e=[],n=null,r=null,i=0;i<t.length;i++){var o=t[i],s=n==o.groupId;0==o.length&&0!=i&&i!=t.length-1||(s||(n=o.groupId,r&&e.push(r),r={groupId:o.groupId,pointList:[]}),r.pointList=r.pointList.concat(o.pointList))}return r&&e.push(r),this._groupsPoints=e,e}},{key:"_addZeroResult",value:function(t){for(var e=0;e<t.length-1;e++){var n,r,i=t[e];i.length&&(n=i.pointList[i.pointList.length-1],r=t[e+1].pointList[0],.2<O.distanceOfTwoPoints(n,r)&&i.pointList.push((0,w.default)({},r)))}}},{key:"_getNaviResult",value:function(t,e){var n;this._startData&&this._endData&&(this._naviResults=this._caculateLines(this._startData,this._endData,this._startData.groupID,this._endData.groupID,t,e),this._addZeroResult(this._naviResults),this._getGroupsPoints(),n=this._naviDescriptionsCalculator.calculate(this._naviResults),this._naviDescriptions=n[0],this._naviDescriptionsData=n[1],this._naviDistance=n[2],this._naviGroupsDistance=n[3],this._naviEntracesDistance[1]=this._calcEntraceDistance(this._naviResults,this._endData,!0),this._endData.url&&!this._endData.noMarker&&this._createMarker(this._endData,!1))}},{key:"_calcEntraceDistance",value:function(t,e,n){if(!this.map||!t||!e.groupID)return null;if(!this.map.getCurrDecodeData().floors[e.groupID])return null;var r,i=this.map.getCurrDecodeData().floors[e.groupID].geo[0].modelLayer,o=this.map.getFMGroup(e.groupID).getLayer("model")._models,s=null;for(r in o){var a,u=o[r];if(u&&u._data&&(s=u._data.vertices),null==s&&(a=i[r-1],s=1===this.map.dataManager.file_ver?N.convertGeo2Geometry(a.geo).vertices:N.convertArray2Geometry(a.idxs,a.pts)),O.pointInPolygonVector2d(s,e,s.length))break}if(!s)return null;for(var l=[],f=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],h=0;h<s.length/2;h++){var c=2*h,p=s[c],d=s[c+1];f[0]>p&&(f[0]=p),f[1]<p&&(f[1]=p),f[2]>d&&(f[2]=d),f[3]<d&&(f[3]=d),l.push({x:p,y:d})}for(var g=[],y=0;y<t.length;y++)if(t[y].groupId==e.groupID){for(var v=[],m=0;m<t[y].pointList.length;m++)v.push(t[y].pointList[m]);g.push(v)}if(n){for(var w=0;w<g.length;w++)g[w].reverse();g.reverse()}for(var _=null,b=null,E=null,x=0;x<g.length;x++){for(var T=g[x],S=!1,k=0;k<T.length-1;k++){var M=T[k],I=T[k+1],A=O.calcLinePolygonCrossPoints2d(M,I,l,f);if(A){b=T,E=k,_=A.crossPoints[k],S=!0;break}}if(S)break}if(!b)return null;for(var L=0,R=0;R<=E;R++){var P=b[R],D=b[R+1];L+=R!=E?O.distanceOfTwoPoints(P,D):O.distanceOfTwoPoints(P,_)}return L}},{key:"_drawLines",value:function(s){var a=this;if(0===s.length)return null;for(var u=new y,t=function(t){var e=s[t],n=e.getPointList();if(0===n.length)return"continue";var r=e.groupId,i=[];n.forEach(function(t){i.push({x:t.x,y:t.y,z:a.lineMarkerHeight})}),n.length<2&&i.push({x:n[0].x,y:n[0].y,z:a.lineMarkerHeight});var o=new f;o.groupId=r,o.points=i,u.passed=a.passed,u.addSegment(o)},e=0;e<s.length;e++)t(e);return this.map.drawLineMark(u,this.lineStyle),this._naviLineMarkers.push(u),u}},{key:"_caculateLines",value:function(t,e,n,r,i,o){if("{}"!=(0,u.default)(this._passingPts)){this._analyser.passPts=this._passingPts,this._analyser.routePassingPoints({x:t.x,y:t.y,groupID:n},{x:e.x,y:e.y,groupID:r});var s=this._analyser.getNaviResults();return this._failedInsertedPts=this._analyser.losedPoints,0==s.length?[]:(this.naviToDoor&&(this._endData.x=this._analyser._endDoor.x,this._endData.y=this._analyser._endDoor.y),s)}if(this._analyser.analyzeNavi(n,t,r,e,i||this.naviMode,o||this.naviPriority)!=c.ROUTE_SUCCESS)return[];var a=this._analyser.getNaviResults();return 0==a.length?[]:(this.naviToDoor&&(this._endData.x=this._analyser._endDoor.x,this._endData.y=this._analyser._endDoor.y),a)}},{key:"_locationMarkerToStartPoint",value:function(){this._startData&&this._locationMarker.setPosition({x:this._startData.x,y:this._startData.y,height:this.locationMarkerHeight,groupID:this._startData.groupID})}},{key:"_moveTo",value:function(t,e,n,r){return this.map._moveTo({x:t.x,y:t.y,time:"number"==typeof e?e:0,groupID:t.groupID,update:n,callback:r},!0)}},{key:"_tiltTo",value:function(t,e,n,r){return this.map.tiltTo({to:t,duration:"number"==typeof e?e:0,update:n,callback:r})}},{key:"_rotateTo",value:function(t,e,n,r){return this.map.rotateTo({to:t,duration:"number"==typeof e?e:0,update:n,callback:r})}},{key:"_scaleTo",value:function(t,e,n,r){return this.map.scaleTo({scale:t,duration:"number"==typeof e?e:0,update:n,callback:r},!0)}},{key:"_focusGroupTo",value:function(t,e,n,r){return this.map.visibleGroupIDs=[t],n&&n(),this.map.focusGroupID==t?(r&&r(),null):this.map.changeFocusToGroup({gid:t,duration:"number"==typeof e?e:0,update:n,callback:function(){r&&r()}})}},{key:"_getRouteAngle",value:function(t,e){var n=new Geo.Vector3(0,1,0),r=new Geo.Vector3(t.x,t.y,0),i=new Geo.Vector3(e.x,e.y,0),o=i.clone().sub(r).normalize(),s=o.angleTo(n)*Geo._Math.RAD2DEG,a=o.cross(n).z<0;return a?360-s:s}},{key:"_getTransformByLength",value:function(t,e){if(0==e)return t[0];for(var n,r,i,o=0,s=0,a=t[0],u=1;u<t.length;u++)if(n=t[u],n.gid==a.gid){if(r=n.clone().sub(a),i=r.length(),o+=i,e<=o){r.normalize();var l=a.clone().add(r.clone().multiplyScalar(e-s));return l.gid=n.gid,l.index=n._index,l}a=n.clone(),a.gid=n.gid,a.index=n._index,s=o}else a=n;var f=t[t.length-1];return f.index=f._index,f}},{key:"_analyse",value:function(){if(!this._startData||!this._endData||!this._naviDescriptionsData||0==this._naviDescriptionsData.length)return[];var r=-1,t=this._naviDescriptionsData.map(function(t,e){var n=new Geo.Vector3(t.startPoint.x,0,t.startPoint.y);return n.gid=t.startGID,n._index=e,r=e,n}),e=this._naviDescriptionsData[this._naviDescriptionsData.length-1],n=new Geo.Vector3(e.endPoint.x,0,e.endPoint.y);return n.gid=e.endGID,n._index=r+1,t.push(n),t}},{key:"_follow",value:function(t,e){var n=this,r=this._simulateParams,i=r.inTime||this.inTime;r.scale=r.scale||this.scale||0;var o,s,a=r.scale<this.minScale?this.minScale:r.scale;this.isMultiGroups||(o={x:this._locationMarker.x,y:this._locationMarker.y,height:this._locationMarker.height,groupID:t.gid},s=this._groupsPoints[this._groupPointsIndex],s&&s.pointList&&0<s.pointList.length&&(o=(0,w.default)(o,s.pointList[0])),this._locationMarker.setPosition(o),this._locationMarker._renderNode.visible=!0),this.changeTiltAngle&&(this._tiltToAnimater=this._tiltTo(this.tiltAngle,i,null,null)),this._moveToAnimater=this._moveTo(e,i,null,function(){n._scaleToAnimater=n._scaleTo(a,i,null,function(){n._changeGrouping=!1})})}},{key:"_gpsAnimate",value:function(t){var e,n,r,i,o,s,a,u,l,f,h,c=this;this._gpsStop||requestAnimationFrame(this._gpsAnimate.bind(this,t)),this._isEnd||(t.cnt++,t.cnt==t.step&&(t.cnt=0,e=this._timer.getDelta(),this._changeGrouping||this._pause||(this._allLen+=this.speed*e,0!=this._allLen&&(n=(0,w.default)({},this._getTransformByLength(t.ps,this._allLen)),r=this._naviDistance-this._allLen,i=n.y,n.y=n.z,n.z=i,n.groupID=n.gid,this._gpsData={distance:0,remain:r,walk:this._allLen,point:n,groupID:n.gid,index:n.index-1},this._toPos=(0,w.default)({},n),!n||r<=this._naviDescriptionsCalculator.tailLen?this._isEnd=!0:(this._preGid||(this._preGid=t.ps[0].gid),this._isSimulating&&(this._preGid!=n.gid&&(this._preGid=n.gid,this._groupPointsIndex++,o={x:n.x,y:n.y,groupID:n.gid},this.followPosition&&(s=this._simulateParams,a=s.inTime||this.inTime,s.scale=s.scale||this.scale||0,u=s.scale<this.minScale?this.minScale:s.scale,this._changeGrouping=!0,this.changeTiltAngle&&(this._tiltToAnimater=this._tiltTo(this.changeGroupTiltAngle,a,null,null)),this._focusGroupToAnimater=this._focusGroupTo(o.groupID,a,null,function(){c._scaleToAnimater=c._scaleTo(u,a,null,function(){c._locationMarker._renderNode.visible=!1,c.locationMarker.setPosition({x:o.x,y:o.y,height:c.locationMarkerHeight,groupID:o.groupID}),c._moveTo(o,a,null,function(){c.changeTiltAngle?c._tiltToAnimater=c._tiltTo(c.tiltAngle,a,null,function(){c._follow(n,o)}):c._follow(n,o)})})})),this.dispatchEvent({type:"crossGroup",groupId:n.gid})),l=d.toSceneCoord(this.map,this._toPos),l.y=0,f=this._locationMarker._renderNode.position.clone(),f.y=0,h=new Geo.Matrix4,h.lookAt(f,l,this._locationMarker._renderNode.up),this._toRot=this.locationMarkerFollowAngle?(new Geo.Quaternion).setFromRotationMatrix(h):null))))))}},{key:"_gps",value:function(){this._gpsStop=!1;var t=this._analyse();this._timer.start(),this._isSimulating=!0,this._isEnd=!1,this._groupPointsIndex=0;var e={step:2,cnt:0,ps:t};this._gpsAnimate(e)}},{key:"_animate",value:function(){if(!this._changeGrouping&&!this._pause){if(this._toPos){var t=new Geo.Vector3(this._locationMarker.x,this._locationMarker.y,0),e=t.lerp(this._toPos,this.followSpeed);e.groupID=this._toPos.gid;var n=O.distanceOfTwoPoints(e,this._toPos);this._locationMarker.setPosition({x:e.x,y:e.y,height:this.locationMarkerHeight,groupID:e.groupID});var r=this.naviConstraint(e);if(this._naviLineMarker.passed)for(var i=0;i<this._naviLineMarker._lineNodes.length;i++)this._naviLineMarker._lineNodes[i].line.material.uniforms.miny.value=1-r.remain/this._naviDistance,this._naviLineMarker._lineNodes[i].line.material.uniforms.pcolor.value=new fm.Color(this._naviLineMarker.passedColor);else for(var o=0;o<this._naviLineMarker._lineNodes.length;o++)this._naviLineMarker._lineNodes[o].line.material.uniforms.miny.value=0;if(this.dispatchEvent((0,w.default)({},this._gpsData,{type:"walking",distance:r.distance,remain:r.remain,walk:this._naviDistance-r.remain,distanceToNext:r.distanceToNext,angle:r.angle,point:r.coord,groupID:e.groupID,index:r.index,isReal:!1})),this.followPosition?(e.groupID=e.gid,this._moveToAnimater=this._moveTo(e)):this.map.updateCountDown_=0,this._isEnd&&n<.5)return this.stop(),void this.dispatchEvent({type:"complete"})}if(this._toRot){if(this._locationMarker._renderNode.quaternion.slerp(this._toRot,this.followSpeed),!this.followAngle)return;var s=new Geo.Vector3(1,0,0),a=s.clone(),u=this._locationMarker._renderNode.matrix.clone();u.setPosition(new Geo.Vector3),a.applyMatrix4(u);var l=a.clone().cross(s),l=l.y<0?-1:1,f=s.angleTo(a),h=Math.PI-f*l;h+=Math.PI,this.map.controls.setUpdate(null,null,null,h)}}}},{key:"_works",value:function(){this._gps(),this._animateFun=this._animate.bind(this),this.map.on("update",this._animateFun)}},{key:"AdaptiveLineOverview",value:function(){for(var t=this.map,e=t.nodeManager._scenes[t._currentSceneId].groups[t.focusGroupID]._lineScene,n=new fm.Vector2,r=new fm.Vector2,i=new fm.Vector2,o=!0,s=0;s<e.children.length;s++)e.children[s].visible&&(o?(r.x=e.children[s].geometry.boundingBox.max.x,r.y=e.children[s].geometry.boundingBox.max.z,i.x=e.children[s].geometry.boundingBox.min.x,i.y=e.children[s].geometry.boundingBox.min.z,o=!1):(r.x<e.children[s].geometry.boundingBox.max.x&&(r.x=e.children[s].geometry.boundingBox.max.x),r.z<e.children[s].geometry.boundingBox.max.z&&(r.z=e.children[s].geometry.boundingBox.max.z),i.x>e.children[s].geometry.boundingBox.min.x&&(i.x=e.children[s].geometry.boundingBox.min.x),i.z>e.children[s].geometry.boundingBox.min.z&&(i.z=e.children[s].geometry.boundingBox.min.z)));n.x=(r.x+i.x)/2+t.center.x,n.y=-(r.x+i.y)/2+t.center.y,t.moveTo(n),t.rotateTo({to:0}),t.nodeManager._scenes[t._currentSceneId].groups[1]._layers.extent[0]._scene.children[5].geometry.computeBoundingBox();var a=t.nodeManager._scenes[t._currentSceneId].groups[1]._layers.extent[0]._scene.children[5].geometry.boundingBox,u=new fm.Vector2(a.max.x-a.min.x,a.max.y-a.min.y),l=u.length(),f=new fm.Vector2(r.x-i.x,r.y-i.y),h=f.length();t.mapScale=564*h/l,t.controls.panAdd({x:0,y:t.groupSpace/2,z:0})}},{key:"naviToDoor",set:function(t){this._analyser.naviToDoor=t},get:function(){return this._analyser.naviToDoor}},{key:"locationMarker",set:function(t){t instanceof v&&(this._locationMarker=t,this.map.addLocationMarker(this._locationMarker))},get:function(){return this._locationMarker||(this._locationMarker=new v({id:"location",map:this.map,url:this.locationMarkerUrl||"",size:this.locationMarkerSize}),this.map.addLocationMarker(this._locationMarker)),this._locationMarker}},{key:"startMarker",set:function(t){this._startMarker=t},get:function(){return this._startMarker}},{key:"endMarker",set:function(t){this._endMarker=t},get:function(){return this._endMarker}},{key:"naviDescriptions",get:function(){return this._naviDescriptions}},{key:"naviDescriptionsData",get:function(){return this._naviDescriptionsData}},{key:"naviDistance",get:function(){return this._naviDistance}},{key:"naviGroupsDistance",get:function(){return this._naviGroupsDistance}},{key:"naviEntrancesDistance",get:function(){return this._naviEntracesDistance}},{key:"nearDist",get:function(){return this._passPtsEpson},set:function(t){this._passPtsEpson=t}},{key:"passingPts",set:function(t){this._passingPts=t},get:function(){return this._passingPts}},{key:"losedPts",get:function(){return this._failedInsertedPts}}]),r}(p),R=L;e.default=R},function(t,e,n){n(5)&&"g"!=/./g.flags&&n(14).f(RegExp.prototype,"flags",{configurable:!0,get:n(66)})},function(t,e,n){t.exports=n(67)("native-function-to-string",Function.toString)},function(t,e,n){t.exports=n(161)},function(t,e,n){n(162),t.exports=n(1).Reflect.construct},function(t,e,n){var r=n(3),u=n(52),l=n(64),f=n(18),h=n(19),i=n(20),c=n(166),p=(n(7).Reflect||{}).construct,d=i(function(){function t(){}return!(p(function(){},[],t)instanceof t)}),g=!i(function(){p(function(){})});r(r.S+r.F*(d||g),"Reflect",{construct:function(t,e,n){l(t),f(e);var r=arguments.length<3?t:l(n);if(g&&!d)return p(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(c.apply(t,i))}var o=r.prototype,s=u(h(o)?o:Object.prototype),a=Function.apply.call(t,s,e);return h(a)?a:s}})},function(t,e,n){var u=n(28),l=n(103),f=n(164);t.exports=function(a){return function(t,e,n){var r,i=u(t),o=l(i.length),s=f(n,o);if(a&&e!=e){for(;s<o;)if(r=i[s++],r!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}},function(t,e,n){var r=n(69),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(7).document;t.exports=r&&r.documentElement},function(t,e,n){"use strict";var o=n(64),s=n(19),a=n(167),u=[].slice,l={},f=function(t,e,n){if(!(e in l)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";l[e]=Function("F,a","return new F("+r.join(",")+")")}return l[e](t,n)};t.exports=Function.bind||function(e){var n=o(this),r=u.call(arguments,1),i=function(){var t=r.concat(u.call(arguments));return this instanceof i?f(n,t.length,t):a(n,t,e)};return s(n.prototype)&&(i.prototype=n.prototype),i}},function(t){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(1),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){"use strict";n(104)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(t,e,n){t.exports=n(171)},function(t,e,n){n(172),t.exports=n(1).Number.isNaN},function(t,e,n){var r=n(3);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var o=n(21),s=n(174).set;t.exports=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&s&&s(t,r),t}},function(t,e,i){var n=i(21),r=i(15),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=i(56)(Function.call,i(73).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var s=n(29),r=n(30),a=n(8),u=n(177),i="["+u+"]",l="​",o=RegExp("^"+i+i+"*"),f=RegExp(i+i+"*$"),h=function(t,e,n){var r={},i=a(function(){return!!u[t]()||l[t]()!=l}),o=r[t]=i?e(c):u[t];n&&(r[n]=o),s(s.P+s.F*i,"String",r)},c=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(f,"")),t};t.exports=h},function(t){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var s=n(14),a=n(15),u=n(110);t.exports=n(5)?Object.defineProperties:function(t,e){a(t);for(var n,r=u(e),i=r.length,o=0;o<i;)s.f(t,n=r[o++],e[n]);return t}},function(t,e,n){var r=n(6).document;t.exports=r&&r.documentElement},function(t,e,n){n(181),t.exports=n(1).Object.assign},function(t,e,n){var r=n(3);r(r.S+r.F,"Object",{assign:n(182)})},function(t,e,n){"use strict";var h=n(13),c=n(43),p=n(78),d=n(60),g=n(32),y=n(102),i=Object.assign;t.exports=!i||n(20)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=i({},t)[n]||Object.keys(i({},e)).join("")!=r})?function(t){for(var e=g(t),n=arguments.length,r=1,i=p.f,o=d.f;r<n;)for(var s,a=y(arguments[r++]),u=i?c(a).concat(i(a)):c(a),l=u.length,f=0;f<l;)s=u[f++],h&&!o.call(a,s)||(e[s]=a[s]);return e}:i},function(t,e,n){var r=n(112),i=n(186);function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=r(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}t.exports=o},function(t,e,n){n(185);var r=n(1).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(3);r(r.S,"Object",{create:n(52)})},function(n,t,e){var r=e(113);function i(t,e){return n.exports=i=r||function(t,e){return t.__proto__=e,t},i(t,e)}n.exports=i},function(t,e,n){n(188),t.exports=n(1).Object.setPrototypeOf},function(t,e,n){var r=n(3);r(r.S,"Object",{setPrototypeOf:n(189).set})},function(t,e,i){var n=i(19),r=i(18),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=i(63)(Function.call,i(114).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,e,n){var r=n(115),i=n(111);function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}t.exports=o},function(t,e,n){n(79),n(120),t.exports=n(81).f("iterator")},function(t,e,n){var u=n(69),l=n(53);t.exports=function(a){return function(t,e){var n,r,i=String(l(t)),o=u(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o),n<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(52),i=n(38),o=n(80),s={};n(27)(s,n(12)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(195),i=n(196),o=n(45),s=n(28);t.exports=n(117)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t){t.exports=function(){}},function(t){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(198),n(202),n(203),n(204),t.exports=n(1).Symbol},function(t,e,n){"use strict";var r=n(7),s=n(23),i=n(13),o=n(3),a=n(118),u=n(199).KEY,l=n(20),f=n(71),h=n(80),c=n(55),p=n(12),d=n(81),g=n(82),y=n(200),v=n(122),m=n(18),w=n(19),_=n(32),b=n(28),E=n(65),x=n(38),T=n(52),S=n(201),k=n(114),M=n(78),I=n(17),A=n(43),L=k.f,R=I.f,P=S.f,D=r.Symbol,O=r.JSON,N=O&&O.stringify,F="prototype",B=p("_hidden"),C=p("toPrimitive"),z={}.propertyIsEnumerable,U=f("symbol-registry"),Y=f("symbols"),V=f("op-symbols"),j=Object[F],G="function"==typeof D&&!!M.f,q=r.QObject,W=!q||!q[F]||!q[F].findChild,H=i&&l(function(){return 7!=T(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=L(j,e);r&&delete j[e],R(t,e,n),r&&t!==j&&R(j,e,r)}:R,Z=function(t){var e=Y[t]=T(D[F]);return e._k=t,e},X=G&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},$=function(t,e,n){return t===j&&$(V,e,n),m(t),e=E(e,!0),m(n),s(Y,e)?(n.enumerable?(s(t,B)&&t[B][e]&&(t[B][e]=!1),n=T(n,{enumerable:x(0,!1)})):(s(t,B)||R(t,B,x(1,{})),t[B][e]=!0),H(t,e,n)):R(t,e,n)},Q=function(t,e){m(t);for(var n,r=y(e=b(e)),i=0,o=r.length;i<o;)$(t,n=r[i++],e[n]);return t},J=function(t,e){return void 0===e?T(t):Q(T(t),e)},K=function(t){var e=z.call(this,t=E(t,!0));return!(this===j&&s(Y,t)&&!s(V,t))&&(!(e||!s(this,t)||!s(Y,t)||s(this,B)&&this[B][t])||e)},tt=function(t,e){if(t=b(t),e=E(e,!0),t!==j||!s(Y,e)||s(V,e)){var n=L(t,e);return!n||!s(Y,e)||s(t,B)&&t[B][e]||(n.enumerable=!0),n}},et=function(t){for(var e,n=P(b(t)),r=[],i=0;n.length>i;)s(Y,e=n[i++])||e==B||e==u||r.push(e);return r},nt=function(t){for(var e,n=t===j,r=P(n?V:b(t)),i=[],o=0;r.length>o;)!s(Y,e=r[o++])||n&&!s(j,e)||i.push(Y[e]);return i};G||(D=function(t){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=c(0<arguments.length?t:void 0),n=function(t){this===j&&n.call(V,t),s(this,B)&&s(this[B],e)&&(this[B][e]=!1),H(this,e,x(1,t))};return i&&W&&H(j,e,{configurable:!0,set:n}),Z(e)},a(D[F],"toString",function(){return this._k}),k.f=tt,I.f=$,n(123).f=S.f=et,n(60).f=K,M.f=nt,i&&!n(54)&&a(j,"propertyIsEnumerable",K,!0),d.f=function(t){return Z(p(t))}),o(o.G+o.W+o.F*!G,{Symbol:D});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;rt.length>it;)p(rt[it++]);for(var ot=A(p.store),st=0;ot.length>st;)g(ot[st++]);o(o.S+o.F*!G,"Symbol",{for:function(t){return s(U,t+="")?U[t]:U[t]=D(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!G,"Object",{create:J,defineProperty:$,defineProperties:Q,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var at=l(function(){M.f(1)});o(o.S+o.F*at,"Object",{getOwnPropertySymbols:function(t){return M.f(_(t))}}),O&&o(o.S+o.F*(!G||l(function(){var t=D();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!X(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,N.apply(O,r)}}),D[F][C]||n(27)(D[F],C,D[F].valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(55)("meta"),i=n(19),o=n(23),s=n(17).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(20)(function(){return u(Object.preventExtensions({}))}),f=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[r].i},c=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[r].w},p=function(t){return l&&d.NEED&&u(t)&&!o(t,r)&&f(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:c,onFreeze:p}},function(t,e,n){var a=n(43),u=n(78),l=n(60);t.exports=function(t){var e=a(t),n=u.f;if(n)for(var r,i=n(t),o=l.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e}},function(t,e,n){var r=n(28),i=n(123).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):i(r(t))}},function(){},function(t,e,n){n(82)("asyncIterator")},function(t,e,n){n(82)("observable")},function(e,t,n){var r=n(206),i=n(113);function o(t){return e.exports=o=i?r:function(t){return t.__proto__||r(t)},o(t)}e.exports=o},function(t,e,n){t.exports=n(207)},function(t,e,n){n(208),t.exports=n(1).Object.getPrototypeOf},function(t,e,n){var r=n(32),i=n(119);n(124)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n(210));n(44);var s=r(n(61)),o=r(n(31)),u=r(n(10)),l=r(n(11)),f=r(n(216)),h=r(n(217)),c=r(n(218)),p=function(){function e(t){(0,u.default)(this,e),this.directionAssert=10,this.combineAsset=5,this.naviLanguage=h.default.ZH,this.completeDistance=0,this.map=null,this.combinePoints=[],this.dirArr=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.dirArr2=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.dirArr3=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this._boo=!1,this._tailLen=0,(0,o.default)(this,t)}return(0,l.default)(e,[{key:"dispose",value:function(){this.map=null}},{key:"calculate",value:function(t){return this._calculate(t)}},{key:"_getNs",value:function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]._nodeList);return e}},{key:"_getField",value:function(t,e){var n=Math.PI/4,r=t/n,i=(0,s.default)(r),o=r%1*n;return i%2==0?e<o&&(i+=1):n-e<=o&&(i+=1),i}},{key:"_getAngle",value:function(t,e){var n=e.angleTo(t),r=new Geo.Vector3(e.x,e.z,e.y).cross(new Geo.Vector3(t.x,t.z,t.y));return r.z<0&&(n=2*Math.PI-n),n}},{key:"_getDirection",value:function(t,e){if(e==t.length-1)return{index:t[t.length-1].index};var n=new Geo.Vector3(0,0,1),r=n;0!=e&&(r=t[e].clone().sub(t[e-1]).normalize(),r.y=0,r.z*=-1);var i=t[e+1].clone().sub(t[e]);i.y=0;var o=i.length(),s=i.normalize();s.z*=-1;var a=this._getField(this._getAngle(n,s),22.5*Geo._Math.DEG2RAD),u=this._getAngle(r,s),l=this._getField(u,this.directionAssert*Geo._Math.DEG2RAD);return{relField:l,relDesc:this._getDescribeWord(this.dirArr2[l]),relAngle:u*Geo._Math.RAD2DEG,absField:a,absDesc:this._getDescribeWord(this.dirArr[a]),distance:o,index:t[e].index}}},{key:"_regularPoints",value:function(t,e){for(var r=this,n=t.map(function(t,e){var n=r.map?c.default.toSceneCoord(r.map,t):c.default.toSceneCoord({center:{x:r.analyser.sceneData.scene.x,y:r.analyser.sceneData.scene.y}},t);return n.index=e,n}),i=[],o=0;o<n.length;o++){var s=this._getDirection(n,o);s.point=t[o],s.groupID=e,i.push(s)}for(var a=[i[0]],u=1;u<i.length;u++)i[u].relAngle<=this.combineAsset||360-i[u].relAngle<=this.combineAsset?a[a.length-1].distance+=i[u].distance:a.push(i[u]);return a}},{key:"_getGroupDes",value:function(t){var e,n="";return null!=this.map.getFMGroup(t)&&(e=this.map.getFMGroup(t),n=this.naviLanguage==h.default.ZH?e._groupMessage.desc:e._groupMessage.gname.toUpperCase()),n}},{key:"_getDesc",value:function(t,e,n,r,i){var o,s,a,u=t[e],l=t[e+1],f=this._getDescribeWord(this.dirArr3[l.relField]);return this._boo=e==t.length-3&&l.distance<this.completeDistance,f&&!this._boo||(r?(this._boo=!1,f||(o=this._getLadderType(t[e+1].point,n,i),s=n<r?this._getDescribeWord("up_to"):this._getDescribeWord("down_to"),a=this._getGroupDes(r),f=this._getDescribeWord("take")+o+" "+s+" "+a)):(this._boo&&(this._tailLen=l.distance),f=this._getDescribeWord("arrived"))),0==e?2==t.length?this._getDescribeWord("face_to")+" "+u.absDesc+" "+this._getDescribeWord("straight")+" "+Math.ceil(u.distance)+" "+this._getDescribeWord("meter")+" "+f:this._getDescribeWord("face_to")+" "+u.absDesc+" "+this._getDescribeWord("straight")+" "+Math.ceil(u.distance)+" "+this._getDescribeWord("meter")+" "+this._getDescribeWord(this.dirArr3[t[e+1].relField]):this._getDescribeWord("straight")+" "+Math.ceil(u.distance+(this._boo&&!r?l.distance:0))+" "+this._getDescribeWord("meter")+" "+f}},{key:"_getDescData",value:function(t,e,n,r){var i,o=t[e],s=t[e+1],a=this._getDescribeWord(this.dirArr3[t[e+1].relField]);return a&&!this._boo||(r?(i=n<r?this._getDescribeWord("up"):this._getDescribeWord("down"),this._getGroupDes(r),s.relDesc=i):s.relDesc="终"),{startPoint:o.point,startGID:o.groupID,startIndex:o.index,endPoint:s.point,endGID:s.groupID,endIndex:s.index,startDirection:o.absDesc,endDirection:s.relDesc,distance:o.distance+(this._boo&&!r?s.distance:0)}}},{key:"_getLadderType",value:function(t,e,n){t.z=this.map.getFMGroup(e).height;for(var r,i=a.default,o=-1,s=0;s<n.length;s++)n[s]&&(r=Math.pow(n[s].point.x-t.x,2)+Math.pow(n[s].point.y-t.y,2),r<i&&(i=r,o=n[s].liftType));if(-1!=o)switch(o){case 2:return" "+this._getDescribeWord("stair_pure");case 3:return" "+this._getDescribeWord("escalator_pure");case 1:return" "+this._getDescribeWord("lift_pure")}return this._getDescribeWord("stair")}},{key:"_getDescribeWord",value:function(t){var e=f.default[this.naviLanguage][t];return e||""}},{key:"_calculate",value:function(t){this.combinePoints=[];for(var e=[],n=[],r=null,i=null,o=null,s=null,a=0,u=[],l=!1,f=null,h=null,c=this._getNs(t),p=0;p<t.length;p++){if(o=t[p],r=o.groupId,i=null,p<t.length-1)for(var d=p;d<t.length;d++)if(t[d].groupId!=r){i=t[d].groupId;break}s=o.pointList;var g,y,v,m=this._regularPoints(s,r);if(1<m.length&&(this.combinePoints=this.combinePoints.concat(m)),1==m.length)(i||l)&&(l?n.length&&(p==t.length-1&&(e[e.length-1]+=" "+this._getDescribeWord("arrived"),n[n.length-1].endDirection=this._getDescribeWord("end")),n[n.length-1].endPoint=s[0],n[n.length-1].endGID=r):f!=r&&null!=f||(g=r<i?this._getDescribeWord("up_to"):this._getDescribeWord("down_to"),y=this._getGroupDes(i),h=this._getDescribeWord("take_stair")+" "+g+" "+y,e.push(h),n.push({startPoint:s[0],startDirection:r<i?this._getDescribeWord("up"):this._getDescribeWord("down"),startGID:r})),l=!l);else{f=r;for(var w=0;w<m.length-1&&!this._boo;w++)e.push(this._getDesc(m,w,r,i,c)),n.push(this._getDescData(m,w,r,i))}1<m.length&&(v=m.reduce(function(t,e){return t+(e.distance||0)},0),u.push({groupID:r,distance:v}),a+=v)}return[e,n,a,u]}},{key:"tailLen",get:function(){return this._tailLen}}]),e}(),d=p;e.default=d},function(t,e,n){t.exports=n(211)},function(t,e,n){n(212),t.exports=9007199254740991},function(t,e,n){var r=n(3);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){n(214),t.exports=n(1).parseInt},function(t,e,n){var r=n(3),i=n(215);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(7).parseInt,i=n(125).trim,o=n(83),s=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i={zh:{straight:"直行",still_go_straight:"继续直行",back_to:"后退",turn_right:"右转",turn_left:"左转",right_front:"右前方 继续直行",left_front:"左前方 继续直行",turn_right_rear:"右后方转",turn_left_rear:"左后方转",up:"上",down:"下",up_to:"上行到达",down_to:"下行到达",meter:"米",arrived:"到达目的地",front:"前方",stair:"楼梯",stair_pure:"楼梯",escalator_pure:"扶梯",lift_pure:"直梯",take:"乘",take_stair:"乘梯",front_pure:"前",right_front_pure:"右前",right_pure:"右",right_back_pure:"右后",back_pure:"后",left_back_pure:"左后",left_pure:"左",left_front_pure:"左前",east:"东",west:"西",south:"南",north:"北",southeast:"东南",northeast:"东北",southwest:"西南",northwest:"西北",face_to:"向",start:"起",end:"终"},en:{straight:"go straight",still_go_straight:"go straight",back_to:"back to",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",meter:"meter",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",take:"take",take_stair:"take stair",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",end:"end"}};e.default=i},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i={ZH:"zh",EN:"en",CHN:"zh"},o=i;e.default=o},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(61));n(84);var s=r(n(10)),a=r(n(11)),u=function(){function t(){(0,s.default)(this,t)}return(0,a.default)(t,null,[{key:"toColor",value:function(t){if("number"==typeof t)return t;var e=t.split(",");return 3<=e.length?(0,o.default)(e[0])<<16|(0,o.default)(e[1])<<8|(0,o.default)(e[2]):(console.error("color format error",t),0)}},{key:"toRgba",value:function(t){if("number"==typeof t)return"rgba("+(0,o.default)(255*new fm.Color(t).r)+","+(0,o.default)(255*new fm.Color(t).g)+","+(0,o.default)(255*new fm.Color(t).b)+",1)";var e=t.split(",");return 3<=e.length?"rgba("+(0,o.default)(e[0])+","+(0,o.default)(e[1])+","+(0,o.default)(e[2])+",1)":t}},{key:"bindEvent",value:function(t,o,e,s){t.addEventListener(e,function(t){var e,n=t||window.event,r=n.target||n.srcElement,i=n.currentTarget;for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;0<=--n&&e.item(n)!==this;);return-1<n});r!==i;)r.matches(o)&&(e=r,s.call(e,n)),r=r.parentNode})}},{key:"toSceneCoord",value:function(t,e){var n=0;return e.groupID&&(n=t.getFMGroup(e.groupID).height),new fm.Vector3(e.x-t.center.x,t.center.y+n,-e.y+t.center.y)}},{key:"removeFormArray",value:function(t,e){var n=t.indexOf(e);-1<n&&t.splice(n,1)}},{key:"scrollTopAnFun",value:function(){var g,y=!1;return function e(n){var r=n.el,i=n.to,t=n.form,o=(n.time,i<t?"up":"bottom"),s=t<i?i-t:i==t?0:t-i,a=10,u=s/a,l=0,f=function(t){var e=t.val,n=t.nbak,r=t.n,i=t.elTop;return"up"==o?i+(n-r)*e:i-(n-r)*e};function h(){g=0,window.setTimeout(function(){var t=Object(n,{to:r.scrollTop});y=!1,e(t)},a+1)}var c=function(){y=!1,g=!1,0==t&&(r.scrollTop=0)},p=function t(){var e;g--,g<=0?c():(e=function(){!1!==g&&(l=f({val:a,nbak:u,n:g,elTop:i,VDIRECTIONE:o}),l&&(r.scrollTop=l),t())},window.setTimeout(e,a))};function d(){y?h():(y=!0,g=u,p())}d()}}},{key:"toVector",value:function(t){return t.hasOwnProperty("z")?new fm.Vector3(t.x,t.y,t.z):new fm.Vector2(t.x,t.y)}},{key:"sleep",value:function(t){for(var e=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-e>t);n++);}}]),t}(),l=u;e.default=l},function(t,e,n){var r=n(21),i=n(42),o=n(4)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var u=n(25),l=n(30);t.exports=function(a){return function(t,e){var n,r,i=String(l(t)),o=u(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o),n<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(85);n(29)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var u,o=r(n(10)),s=r(n(11)),l=r(n(57)),f=r(n(130)),a=r(n(131)),h=r(n(226)),c=r(n(133)),p=n(270);function d(n,r){var t,e,i=this,o=null,s=this.MapOptions.mapServerURL,a="GET";"fengmap"===this.MapOptions.mapServerURL&&(s=c.default+"sdk/auth/downMaps",this.MapOptions.tile&&(s=c.default+"sdk/authLayered/downMaps"),t=f.default.getCerityData(this.MapOptions.key,this.MapOptions.appName,n),e={mapId:t.mapId,keyValue:t.appKey,appName:t.appName,webUrl:t.webURL,keyType:3,isSeparate:!1},o=(0,l.default)(e),a="POST"),this.fmServer.getScene(s,n,this.MapOptions.tile,o,a,function(t){i.dataManager.putRawScene(t,n);var e=i.dataManager.parseScene(n,i.MapOptions.tile,i.MapOptions.license);e&&(i.dataManager.putDecodeScene(e,n),r(e))},function(t){u&&u(t)}),this._currentSceneId=n}var g=function(){function e(t){(0,o.default)(this,e),this.MapOptions=t,this.fmServer=new a.default,this.dataManager=new h.default}return(0,s.default)(e,[{key:"openMap",value:function(t,e){var n,r,i=this.MapOptions.mapID;function o(){"fengmap"===r.MapOptions.mapServerURL?f.default.checkIsOnLine(function(){f.default.checkOnLine(r.MapOptions.key,r.MapOptions.appName,i,function(){d.call(r,i,t)},function(t){t?(console.warn(t.error_code,t.error_message),e&&e({msg:"线上验证失败!",data:t})):(console.warn("offLine 2"),d.call(r,i))},"POST")},function(){console.warn("offLine 1"),d.call(r,i,t)},1e3):d.call(r,i,t)}function s(){d.call(r,i)}u=e,i?this.MapOptions.key?(n=/^[a-zA-z\d]{32}$/,n.test(this.MapOptions.key)?this.MapOptions.appName?(this._zopStep_=1,r=this,this.MapOptions.useCompatibleOnLineCheck?this.isOnLine(o,s):(navigator.onLine?o:s)()):console.warn(decodeURIComponent(p.cerityMessage.warn_noappname)):console.warn(decodeURIComponent(p.cerityMessage.warn_keynotright))):console.warn(decodeURIComponent(p.cerityMessage.warn_nokey)):console.warn(decodeURIComponent(p.cerityMessage.warn_nomapid))}}]),e}(),y=g;e.default=y},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0,n(39),n(41);var o,s,d,g,y,v,m,w,_,b,E,a=r(n(61)),u=(o=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],s=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],d=0,g=0,y=[2,0,0,0],v=function(t,e){for(var n=0,r=0,i=0,r=0;r<8;r++)1&e&&(n^=t),i=128&t,t<<=1,i&&(t^=27),e>>=1;return n},m=function(t,e,n){for(var r=0;r<4;r++)t[0+r]^=e[16*n+4*r],t[4+r]^=e[16*n+4*r+1],t[8+r]^=e[16*n+4*r+2],t[12+r]^=e[16*n+4*r+3]},w=function(t){for(var e,n,r,i=1;i<4;i++)for(n=0;n<i;){for(r=t[4*i+4-1],e=3;0<e;e--)t[4*i+e]=t[4*i+e-1];t[4*i+0]=r,n++}},_=function(t){for(var e,n,r,i=0;i<4;i++)for(e=0;e<4;e++)n=(240&t[4*i+e])>>4,r=15&t[4*i+e],t[4*i+e]=s[16*n+r]},b=function(t){for(var e=0;e<4;e++)t[e]=o[16*((240&t[e])>>4)+(15&t[e])]},E=function(t){return(0,a.default)(t,16)},{decryption:function(t,e){for(var n=Array(16),r=0;r<16;r++)n[r]=16*E(e.substr(2*r,1))+E(e.substr(2*r+1,1));for(var i=Array(16),r=0;r<16;r++)i[r]=16*E(t.substr(2*r,1))+E(t.substr(2*r+1,1));var o=Array(16);switch(r=[],n.length){default:case 16:d=4,g=10;break;case 24:d=6,g=12;break;case 32:d=8,g=14}for(var s=r=Array(16*(g+1)),a=Array(4),u=4*(g+1),l=0;l<d;l++)s[4*l+0]=n[4*l+0],s[4*l+1]=n[4*l+1],s[4*l+2]=n[4*l+2],s[4*l+3]=n[4*l+3];for(l=d;l<u;l++){if(a[0]=s[4*(l-1)+0],a[1]=s[4*(l-1)+1],a[2]=s[4*(l-1)+2],a[3]=s[4*(l-1)+3],0==l%d){for(var n=a,f=void 0,h=void 0,f=n[0],h=0;h<3;h++)n[h]=n[h+1];if(n[3]=f,b(a),n=l/d,1==n)y[0]=1;else if(1<n)for(y[0]=2,n--;0<n-1;)y[0]=v(y[0],2),n--;n=a,f=y,h=a,h[0]=n[0]^f[0],h[1]=n[1]^f[1],h[2]=n[2]^f[2],h[3]=n[3]^f[3]}else 6<d&&4==l%d&&b(a);s[4*l+0]=s[4*(l-d)+0]^a[0],s[4*l+1]=s[4*(l-d)+1]^a[1],s[4*l+2]=s[4*(l-d)+2]^a[2],s[4*l+3]=s[4*(l-d)+3]^a[3]}for(s=Array(16),a=0;a<4;a++)for(l=0;l<4;l++)s[4*a+l]=i[a+4*l];for(m(s,r,g),i=g-1;1<=i;i--)for(w(s),_(s),m(s,r,i),a=s,l=[14,9,13,11],u=h=void 0,n=Array(4),f=Array(4),u=0;u<4;u++){for(h=0;h<4;h++)n[h]=a[4*h+u];var h=l,c=n,p=f;for(p[0]=v(h[0],c[0])^v(h[3],c[1])^v(h[2],c[2])^v(h[1],c[3]),p[1]=v(h[1],c[0])^v(h[0],c[1])^v(h[3],c[2])^v(h[2],c[3]),p[2]=v(h[2],c[0])^v(h[1],c[1])^v(h[0],c[2])^v(h[3],c[3]),p[3]=v(h[3],c[0])^v(h[2],c[1])^v(h[1],c[2])^v(h[0],c[3]),h=0;h<4;h++)a[4*h+u]=f[h]}for(w(s),_(s),m(s,r,0),a=0;a<4;a++)for(l=0;l<4;l++)o[a+4*l]=s[4*a+l];for(i="",r=0;r<16;++r)s=o[r].toString(16),s.length<2&&(s="0"+s),i+=s;return i}}),l=u;e.default=l},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i,o=(i=function(t){return T(t)},{encryption:function(t){return i(t)}});function h(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function s(t,e){return t<<e|t>>>32-e}function a(t,e,n,r,i,o){return h(s(h(h(e,t),h(r,o)),i),n)}function c(t,e,n,r,i,o,s){return a(e&n|~e&r,t,e,i,o,s)}function p(t,e,n,r,i,o,s){return a(e&r|n&~r,t,e,i,o,s)}function d(t,e,n,r,i,o,s){return a(e^n^r,t,e,i,o,s)}function g(t,e,n,r,i,o,s){return a(n^(e|~r),t,e,i,o,s)}function u(t,e){var n,r,i,o;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var s=1732584193,a=-271733879,u=-1732584194,l=271733878,f=0;f<t.length;f+=16)n=s,r=a,i=u,o=l,s=c(s,a,u,l,t[f],7,-680876936),l=c(l,s,a,u,t[f+1],12,-389564586),u=c(u,l,s,a,t[f+2],17,606105819),a=c(a,u,l,s,t[f+3],22,-1044525330),s=c(s,a,u,l,t[f+4],7,-176418897),l=c(l,s,a,u,t[f+5],12,1200080426),u=c(u,l,s,a,t[f+6],17,-1473231341),a=c(a,u,l,s,t[f+7],22,-45705983),s=c(s,a,u,l,t[f+8],7,1770035416),l=c(l,s,a,u,t[f+9],12,-1958414417),u=c(u,l,s,a,t[f+10],17,-42063),a=c(a,u,l,s,t[f+11],22,-1990404162),s=c(s,a,u,l,t[f+12],7,1804603682),l=c(l,s,a,u,t[f+13],12,-40341101),u=c(u,l,s,a,t[f+14],17,-1502002290),a=c(a,u,l,s,t[f+15],22,1236535329),s=p(s,a,u,l,t[f+1],5,-165796510),l=p(l,s,a,u,t[f+6],9,-1069501632),u=p(u,l,s,a,t[f+11],14,643717713),a=p(a,u,l,s,t[f],20,-373897302),s=p(s,a,u,l,t[f+5],5,-701558691),l=p(l,s,a,u,t[f+10],9,38016083),u=p(u,l,s,a,t[f+15],14,-660478335),a=p(a,u,l,s,t[f+4],20,-405537848),s=p(s,a,u,l,t[f+9],5,568446438),l=p(l,s,a,u,t[f+14],9,-1019803690),u=p(u,l,s,a,t[f+3],14,-187363961),a=p(a,u,l,s,t[f+8],20,1163531501),s=p(s,a,u,l,t[f+13],5,-1444681467),l=p(l,s,a,u,t[f+2],9,-51403784),u=p(u,l,s,a,t[f+7],14,1735328473),a=p(a,u,l,s,t[f+12],20,-1926607734),s=d(s,a,u,l,t[f+5],4,-378558),l=d(l,s,a,u,t[f+8],11,-2022574463),u=d(u,l,s,a,t[f+11],16,1839030562),a=d(a,u,l,s,t[f+14],23,-35309556),s=d(s,a,u,l,t[f+1],4,-1530992060),l=d(l,s,a,u,t[f+4],11,1272893353),u=d(u,l,s,a,t[f+7],16,-155497632),a=d(a,u,l,s,t[f+10],23,-1094730640),s=d(s,a,u,l,t[f+13],4,681279174),l=d(l,s,a,u,t[f],11,-358537222),u=d(u,l,s,a,t[f+3],16,-722521979),a=d(a,u,l,s,t[f+6],23,76029189),s=d(s,a,u,l,t[f+9],4,-640364487),l=d(l,s,a,u,t[f+12],11,-421815835),u=d(u,l,s,a,t[f+15],16,530742520),a=d(a,u,l,s,t[f+2],23,-995338651),s=g(s,a,u,l,t[f],6,-198630844),l=g(l,s,a,u,t[f+7],10,1126891415),u=g(u,l,s,a,t[f+14],15,-1416354905),a=g(a,u,l,s,t[f+5],21,-57434055),s=g(s,a,u,l,t[f+12],6,1700485571),l=g(l,s,a,u,t[f+3],10,-1894986606),u=g(u,l,s,a,t[f+10],15,-1051523),a=g(a,u,l,s,t[f+1],21,-2054922799),s=g(s,a,u,l,t[f+8],6,1873313359),l=g(l,s,a,u,t[f+15],10,-30611744),u=g(u,l,s,a,t[f+6],15,-1560198380),a=g(a,u,l,s,t[f+13],21,1309151649),s=g(s,a,u,l,t[f+4],6,-145523070),l=g(l,s,a,u,t[f+11],10,-1120210379),u=g(u,l,s,a,t[f+2],15,718787259),a=g(a,u,l,s,t[f+9],21,-343485551),s=h(s,n),a=h(a,r),u=h(u,i),l=h(l,o);return[s,a,u,l]}function l(t){for(var e="",n=32*t.length,r=0;r<n;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}function f(t){var e=[];for(e[(t.length>>2)-1]=void 0,r=0;r<e.length;r+=1)e[r]=0;for(var n=8*t.length,r=0;r<n;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}function y(t){return l(u(f(t),8*t.length))}function v(t,e){var n,r,i=f(t),o=[],s=[];for(o[15]=s[15]=void 0,16<i.length&&(i=u(i,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],s[n]=1549556828^i[n];return r=u(o.concat(f(e)),512+8*e.length),l(u(s.concat(r),640))}function m(t){for(var e,n="0123456789abcdef",r="",i=0;i<t.length;i+=1)e=t.charCodeAt(i),r+=n.charAt(e>>>4&15)+n.charAt(15&e);return r}function w(t){return unescape(encodeURIComponent(t))}function _(t){return y(w(t))}function b(t){return m(_(t))}function E(t,e){return v(w(t),w(e))}function x(t,e){return m(E(t,e))}function T(t,e,n){return e?(n?E:x)(e,t):(n?_:b)(t)}var S=o;e.default=S},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(10)),s=r(n(11)),a=function(){function t(){(0,o.default)(this,t),this.requestMethod="GET",this._requestHeader={},this.sendData=null}return(0,s.default)(t,[{key:"getFile",value:function(t,e,n,r,i){void 0!==this._path&&(t=this._path+t);var o,s=new XMLHttpRequest;for(o in s.open(this.requestMethod,t,!0),s.addEventListener("load",function(){var t=this.response;200===this.status||0===this.status||201===this.status?(0===this.status&&console.warn("FMMap FileLoader: HTTP Status 0 received."),e(t)):n(t)},!1),s.addEventListener("progress",function(){r&&r()},!1),s.addEventListener("error",function(){n()},!1),s.addEventListener("abort",function(){i&&i()},!1),void 0!==this._responseType&&(s.responseType=this._responseType),void 0!==this._withCredentials&&(s.withCredentials=this._withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this._mimeType?this._mimeType:"text/plain"),this._requestHeader)s.setRequestHeader(o,this._requestHeader[o]);s.send(this.sendData)}},{key:"setPath",value:function(t){return this._path=t,this}},{key:"setResponseType",value:function(t){return this._responseType=t,this}},{key:"setWithCredentials",value:function(t){return this._withCredentials=t,this}},{key:"setMimeType",value:function(t){return this._mimeType=t,this}},{key:"setRequestHeader",value:function(t){return t&&(this._requestHeader=t),this}}]),t}(),u=a;e.default=u},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0,n(44),n(106);var o=r(n(10)),s=r(n(11)),a=r(n(227)),u=r(n(268)),l=r(n(269)),f=function(){function t(){(0,o.default)(this,t),this._sceneRawData={},this._sceneDecodeData={},this._reader=new a.default,this.file_ver=1}return(0,s.default)(t,[{key:"putRawScene",value:function(t,e){this.sceneRawData[e+""]=t}},{key:"removeRawScene",value:function(t){this.sceneRawData[t+""]=void 0}},{key:"parseScene",value:function(t,e,n){var r=e?this._reader.sceneDecode(this.sceneRawData[t+""],n,t):this._reader.mapDecode(this.sceneRawData[t+""],n,t);if(r){e&&(r={scene:r,floors:[]});for(var i=r.scene.layerGroups,o=0;o<i.length;o++){var s=i[o];s.elevation=s.height}return r}}},{key:"parseFloor",value:function(t,e,n){var r=this._reader.floorGeoDecode(t),i=this._reader.floorBizDecode(e),o=this._reader.floorNaviDecode(n);return[r,i,o]}},{key:"isSceneHasZone",value:function(t){if(!t)return!1;var e=this._sceneDecodeData[t+""];if(!e)return!1;var n=!1;return e.floors.forEach(function(t){0<t.navi[0].naviZones.length&&(n=!0)}),n}},{key:"putDecodeScene",value:function(t,e){this.file_ver=t.scene.file_ver,this.sceneDecodeData[e+""]=t}},{key:"removeDecodeScene",value:function(t){this.sceneDecodeData[t+""]=void 0}},{key:"getRawScene",value:function(t){return this.sceneRawData[t+""]}},{key:"getDecodeScene",value:function(t){return this.sceneDecodeData[t+""]}},{key:"dispose",value:function(){for(var t in this._reader.dispose(),this.sceneRawData)this.sceneRawData[t]=void 0;for(var e in this.sceneDecodeData)this.sceneDecodeData[e]=void 0;this.sceneRawData=void 0,this.sceneDecodeData=void 0}},{key:"disposeById",value:function(t){this.sceneRawData[t]=void 0,this.sceneDecodeData[t]=void 0}},{key:"sceneRawData",get:function(){return this._sceneRawData},set:function(t){this._sceneRawData=t}},{key:"sceneDecodeData",get:function(){return this._sceneDecodeData},set:function(t){this._sceneDecodeData=t}}],[{key:"convertGeo2Geometry",value:function(t){var e=(new u.default).parse(t),n={vertices:e.toStrip(!0)};return e.hasHoles()&&(n.holes=e.toStripHoles(!0)),n}},{key:"convertArr2Geometry",value:function(t,e){for(var n=t[0].idxs[0],r=[],i=0;i<n-2;i+=2)r.push(e[i]),r.push(e[i+1]);var o={vertices:r};if(1<t.length){for(var s=[],a=1;a<t.length;a++){for(var u=t[a-1],l=t[a],f=[],h=u;h<l-2;h+=2)f.push(e[h]),f.push(e[h+1]);s.push(f)}o.holes=s}return o}},{key:"convertArray2Geometry",value:function(t,e){var n=(new l.default).parseGeometry(t,e),r={vertices:n.toStrip(!0)};return n.hasHoles()&&(r.holes=n.toStripHoles(!0)),r}},{key:"convertGeo2Points",value:function(t){var e=(new u.default).parse(t),n={vertices:e.points};return n}},{key:"convertArrayPoints",value:function(t,e){var n=(new l.default).parse(t,e),r={vertices:n.points};return r}},{key:"checkClockwise",value:function(t){for(var e=Number.NEGATIVE_INFINITY,n=0,r=0,i=0,o=0;o<t.length;o+=2)t[o]>e&&(e=t[o],n=o);var s=new fm.Vector3(t[n],t[n+1],0),r=0===n?t.length-2:n-2,i=n===t.length-2?0:n+2,a=new fm.Vector3(t[r],t[r+1],0),u=new fm.Vector3(t[i],t[i+1],0),l=(new fm.Vector3).copy(s).sub(a),f=(new fm.Vector3).copy(u).sub(s),h=l.cross(f);return 0<h.z}}]),t}(),h=f;e.default=h},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var u=r(n(228)),l=r(n(135)),f=r(n(116)),h=r(n(121)),o=r(n(234));n(136),n(39),n(41);var s=r(n(10)),a=r(n(11)),_=r(n(241)),b=r(n(266)),E=r(n(267)),x=r(n(130));function c(t,e){var n;if(void 0===h.default||null==t[f.default]){if((0,l.default)(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=(0,u.default)(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function p(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?(0,o.default)(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g=function(){function t(){(0,s.default)(this,t)}return(0,a.default)(t,[{key:"mapDecode",value:function(t,e,n){var r=_.default.build("Map").decode(t),i="%E8%AF%B7%E8%BE%93%E5%85%A5%E6%AD%A3%E7%A1%AE%E7%9A%84license.";if(x.default.ls&&!x.default.checkLicense(r.key,e,n))return console.warn(decodeURIComponent(i)),null;for(var o={scene:null,floors:[]},s=0,a=r.buffers.length;s<a;s++){var u,l,f,h,c,p,d,g=r.buffers[s],y=g.len,v=g.data.offset,m=g.data.offset+y.low,w=g.data.buffer;1==g.btype?(u=E.default.build("Scene").decode(w.slice(v,m)),o.scene=u):(l=g.gid,f=this.containsFloor(l,o.floors),h=f.floor,f.index<0&&(h.gid=l,h.biz=[],h.navi=[],h.geo=[]),2==g.btype&&(c=b.default.build("FloorGeo").decode(w.slice(v,m)),h.geo.push(c)),3==g.btype&&(p=b.default.build("FloorBiz").decode(w.slice(v,m)),h.biz.push(p)),4==g.btype&&(d=b.default.build("FloorNavi").decode(w.slice(v,m)),h.navi.push(d)),f.index<0?o.floors.push(h):o.floors[f.index]=h)}return o}},{key:"containsFloor",value:function(t,e){for(var n=0,r=e.length;n<r;n++)if(e[n].gid==t)return{index:n,floor:e[n]};return{index:-1,floor:{}}}},{key:"sceneDecode",value:function(t,e,n){var r=E.default.build("Scene").decode(t),i="%E8%AF%B7%E8%BE%93%E5%85%A5%E6%AD%A3%E7%A1%AE%E7%9A%84license.";return x.default.ls&&!x.default.checkLicense(r.key,e,n)?(console.warn(decodeURIComponent(i)),null):r}},{key:"floorGeoDecode",value:function(t){var e=b.default.build("FloorGeo").decode(t);return e}},{key:"floorBizDecode",value:function(t){var e=b.default.build("FloorBiz").decode(t);return e}},{key:"floorNaviDecode",value:function(t){var e=b.default.build("FloorNavi").decode(t);return e}},{key:"disposeRoot",value:function(t){var e,n=t.ns,r=c(n.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.builder=void 0,i.parent=void 0,i.children.length=0,i._fields.length=0,i._fieldsById=void 0,i._fieldsByName=void 0}}catch(t){r.e(t)}finally{r.f()}n.children.length=0,t.ns=void 0,t.ptr=void 0}},{key:"dispose",value:function(){}}]),t}(),y=g;e.default=y},function(t,e,n){t.exports=n(229)},function(t,e,n){n(120),n(79),t.exports=n(230)},function(t,e,n){var r=n(18),i=n(134);t.exports=n(1).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var i=n(68),o=n(12)("toStringTag"),s="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){n(233),t.exports=n(1).Array.isArray},function(t,e,n){var r=n(3);r(r.S,"Array",{isArray:n(122)})},function(t,e,n){t.exports=n(235)},function(t,e,n){n(79),n(236),t.exports=n(1).Array.from},function(t,e,n){"use strict";var d=n(63),r=n(3),g=n(32),y=n(237),v=n(238),m=n(103),w=n(239),_=n(134);r(r.S+r.F*!n(240)(function(t){Array.from(t)}),"Array",{from:function(t,e,n){var r,i,o,s,a=g(t),u="function"==typeof this?this:Array,l=arguments.length,f=1<l?e:void 0,h=void 0!==f,c=0,p=_(a);if(h&&(f=d(f,2<l?n:void 0,2)),null==p||u==Array&&v(p))for(r=m(a.length),i=new u(r);c<r;c++)w(i,c,h?f(a[c],c):a[c]);else for(s=p.call(a),i=new u;!(o=s.next()).done;c++)w(i,c,h?y(s,f,[o.value,c],!0):o.value);return i.length=c,i}})},function(t,e,n){var o=n(18);t.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},function(t,e,n){var r=n(45),i=n(12)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(17),i=n(38);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var o=n(12)("iterator"),s=!1;try{var r=[7][o]();r.return=function(){s=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},t(r)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i=n(86),o=i.ProtoBuf.newBuilder({}).import({messages:[{name:"Map",fields:[{rule:"required",type:"string",name:"mid",id:1},{rule:"required",type:"int32",name:"file_ver",id:2},{rule:"required",type:"uint64",name:"date_ver",id:3},{rule:"required",type:"string",name:"mname",id:4},{rule:"required",type:"string",name:"hash_code",id:5},{rule:"optional",type:"string",name:"key",id:6},{rule:"optional",type:"string",name:"file_date",id:7},{rule:"optional",type:"string",name:"desc",id:8},{rule:"optional",type:"bool",name:"read_only",id:9,options:{default:!1}},{rule:"repeated",type:"Buffer",name:"buffers",id:10}],messages:[{name:"Buffer",fields:[{rule:"required",type:"int32",name:"gid",id:1},{rule:"required",type:"int32",name:"file_ver",id:2},{rule:"required",type:"int32",name:"btype",id:3},{rule:"required",type:"uint64",name:"len",id:4},{rule:"required",type:"bytes",name:"data",id:5}]}]}]});e.default=o},function(t,e,n){for(var r=n(87),i=n(110),o=n(22),s=n(6),a=n(9),u=n(35),l=n(4),f=l("iterator"),h=l("toStringTag"),c=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),g=0;g<d.length;g++){var y,v=d[g],m=p[v],w=s[v],_=w&&w.prototype;if(_&&(_[f]||a(_,f,c),_[h]||a(_,h,v),u[v]=c,m))for(y in r)_[y]||o(_,y,r[y],!0)}},function(t){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var w=n(50),_=n(29),b=n(22),E=n(9),x=n(35),T=n(245),S=n(88),k=n(138),M=n(4)("iterator"),I=!([].keys&&"next"in[].keys()),A="@@iterator",L="keys",R="values",P=function(){return this};t.exports=function(t,e,n,r,i,o,s){T(n,e,r);var a,u,l,f=function(t){if(!I&&t in d)return d[t];switch(t){case L:case R:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",c=i==R,p=!1,d=t.prototype,g=d[M]||d[A]||i&&d[i],y=g||f(i),v=i?c?f("entries"):y:void 0,m="Array"==e&&d.entries||g;if(m&&(l=k(m.call(new t)),l!==Object.prototype&&l.next&&(S(l,h,!0),w||"function"==typeof l[M]||E(l,M,P))),c&&g&&g.name!==R&&(p=!0,y=function(){return g.call(this)}),w&&!s||!I&&!p&&d[M]||E(d,M,y),x[e]=y,x[h]=P,i)if(a={values:c?y:f(R),keys:o?y:f(L),entries:v},s)for(u in a)u in d||b(d,u,a[u]);else _(_.P+_.F*(I||p),e,a);return a}},function(t,e,n){"use strict";var r=n(77),i=n(48),o=n(88),s={};n(9)(s,n(4)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){t.exports=n(247)},function(t,e,n){n(248),t.exports=n(1).Object.keys},function(t,e,n){var r=n(32),i=n(43);n(124)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(250),t.exports=n(1).parseFloat},function(t,e,n){var r=n(3),i=n(251);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){var r=n(7).parseFloat,i=n(125).trim;t.exports=1/r(n(83)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(29);r(r.P,"Array",{fill:n(89)}),n(137)("fill")},function(t,e,n){n(254)("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){"use strict";var w,_,b,E,x,r,d,T,i,S,o,s,k,M,a,u,l,I,A,g,y,L,R,P,v,f,h,c,p,m,D,O,N,F,B,C,z,U,Y,V,j,G,q,W,H,Z,X,$,Q,J,K,tt,et,nt,rt,it,ot,st,at,ut,lt,ft,ht,ct,pt,dt,gt,yt,vt,mt,wt,_t,bt,Et,xt,Tt,St,kt,Mt,It,At,Lt,Rt,Pt,Dt,Ot,Nt,Ft,Bt,Ct,zt,Ut,Yt,Vt,jt,Gt,qt,Wt;n(5)?(w=n(50),_=n(6),b=n(8),E=n(29),x=n(140),r=n(255),d=n(56),T=n(142),i=n(48),S=n(9),o=n(141),s=n(25),k=n(16),M=n(143),a=n(59),u=n(47),l=n(24),I=n(51),A=n(21),g=n(33),y=n(256),L=n(77),R=n(138),P=n(74).f,v=n(257),f=n(40),h=n(4),c=n(258),p=n(109),m=n(126),D=n(87),O=n(35),N=n(262),F=n(263),B=n(89),C=n(264),z=n(14),U=n(73),Y=z.f,V=U.f,j=_.RangeError,G=_.TypeError,q=_.Uint8Array,W="ArrayBuffer",H="Shared"+W,Z="BYTES_PER_ELEMENT",X="prototype",$=Array[X],Q=r.ArrayBuffer,J=r.DataView,K=c(0),tt=c(2),et=c(3),nt=c(4),rt=c(5),it=c(6),ot=p(!0),st=p(!1),at=D.values,ut=D.keys,lt=D.entries,ft=$.lastIndexOf,ht=$.reduce,ct=$.reduceRight,pt=$.join,dt=$.sort,gt=$.slice,yt=$.toString,vt=$.toLocaleString,mt=h("iterator"),wt=h("toStringTag"),_t=f("typed_constructor"),bt=f("def_constructor"),Et=x.CONSTR,xt=x.TYPED,Tt=x.VIEW,St="Wrong length!",kt=c(1,function(t,e){return Rt(m(t,t[bt]),e)}),Mt=b(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),It=!!q&&!!q[X].set&&b(function(){new q(1).set({})}),At=function(t,e){var n=s(t);if(n<0||n%e)throw j("Wrong offset!");return n},Lt=function(t){if(A(t)&&xt in t)return t;throw G(t+" is not a typed array!")},Rt=function(t,e){if(!(A(t)&&_t in t))throw G("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Dt(m(t,t[bt]),e)},Dt=function(t,e){for(var n=0,r=e.length,i=Rt(t,r);n<r;)i[n]=e[n++];return i},Ot=function(t,e,n){Y(t,e,{get:function(){return this._d[n]}})},Nt=function(t,e,n){var r,i,o,s,a,u,l=g(t),f=arguments.length,h=1<f?e:void 0,c=void 0!==h,p=v(l);if(null!=p&&!y(p)){for(u=p.call(l),o=[],r=0;!(a=u.next()).done;r++)o.push(a.value);l=o}for(c&&2<f&&(h=d(h,n,2)),r=0,i=k(l.length),s=Rt(this,i);r<i;r++)s[r]=c?h(l[r],r):l[r];return s},Ft=function(){for(var t=0,e=arguments.length,n=Rt(this,e);t<e;)n[t]=arguments[t++];return n},Bt=!!q&&b(function(){vt.call(new q(1))}),Ct=function(){return vt.apply(Bt?gt.call(Lt(this)):Lt(this),arguments)},zt={copyWithin:function(t,e,n){return C.call(Lt(this),t,e,2<arguments.length?n:void 0)},every:function(t,e){return nt(Lt(this),t,1<arguments.length?e:void 0)},fill:function(){return B.apply(Lt(this),arguments)},filter:function(t,e){return Pt(this,tt(Lt(this),t,1<arguments.length?e:void 0))},find:function(t,e){return rt(Lt(this),t,1<arguments.length?e:void 0)},findIndex:function(t,e){return it(Lt(this),t,1<arguments.length?e:void 0)},forEach:function(t,e){K(Lt(this),t,1<arguments.length?e:void 0)},indexOf:function(t,e){return st(Lt(this),t,1<arguments.length?e:void 0)},includes:function(t,e){return ot(Lt(this),t,1<arguments.length?e:void 0)},join:function(){return pt.apply(Lt(this),arguments)},lastIndexOf:function(){return ft.apply(Lt(this),arguments)},map:function(t,e){return kt(Lt(this),t,1<arguments.length?e:void 0)},reduce:function(){return ht.apply(Lt(this),arguments)},reduceRight:function(){return ct.apply(Lt(this),arguments)},reverse:function(){for(var t,e=this,n=Lt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t,e){return et(Lt(this),t,1<arguments.length?e:void 0)},sort:function(t){return dt.call(Lt(this),t)},subarray:function(t,e){var n=Lt(this),r=n.length,i=a(t,r);return new(m(n,n[bt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,k((void 0===e?r:a(e,r))-i))}},Ut=function(t,e){return Pt(this,gt.call(Lt(this),t,e))},Yt=function(t,e){Lt(this);var n=At(e,1),r=this.length,i=g(t),o=k(i.length),s=0;if(r<o+n)throw j(St);for(;s<o;)this[n+s]=i[s++]},Vt={entries:function(){return lt.call(Lt(this))},keys:function(){return ut.call(Lt(this))},values:function(){return at.call(Lt(this))}},jt=function(t,e){return A(t)&&t[xt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Gt=function(t,e){return jt(t,e=u(e,!0))?i(2,t[e]):V(t,e)},qt=function(t,e,n){return!(jt(t,e=u(e,!0))&&A(n)&&l(n,"value"))||l(n,"get")||l(n,"set")||n.configurable||l(n,"writable")&&!n.writable||l(n,"enumerable")&&!n.enumerable?Y(t,e,n):(t[e]=n.value,t)},Et||(U.f=Gt,z.f=qt),E(E.S+E.F*!Et,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:qt}),b(function(){yt.call({})})&&(yt=vt=function(){return pt.call(this)}),Wt=o({},zt),o(Wt,Vt),S(Wt,mt,Vt.values),o(Wt,{slice:Ut,set:Yt,constructor:function(){},toString:yt,toLocaleString:Ct}),Ot(Wt,"buffer","b"),Ot(Wt,"byteOffset","o"),Ot(Wt,"byteLength","l"),Ot(Wt,"length","e"),Y(Wt,wt,{get:function(){return this[xt]}}),t.exports=function(t,h,e,i){i=!!i;var c=t+(i?"Clamped":"")+"Array",r="get"+t,o="set"+t,p=_[c],s=p||{},n=p&&R(p),a=!p||!x.ABV,u={},l=p&&p[X],f=function(t,e){var n=t._d;return n.v[r](e*h+n.o,Mt)},d=function(t,e,n){var r=t._d;i&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),r.v[o](e*h+r.o,n,Mt)},g=function(t,e){Y(t,e,{get:function(){return f(this,e)},set:function(t){return d(this,e,t)},enumerable:!0})};a?(p=e(function(t,e,n,r){T(t,p,c,"_d");var i,o,s,a,u=0,l=0;if(A(e)){if(!(e instanceof Q||(a=I(e))==W||a==H))return xt in e?Dt(p,e):Nt.call(p,e);i=e,l=At(n,h);var f=e.byteLength;if(void 0===r){if(f%h)throw j(St);if(o=f-l,o<0)throw j(St)}else if(o=k(r)*h,f<o+l)throw j(St);s=o/h}else s=M(e),o=s*h,i=new Q(o);for(S(t,"_d",{b:i,o:l,l:o,e:s,v:new J(i)});u<s;)g(t,u++)}),l=p[X]=L(Wt),S(l,"constructor",p)):b(function(){p(1)})&&b(function(){new p(-1)})&&N(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,n,r){var i;return T(t,p,c),A(e)?e instanceof Q||(i=I(e))==W||i==H?void 0!==r?new s(e,At(n,h),r):void 0!==n?new s(e,At(n,h)):new s(e):xt in e?Dt(p,e):Nt.call(p,e):new s(M(e))}),K(n!==Function.prototype?P(s).concat(P(n)):P(s),function(t){t in p||S(p,t,s[t])}),p[X]=l,w||(l.constructor=p));var y=l[mt],v=!!y&&("values"==y.name||null==y.name),m=Vt.values;S(p,_t,!0),S(l,xt,c),S(l,Tt,!0),S(l,bt,p),(i?new p(1)[wt]==c:wt in l)||Y(l,wt,{get:function(){return c}}),u[c]=p,E(E.G+E.W+E.F*(p!=s),u),E(E.S,c,{BYTES_PER_ELEMENT:h}),E(E.S+E.F*b(function(){s.of.call(p,1)}),c,{from:Nt,of:Ft}),Z in l||S(l,Z,h),E(E.P,c,zt),F(c),E(E.P+E.F*It,c,{set:Yt}),E(E.P+E.F*!v,c,Vt),w||l.toString==yt||(l.toString=yt),E(E.P+E.F*b(function(){new p(1).slice()}),c,{slice:Ut}),E(E.P+E.F*(b(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!b(function(){l.toLocaleString.call([1,2])})),c,{toLocaleString:Ct}),O[c]=v?y:m,w||v||S(l,mt,m)}):t.exports=function(){}},function(t,e,n){"use strict";var r=n(6),i=n(5),o=n(50),s=n(140),a=n(9),u=n(141),l=n(8),f=n(142),h=n(25),c=n(16),p=n(143),d=n(74).f,g=n(14).f,y=n(89),v=n(88),m="ArrayBuffer",w="DataView",_="prototype",b="Wrong length!",E="Wrong index!",x=r[m],T=r[w],S=r.Math,k=r.RangeError,M=r.Infinity,I=x,A=S.abs,L=S.pow,R=S.floor,P=S.log,D=S.LN2,O="buffer",N="byteLength",F="byteOffset",B=i?"_b":O,C=i?"_l":N,z=i?"_o":F;function U(t,e,n){var r,i,o,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,l=u>>1,f=23===e?L(2,-24)-L(2,-77):0,h=0,c=t<0||0===t&&1/t<0?1:0;for(t=A(t),t!=t||t===M?(i=t!=t?1:0,r=u):(r=R(P(t)/D),t*(o=L(2,-r))<1&&(r--,o*=2),t+=1<=r+l?f/o:f*L(2,1-l),2<=t*o&&(r++,o/=2),u<=r+l?(i=0,r=u):1<=r+l?(i=(t*o-1)*L(2,e),r+=l):(i=t*L(2,l-1)*L(2,e),r=0));8<=e;s[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,a+=e;0<a;s[h++]=255&r,r/=256,a-=8);return s[--h]|=128*c,s}function Y(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,u=n-1,l=t[u--],f=127&l;for(l>>=7;0<a;f=256*f+t[u],u--,a-=8);for(r=f&(1<<-a)-1,f>>=-a,a+=e;0<a;r=256*r+t[u],u--,a-=8);if(0===f)f=1-s;else{if(f===o)return r?NaN:l?-M:M;r+=L(2,e),f-=s}return(l?-1:1)*r*L(2,f-e)}function V(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function j(t){return[255&t]}function G(t){return[255&t,t>>8&255]}function q(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function W(t){return U(t,52,8)}function H(t){return U(t,23,4)}function Z(t,e,n){g(t[_],e,{get:function(){return this[n]}})}function X(t,e,n,r){var i=+n,o=p(i);if(o+e>t[C])throw k(E);var s=t[B]._b,a=o+t[z],u=s.slice(a,a+e);return r?u:u.reverse()}function $(t,e,n,r,i,o){var s=+n,a=p(s);if(a+e>t[C])throw k(E);for(var u=t[B]._b,l=a+t[z],f=r(+i),h=0;h<e;h++)u[l+h]=f[o?h:e-h-1]}if(s.ABV){if(!l(function(){x(1)})||!l(function(){new x(-1)})||l(function(){return new x,new x(1.5),new x(NaN),x.name!=m})){x=function(t){return f(this,x),new I(p(t))};for(var Q,J=x[_]=I[_],K=d(I),tt=0;K.length>tt;)(Q=K[tt++])in x||a(x,Q,I[Q]);o||(J.constructor=x)}var et=new T(new x(2)),nt=T[_].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||u(T[_],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else x=function(t){f(this,x,m);var e=p(t);this._b=y.call(new Array(e),0),this[C]=e},T=function(t,e,n){f(this,T,w),f(t,x,w);var r=t[C],i=h(e);if(i<0||r<i)throw k("Wrong offset!");if(n=void 0===n?r-i:c(n),r<i+n)throw k(b);this[B]=t,this[z]=i,this[C]=n},i&&(Z(x,N,"_l"),Z(T,O,"_b"),Z(T,N,"_l"),Z(T,F,"_o")),u(T[_],{getInt8:function(t){return X(this,1,t)[0]<<24>>24},getUint8:function(t){return X(this,1,t)[0]},getInt16:function(t,e){var n=X(this,2,t,e);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t,e){var n=X(this,2,t,e);return n[1]<<8|n[0]},getInt32:function(t,e){return V(X(this,4,t,e))},getUint32:function(t,e){return V(X(this,4,t,e))>>>0},getFloat32:function(t,e){return Y(X(this,4,t,e),23,4)},getFloat64:function(t,e){return Y(X(this,8,t,e),52,8)},setInt8:function(t,e){$(this,1,t,j,e)},setUint8:function(t,e){$(this,1,t,j,e)},setInt16:function(t,e,n){$(this,2,t,G,e,n)},setUint16:function(t,e,n){$(this,2,t,G,e,n)},setInt32:function(t,e,n){$(this,4,t,q,e,n)},setUint32:function(t,e,n){$(this,4,t,q,e,n)},setFloat32:function(t,e,n){$(this,4,t,H,e,n)},setFloat64:function(t,e,n){$(this,8,t,W,e,n)}});v(x,m),v(T,w),a(T[_],s.VIEW,!0),e[m]=x,e[w]=T},function(t,e,n){var r=n(35),i=n(4)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(51),i=n(4)("iterator"),o=n(35);t.exports=n(49).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var w=n(56),_=n(107),b=n(33),E=n(16),r=n(259);t.exports=function(h,t){var c=1==h,p=2==h,d=3==h,g=4==h,y=6==h,v=5==h||y,m=t||r;return function(t,e,n){for(var r,i,o=b(t),s=_(o),a=w(e,n,3),u=E(s.length),l=0,f=c?m(t,u):p?m(t,0):void 0;l<u;l++)if((v||l in s)&&(r=s[l],i=a(r,l,o),h))if(c)f[l]=i;else if(i)switch(h){case 3:return!0;case 5:return r;case 6:return l;case 2:f.push(r)}else if(g)return!1;return y?-1:d||g?g:f}}},function(t,e,n){var r=n(260);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(21),i=n(261),o=n(4)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){var r=n(42);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var o=n(4)("iterator"),s=!1;try{var r=[7][o]();r.return=function(){s=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},t(r)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(6),i=n(14),o=n(5),s=n(4)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var f=n(33),h=n(59),c=n(16);t.exports=[].copyWithin||function(t,e,n){var r=f(this),i=c(r.length),o=h(t,i),s=h(e,i),a=2<arguments.length?n:void 0,u=Math.min((void 0===a?i:h(a,i))-s,i-o),l=1;for(s<o&&o<s+u&&(l=-1,s+=u-1,o+=u-1);0<u--;)s in r?r[o]=r[s]:delete r[o],o+=l,s+=l;return r}},function(){},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i=n(86),o=i.ProtoBuf.newBuilder({}).import({messages:[{name:"FloorGeo",syntax:"proto2",fields:[{rule:"required",type:"string",name:"mid",id:1},{rule:"required",type:"int32",name:"gid",id:2},{rule:"optional",type:"float",name:"height",id:3},{rule:"repeated",type:"GeneralGeoInfo",name:"extentLayer",id:4},{rule:"repeated",type:"GeneralGeoInfo",name:"modelLayer",id:5},{rule:"repeated",type:"GeneralGeoInfo",name:"labelLayer",id:6},{rule:"repeated",type:"GeneralGeoInfo",name:"poiLayer",id:7},{rule:"repeated",type:"GeneralGeoInfo",name:"polygonLayer",id:8},{rule:"repeated",type:"GeneralGeoInfo",name:"polygonLabelLayer",id:9},{rule:"repeated",type:"GeneralGeoInfo",name:"liftLayer",id:10},{rule:"repeated",type:"GeneralGeoInfo",name:"stairLayer",id:11},{rule:"repeated",type:"GeneralGeoInfo",name:"escalatorLayer",id:12},{rule:"repeated",type:"GeneralGeoInfo",name:"externalModelLayer",id:13}],messages:[{name:"GeneralGeoInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"geo",id:2},{rule:"optional",type:"float",name:"height",id:3},{rule:"optional",type:"float",name:"area",id:4},{rule:"repeated",type:"Indexinfo",name:"idxs",id:5},{rule:"repeated",type:"double",name:"pts",id:6}],messages:[{name:"Indexinfo",syntax:"proto2",fields:[{rule:"repeated",type:"int32",name:"idxs",id:1}]}]}]},{name:"FloorBiz",syntax:"proto2",fields:[{rule:"required",type:"string",name:"mid",id:1},{rule:"required",type:"int32",name:"gid",id:2},{rule:"repeated",type:"ExtentBizInfo",name:"extentLayer",id:3},{rule:"repeated",type:"ModelBizInfo",name:"modelLayer",id:4},{rule:"repeated",type:"LabelBizInfo",name:"labelLayer",id:5},{rule:"repeated",type:"POIBizInfo",name:"poiLayer",id:6},{rule:"repeated",type:"PolygonBizInfo",name:"polygonLayer",id:7},{rule:"repeated",type:"LiftBizInfo",name:"liftLayer",id:8},{rule:"repeated",type:"StairBizInfo",name:"stairLayer",id:9},{rule:"repeated",type:"PolygonLabelBizInfo",name:"polygonLabelLayer",id:10},{rule:"repeated",type:"ExternalModelBizInfo",name:"externalModelLayer",id:11}],messages:[{name:"ExtentBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"string",name:"name",id:4},{rule:"optional",type:"string",name:"ename",id:5}]},{name:"ModelBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"string",name:"name",id:4},{rule:"optional",type:"string",name:"ename",id:5},{rule:"optional",type:"int32",name:"minlevel",id:6},{rule:"optional",type:"int32",name:"maxlevel",id:7},{rule:"optional",type:"int32",name:"pass",id:8}]},{name:"LabelBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"string",name:"name",id:4},{rule:"optional",type:"string",name:"ename",id:5},{rule:"optional",type:"int32",name:"minlevel",id:6},{rule:"optional",type:"int32",name:"maxlevel",id:7}]},{name:"PolygonBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"string",name:"name",id:4},{rule:"optional",type:"string",name:"ename",id:5}]},{name:"POIBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"string",name:"name",id:4},{rule:"optional",type:"string",name:"ename",id:5},{rule:"optional",type:"int32",name:"minlevel",id:6},{rule:"optional",type:"int32",name:"maxlevel",id:7}]},{name:"LiftBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"int32",name:"flag",id:4},{rule:"optional",type:"string",name:"floor",id:5},{rule:"optional",type:"int32",name:"minlevel",id:6},{rule:"optional",type:"int32",name:"maxlevel",id:7}]},{name:"StairBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"int32",name:"flag",id:4},{rule:"optional",type:"int32",name:"minlevel",id:5},{rule:"optional",type:"int32",name:"maxlevel",id:6}]},{name:"PolygonLabelBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"float",name:"width",id:4},{rule:"optional",type:"string",name:"name",id:5},{rule:"optional",type:"string",name:"ename",id:6},{rule:"optional",type:"float",name:"angle",id:7}]},{name:"ExternalModelBizInfo",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"eid",id:1},{rule:"optional",type:"string",name:"fid",id:2},{rule:"optional",type:"int32",name:"type",id:3},{rule:"optional",type:"string",name:"name",id:4},{rule:"optional",type:"string",name:"ename",id:5},{rule:"optional",type:"int32",name:"minlevel",id:6},{rule:"optional",type:"int32",name:"maxlevel",id:7}]}]},{name:"FloorNavi",syntax:"proto2",fields:[{rule:"required",type:"string",name:"mid",id:1},{rule:"required",type:"int32",name:"gid",id:2},{rule:"repeated",type:"NaviNode",name:"naviNodes",id:3},{rule:"repeated",type:"NaviSegment",name:"naviSegments",id:4},{rule:"repeated",type:"NaviZone",name:"naviZones",id:5},{rule:"repeated",type:"NaviModel",name:"naviModels",id:6},{rule:"repeated",type:"int32",name:"nextFloors",id:7}],messages:[{name:"NaviNode",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"nodeId",id:1},{rule:"optional",type:"int32",name:"nodeType",id:2},{rule:"optional",type:"int32",name:"liftType",id:3},{rule:"optional",type:"int32",name:"liftFlag",id:4},{rule:"optional",type:"int32",name:"liftEntry",id:5},{rule:"optional",type:"string",name:"liftFloor",id:6},{rule:"optional",type:"string",name:"linkSeg",id:7},{rule:"optional",type:"string",name:"geo",id:8},{rule:"optional",type:"int32",name:"entranceType",id:9},{rule:"optional",type:"string",name:"entranceFloor",id:10},{rule:"optional",type:"int32",name:"doortype",id:11},{rule:"repeated",type:"int32",name:"idxs",id:12},{rule:"repeated",type:"double",name:"pts",id:13}]},{name:"NaviSegment",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"segmentId",id:1},{rule:"optional",type:"int32",name:"snode",id:2},{rule:"optional",type:"int32",name:"enode",id:3},{rule:"optional",type:"double",name:"length",id:4},{rule:"optional",type:"int32",name:"rank",id:5},{rule:"optional",type:"string",name:"name",id:6},{rule:"optional",type:"int32",name:"entry",id:7},{rule:"optional",type:"string",name:"desc",id:8},{rule:"optional",type:"string",name:"geo",id:9},{rule:"optional",type:"int32",name:"through",id:10},{rule:"repeated",type:"int32",name:"idxs",id:11},{rule:"repeated",type:"double",name:"pts",id:12}]},{name:"NaviZone",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"id",id:1},{rule:"required",type:"int32",name:"type",id:2,options:{default:0}},{rule:"optional",type:"string",name:"geo",id:3},{rule:"repeated",type:"int32",name:"rejects",id:4},{rule:"repeated",type:"int32",name:"idxs",id:5},{rule:"repeated",type:"double",name:"pts",id:6}]},{name:"NaviModel",syntax:"proto2",fields:[{rule:"required",type:"int32",name:"id",id:1},{rule:"repeated",type:"int32",name:"doorids",id:2},{rule:"repeated",type:"int32",name:"nodetypes",id:3},{rule:"repeated",type:"int32",name:"entrytypes",id:4}]}]}]});e.default=o},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i=n(86),o=i.ProtoBuf.newBuilder({}).import({messages:[{name:"Scene",fields:[{rule:"required",type:"string",name:"mid",id:19},{rule:"required",type:"int32",name:"file_ver",id:20},{rule:"required",type:"uint64",name:"date_ver",id:21},{rule:"required",type:"string",name:"mname",id:22},{rule:"required",type:"string",name:"hash_code",id:23},{rule:"optional",type:"string",name:"key",id:24},{rule:"optional",type:"string",name:"desc",id:25},{rule:"optional",type:"bool",name:"read_only",id:26,options:{default:!1}},{rule:"optional",type:"float",name:"x",id:1},{rule:"optional",type:"float",name:"y",id:2},{rule:"optional",type:"float",name:"z",id:3},{rule:"optional",type:"float",name:"minX",id:4},{rule:"optional",type:"float",name:"minY",id:5},{rule:"optional",type:"float",name:"maxX",id:6},{rule:"optional",type:"float",name:"maxY",id:7},{rule:"optional",type:"string",name:"defGid",id:8},{rule:"optional",type:"float",name:"defCenX",id:9},{rule:"optional",type:"float",name:"defCenY",id:10},{rule:"optional",type:"float",name:"defCenZ",id:11},{rule:"optional",type:"float",name:"height",id:12},{rule:"optional",type:"float",name:"rotateAngleX",id:13},{rule:"optional",type:"float",name:"rotateAngleY",id:14},{rule:"optional",type:"float",name:"rotateAngleZ",id:15},{rule:"optional",type:"float",name:"scale",id:16},{rule:"optional",type:"string",name:"scaleLevel",id:17},{rule:"repeated",type:"LayerGroup",name:"layerGroups",id:18}],messages:[{name:"Layer",fields:[{rule:"optional",type:"int32",name:"lid",id:1},{rule:"optional",type:"string",name:"lname",id:2},{rule:"optional",type:"string",name:"alias",id:3},{rule:"optional",type:"Type",name:"ltype",id:4},{rule:"optional",type:"float",name:"offsetX",id:5},{rule:"optional",type:"float",name:"offsetY",id:6},{rule:"optional",type:"float",name:"height",id:7},{rule:"optional",type:"float",name:"rotateAngleX",id:8},{rule:"optional",type:"float",name:"rotateAngleY",id:9},{rule:"optional",type:"float",name:"rotateAngleZ",id:10},{rule:"optional",type:"float",name:"minScaleLevel",id:11},{rule:"optional",type:"float",name:"maxScaleLevel",id:12},{rule:"optional",type:"bool",name:"isVisible",id:13},{rule:"optional",type:"bool",name:"isSelectable",id:14},{rule:"optional",type:"bool",name:"isEditable",id:15},{rule:"optional",type:"string",name:"desc",id:16}],enums:[{name:"Type",values:[{name:"GEOPOINT",id:1},{name:"GEOPOINT_ESCALATOR",id:2},{name:"GEOPOINT_LIFT",id:3},{name:"GEOPOINT_STAIR",id:4},{name:"GEOPOINT_PANORAMA",id:5},{name:"GEOPOINT_POI",id:6},{name:"GEOPOINT_STORELABEL",id:7},{name:"GEOPOINT_NAVINODE",id:8},{name:"GEOPOINT_MODEL",id:9},{name:"GEOLINE",id:20},{name:"GEOLINE_NAVISEGMENT",id:21},{name:"GEOLINE_BORDER",id:22},{name:"GEOPOLYGON",id:30},{name:"GEOPOLYGON_EXTENT",id:31},{name:"GEOPOLYGON_STORE",id:32},{name:"GEOPOLYGON_LABEL",id:33},{name:"RASTERATA",id:40},{name:"OVERLAYDATA",id:50}]}]},{name:"LayerGroup",fields:[{rule:"optional",type:"int32",name:"gid",id:1},{rule:"optional",type:"string",name:"gname",id:2},{rule:"optional",type:"string",name:"alias",id:3},{rule:"optional",type:"float",name:"height",id:4},{rule:"optional",type:"string",name:"desc",id:5},{rule:"repeated",type:"Layer",name:"layers",id:6}]}]}]});e.default=o},function(e,n,r){"use strict";var i=r(2),o=r(0);o(n,"__esModule",{value:!0}),n.default=void 0;var a=i(r(139));r(84);var s=i(r(10)),u=i(r(11)),l=l||{};l.GLEN1="MULTIPOLYGON(((".length,l.GLEN2="POINT(".length,l.GLEN3="MULTILINESTRING((".length;var f=function(){function e(){(0,s.default)(this,e),this._points,this._holes}return(0,u.default)(e,[{key:"parse",value:function(t){if(this._points=[],this._holes=[],0==t.indexOf("MULTIPOLYGON((("))for(var e=t.substring(l.GLEN1,t.length-3).split(/\),\(/),n=0;n<e.length;n++){var r=e[n].split(/,/);if(0==n)for(var i=0;i<r.length;i++){var o=r[i].split(" ");this._points.push({x:(0,a.default)(o[0]),y:(0,a.default)(o[1])})}else{for(var s=[],i=0;i<r.length;i++)o=r[i].split(" "),s.push({x:(0,a.default)(o[0]),y:(0,a.default)(o[1])});this._holes.push(s)}}else if(0==t.indexOf("POINT("))o=t.substring(l.GLEN2,t.length-1).split(" "),this._points.push({x:(0,a.default)(o[0]),y:(0,a.default)(o[1])});else if(0==t.indexOf("MULTILINESTRING(("))for(r=t.substring(l.GLEN3,t.length-2).split(","),i=0;i<r.length;i++)o=r[i].split(" "),this._points.push({x:(0,a.default)(o[0]),y:(0,a.default)(o[1])});return this}},{key:"toFixed",value:function(t){return+t.toFixed(2)}},{key:"parsePnt",value:function(t){if(this._points=[],0==t.indexOf("MULTIPOLYGON((("))for(var e=t.substring(l.GLEN1,t.length-3).split(","),n=0;n<e.length;n++){var r=e[n].split(" ");this._points.push({x:(0,a.default)(r[0]),y:(0,a.default)(r[1])})}else if(0==t.indexOf("POINT("))r=t.substring(l.GLEN2,t.length-1).split(" "),this._points.push({x:(0,a.default)(r[0]),y:(0,a.default)(r[1])});else if(0==t.indexOf("MULTILINESTRING(("))for(e=t.substring(l.GLEN3,t.length-2).split(","),n=0;n<e.length;n++)r=e[n].split(" "),this._points.push({x:(0,a.default)(r[0]),y:(0,a.default)(r[1])});return this}},{key:"toPntStrip",value:function(t){var e=[],n=this._points.length;if(!0===t){if(1<=n)for(var r=0;r<n-1;r++){var i=this._points[r];e.push(i.x,i.y)}}else for(r=0;r<n;r++)i=this._points[r],e.push(i.x,i.y);return e}},{key:"mergePnts",value:function(t){for(var e=[],n=t.length,r=0;r<n;r++){for(var i=t[r],o={x:this.toFixed(i.x),y:this.toFixed(i.y)},s=e.length,a=!1,u=0;u<s;u++){var l=e[u];if(l.x==o.x&&l.y==o.y){a=!0;break}}a||e.push(o)}return e}},{key:"toStrip",value:function(e){var n=[],r=this._points.length;if(r<=0)return n;for(var i=this._points.splice(r-1,1)[0],o=this.mergePnts(this._points),s=o.length,a=0;a<s;a++){var u=o[a];n.push(u.x,u.y)}return!0===e||(t={x:this.toFixed(i.x),y:this.toFixed(i.y)},n.push(t.x,t.y),this._points.push(i)),n}},{key:"hasHoles",value:function(){return null!=this._holes&&0<this._holes.length}},{key:"toStripHoles",value:function(e){for(var n=[],r=0;r<this._holes.length;r++){for(var i=this._holes[r],o=[],s=i.length,a=i.splice(s-1,1)[0],u=this.mergePnts(i),l=u.length,f=0;f<l;f++){var h=u[f];o.push(h.x,h.y)}!0===e||(t={x:this.toFixed(a.x),y:this.toFixed(a.y)},o.push(t.x,t.y)),n.push(o)}return n}},{key:"holes",set:function(t){this._holes=t},get:function(){return this._holes}},{key:"points",get:function(){return this._points},set:function(t){this._points=t}}]),e}(),h=f;n.default=h},function(e,n,r){"use strict";var i=r(2),o=r(0);o(n,"__esModule",{value:!0}),n.default=void 0;var s=i(r(10)),a=i(r(11)),u=function(){function e(){(0,s.default)(this,e),this._points,this._holes}return(0,a.default)(e,[{key:"parse",value:function(t,e){this._points=[],this._holes=[];for(var n=0,r=0;r<t.length;r++){var i=t[r].idxs,i=i||t[r];if("number"==typeof i)for(;n<i;)this._points.push({x:e[n],y:e[n+1]}),n+=2;else for(var o=0;o<i.length;o++)for(var s=i[o];n<s;)this._points.push({x:e[n],y:e[n+1]}),n+=2}return this}},{key:"parseGeometry",value:function(t,e){this._points=[],this._holes=[];for(var n=0,r=0;r<t.length;r++){var i=t[r].idxs,i=i||t[r];if("number"==typeof i)for(;n<i;)this._points.push({x:e[n],y:e[n+1]}),n+=2;else for(var o=0;o<i.length;o++)if(0===o)for(var s=i[o];n<s;)this._points.push({x:e[n],y:e[n+1]}),n+=2;else{for(var a=[],u=i[o];n<u;)a.push({x:e[n],y:e[n+1]}),n+=2;this._holes.push(a)}}return this}},{key:"mergePnts",value:function(t){for(var e=[],n=t.length,r=0;r<n;r++){for(var i=t[r],o={x:this.toFixed(i.x),y:this.toFixed(i.y)},s=e.length,a=!1,u=0;u<s;u++){var l=e[u];if(l.x==o.x&&l.y==o.y){a=!0;break}}a||e.push(o)}return e}},{key:"toStrip",value:function(e){var n=[],r=this._points.length;if(r<=0)return n;for(var i=this._points.splice(r-1,1)[0],o=this._points,s=o.length,a=0;a<s;a++){var u=o[a];n.push(u.x,u.y)}return!0===e||(t={x:this.toFixed(i.x),y:this.toFixed(i.y)},n.push(t.x,t.y),this._points.push(i)),n}},{key:"toFixed",value:function(t){return+t.toFixed(2)}},{key:"hasHoles",value:function(){return null!=this._holes&&0<this._holes.length}},{key:"toStripHoles",value:function(e){for(var n=[],r=0;r<this._holes.length;r++){for(var i=this._holes[r],o=[],s=i.length,a=i.splice(s-1,1)[0],u=this.mergePnts(i),l=u.length,f=0;f<l;f++){var h=u[f];o.push(h.x,h.y)}!0===e||(t={x:this.toFixed(a.x),y:this.toFixed(a.y)},o.push(t.x,t.y)),n.push(o)}return n}},{key:"holes",set:function(t){this._holes=t},get:function(){return this._holes}},{key:"points",get:function(){return this._points},set:function(t){this._points=t}}]),e}(),l=u;n.default=l},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.mapOptionMessage=e.tileMessage=e.cerityMessage=void 0;var i={warn_nokey:"key%E5%80%BC%E6%9C%AA%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%AF%B7%E8%AE%BF%E9%97%AE%E8%9C%82%E9%B8%9F%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%9F%A5%E7%9C%8B%E5%BA%94%E7%94%A8%E5%90%8D%E7%A7%B0%E3%80%82",warn_noappname:"%E5%BA%94%E7%94%A8%E5%90%8D%E7%A7%B0%EF%BC%88appname%EF%BC%89%E6%9C%AA%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%AF%B7%E8%AE%BF%E9%97%AE%E8%9C%82%E9%B8%9F%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%9F%A5%E7%9C%8B%E5%BA%94%E7%94%A8%E5%90%8D%E7%A7%B0%E3%80%82",warn_nomapid:"%E5%9C%B0%E5%9B%BEID%E6%9C%AA%E9%85%8D%E7%BD%AE%EF%BC%8C%E8%AF%B7%E8%AE%BF%E9%97%AE%E8%9C%82%E9%B8%9F%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%9F%A5%E7%9C%8B%E5%9C%B0%E5%9B%BEID%E3%80%82",warn_keynotright:"%E6%82%A8%E9%85%8D%E7%BD%AE%E7%9A%84key%E5%80%BC%E4%B8%8D%E6%AD%A3%E7%A1%AE%EF%BC%8C%E8%AF%B7%E8%AE%BF%E9%97%AE%E8%9C%82%E9%B8%9F%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%A3%80%E6%9F%A5%E6%AD%A4%E5%BA%94%E7%94%A8%E4%B8%8B%E7%9A%84key%E5%80%BC%E3%80%82",warn_offline:"%E6%82%A8%E9%85%8D%E7%BD%AE%E7%9A%84%E5%BA%94%E7%94%A8%E5%90%8D%E7%A7%B0%EF%BC%88appname%EF%BC%89%E6%88%96key%E5%80%BC%E4%B8%8D%E6%AD%A3%E7%A1%AE%EF%BC%8C%E8%AF%B7%E8%AE%BF%E9%97%AE%E8%9C%82%E9%B8%9F%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%A3%80%E6%9F%A5%E6%82%A8%E7%9A%84%E5%BA%94%E7%94%A8%E3%80%82",warn_openerror:"%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E5%A4%B1%E8%B4%A5",warn_connecterror:"%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E5%88%B0%E8%9C%82%E9%B8%9F%E4%BA%91",warn_downloaderror:"%E4%BB%8E%E8%9C%82%E9%B8%9F%E4%BA%91%E4%B8%8A%E8%8E%B7%E5%BE%97%E5%9C%B0%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%A4%B1%E8%B4%A5",warn_local:"%E6%9C%AC%E5%9C%B0%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5"};e.cerityMessage=i;var o={noGroup:"目标楼层未初始化，请检查楼层id是否越界，或者等待楼层加载！",noFocus:"焦点层不在可视楼层中，请检查焦点层和可视楼层的参数设置！"};e.tileMessage=o;var s={defaultViewCenterError:"地图初始化中心位置错误，请检查fengmap.FMMap初始化参数defaultViewCenter的正确性"};e.mapOptionMessage=s},function(t,e,n){t.exports=i;var f=n(90).EventEmitter,r=n(36);function i(){f.call(this)}r(i,f),i.Readable=n(91),i.Writable=n(282),i.Duplex=n(283),i.Transform=n(284),i.PassThrough=n(285),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(t){if(l(),0===f.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",a),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",u),e.on("error",u),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},function(t,e){"use strict";e.byteLength=o,e.toByteArray=s,e.fromByteArray=d;for(var u=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,i=n.length;r<i;++r)u[r]=n[r],l[n.charCodeAt(r)]=r;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function o(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function c(t,e,n){return 3*(e+n)/4-n}function s(t){for(var e,n=h(t),r=n[0],i=n[1],o=new f(c(t,r,i)),s=0,a=0<i?r-4:r,u=0;u<a;u+=4)e=l[t.charCodeAt(u)]<<18|l[t.charCodeAt(u+1)]<<12|l[t.charCodeAt(u+2)]<<6|l[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;return 2===i&&(e=l[t.charCodeAt(u)]<<2|l[t.charCodeAt(u+1)]>>4,o[s++]=255&e),1===i&&(e=l[t.charCodeAt(u)]<<10|l[t.charCodeAt(u+1)]<<4|l[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e),o}function a(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function p(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a(r));return i.join("")}function d(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(p(t,s,a<s+o?a:s+o));return 1===r?(e=t[n-1],i.push(u[e>>2]+u[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(u[e>>10]+u[e>>4&63]+u[e<<2&63]+"=")),i.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,f=-7,h=n?i-1:0,c=n?-1:1,p=t[e+h];for(h+=c,o=p&(1<<-f)-1,p>>=-f,f+=a;0<f;o=256*o+t[e+h],h+=c,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;0<f;s=256*s+t[e+h],h+=c,f-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=l}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,l=8*o-i-1,f=(1<<l)-1,h=f>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=1<=s+h?c/u:c*Math.pow(2,1-h),2<=e*u&&(s++,u/=2),f<=s+h?(a=0,s=f):1<=s+h?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;0<l;t[n+p]=255&s,p+=d,s/=256,l-=8);t[n+p-d]|=128*g}},function(){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(92).Buffer,o=n(276);function s(t,e,n){t.copy(e,n)}function a(){r(this,a),this.head=null,this.tail=null,this.length=0}t.exports=(a.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},a.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},a.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},a.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),n=this.head,r=0;n;)s(n.data,e,r),r+=n.data.length,n=n.next;return e},a),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},function(){},function(t,i,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(278),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(37))},function(t,e,n){(function(t,m){!function(n,r){"use strict";var i,o,s,a,u,t;function e(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return o[i]=r,u(i),i++}function l(t){delete o[t]}function f(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function h(t){if(s)setTimeout(h,0,t);else{var e=o[t];if(e){s=!0;try{f(e)}finally{l(t),s=!1}}}}function c(){u=function(t){m.nextTick(function(){h(t)})}}function p(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}function d(){var e="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(e)&&h(+t.data.slice(e.length))};n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),u=function(t){n.postMessage(e+t,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(t){var e=t.data;h(e)},u=function(t){e.port2.postMessage(t)}}function y(){var n=a.documentElement;u=function(t){var e=a.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}}function v(){u=function(t){setTimeout(h,0,t)}}n.setImmediate||(i=1,o={},s=!1,a=n.document,t=Object.getPrototypeOf&&Object.getPrototypeOf(n),t=t&&t.setTimeout?t:n,("[object process]"==={}.toString.call(n.process)?c:p()?d:n.MessageChannel?g:a&&"onreadystatechange"in a.createElement("script")?y:v)(),t.setImmediate=e,t.clearImmediate=l)}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(37),n(34))},function(e,t,n){(function(n){function t(t,e){if(i("noDeprecation"))return t;var n=!1;function r(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return r}function i(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=t}).call(this,n(37))},function(t,e,n){var r=n(93),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=o;var r=n(150),i=Object.create(n(46));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(36),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(94)},function(t,e,n){t.exports=n(26)},function(t,e,n){t.exports=n(91).Transform},function(t,e,n){t.exports=n(91).PassThrough},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(31));function s(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}(0,o.default)(s.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(t=("undefined"==typeof performance?Date:performance).now(),e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}});var a=s;e.default=a},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i={MODULE_SHORTEST:1,MODULE_BEST:2},o=i;e.default=o},function(t,e,n){"use strict";var r=n(0);r(e,"__esModule",{value:!0}),e.default=void 0;var i={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},o=i;e.default=o},function(t,e,n){t.exports=n(290)},function(t,e,n){n(291);var r=n(1).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},function(t,e,n){var r=n(3);r(r.S+r.F*!n(13),"Object",{defineProperties:n(100)})},function(t,e,n){t.exports=n(293)},function(t,e,n){n(294),t.exports=Math.pow(2,-52)},function(t,e,n){var r=n(3);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){"use strict";var r=n(2),i=n(0);i(e,"__esModule",{value:!0}),e.Matrix4=y;var h,c,o,s,a,u,l,f,p,d=r(n(31)),g=n(151);function y(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}(0,d.default)(y.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,s,a,u,l,f,h,c,p,d,g){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=i,y[5]=o,y[9]=s,y[13]=a,y[2]=u,y[6]=l,y[10]=f,y[14]=h,y[3]=c,y[7]=p,y[11]=d,y[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new y).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(p=new g.Vector3,function(t){var e=this.elements,n=t.elements,r=1/p.setFromMatrixColumn(t,0).length(),i=1/p.setFromMatrixColumn(t,1).length(),o=1/p.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e,n,r,i,o,s,a,u,l,f,h,c,p=this.elements,d=t.x,g=t.y,y=t.z,v=Math.cos(d),m=Math.sin(d),w=Math.cos(g),_=Math.sin(g),b=Math.cos(y),E=Math.sin(y);return"XYZ"===t.order?(o=v*b,s=v*E,a=m*b,u=m*E,p[0]=w*b,p[4]=-w*E,p[8]=_,p[1]=s+a*_,p[5]=o-u*_,p[9]=-m*w,p[2]=u-o*_,p[6]=a+s*_,p[10]=v*w):"YXZ"===t.order?(e=w*b,n=w*E,r=_*b,i=_*E,p[0]=e+i*m,p[4]=r*m-n,p[8]=v*_,p[1]=v*E,p[5]=v*b,p[9]=-m,p[2]=n*m-r,p[6]=i+e*m,p[10]=v*w):"ZXY"===t.order?(e=w*b,n=w*E,r=_*b,i=_*E,p[0]=e-i*m,p[4]=-v*E,p[8]=r+n*m,p[1]=n+r*m,p[5]=v*b,p[9]=i-e*m,p[2]=-v*_,p[6]=m,p[10]=v*w):"ZYX"===t.order?(o=v*b,s=v*E,a=m*b,u=m*E,p[0]=w*b,p[4]=a*_-s,p[8]=o*_+u,p[1]=w*E,p[5]=u*_+o,p[9]=s*_-a,p[2]=-_,p[6]=m*w,p[10]=v*w):"YZX"===t.order?(l=v*w,f=v*_,h=m*w,c=m*_,p[0]=w*b,p[4]=c-l*E,p[8]=h*E+f,p[1]=E,p[5]=v*b,p[9]=-m*b,p[2]=-_*b,p[6]=f*E+h,p[10]=l-c*E):"XZY"===t.order&&(l=v*w,f=v*_,h=m*w,c=m*_,p[0]=w*b,p[4]=-E,p[8]=_*b,p[1]=l*E+c,p[5]=v*b,p[9]=f*E-h,p[2]=h*E-f,p[6]=m*b,p[10]=c*E+l),p[3]=0,p[7]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,this},makeRotationFromQuaternion:(l=new g.Vector3(0,0,0),f=new g.Vector3(1,1,1),function(t){return this.compose(l,t,f)}),lookAt:(s=new g.Vector3,a=new g.Vector3,u=new g.Vector3,function(t,e,n){var r=this.elements;return u.subVectors(t,e),0===u.lengthSq()&&(u.z=1),u.normalize(),s.crossVectors(n,u),0===s.lengthSq()&&(1===Math.abs(n.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),s.crossVectors(n,u)),s.normalize(),a.crossVectors(u,s),r[0]=s.x,r[4]=a.x,r[8]=u.x,r[1]=s.y,r[5]=a.y,r[9]=u.y,r[2]=s.z,r[6]=a.z,r[10]=u.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],u=n[12],l=n[1],f=n[5],h=n[9],c=n[13],p=n[2],d=n[6],g=n[10],y=n[14],v=n[3],m=n[7],w=n[11],_=n[15],b=r[0],E=r[4],x=r[8],T=r[12],S=r[1],k=r[5],M=r[9],I=r[13],A=r[2],L=r[6],R=r[10],P=r[14],D=r[3],O=r[7],N=r[11],F=r[15];return i[0]=o*b+s*S+a*A+u*D,i[4]=o*E+s*k+a*L+u*O,i[8]=o*x+s*M+a*R+u*N,i[12]=o*T+s*I+a*P+u*F,i[1]=l*b+f*S+h*A+c*D,i[5]=l*E+f*k+h*L+c*O,i[9]=l*x+f*M+h*R+c*N,i[13]=l*T+f*I+h*P+c*F,i[2]=p*b+d*S+g*A+y*D,i[6]=p*E+d*k+g*L+y*O,i[10]=p*x+d*M+g*R+y*N,i[14]=p*T+d*I+g*P+y*F,i[3]=v*b+m*S+w*A+_*D,i[7]=v*E+m*k+w*L+_*O,i[11]=v*x+m*M+w*R+_*N,i[15]=v*T+m*I+w*P+_*F,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:(o=new g.Vector3,function(t){for(var e=0,n=t.count;e<n;e++)o.x=t.getX(e),o.y=t.getY(e),o.z=t.getZ(e),o.applyMatrix4(this),t.setXYZ(e,o.x,o.y,o.z);return t}),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],u=t[13],l=t[2],f=t[6],h=t[10],c=t[14],p=t[3],d=t[7],g=t[11],y=t[15];return p*(i*a*f-r*u*f-i*s*h+n*u*h+r*s*c-n*a*c)+d*(e*a*c-e*u*h+i*o*h-r*o*c+r*u*l-i*a*l)+g*(e*u*f-e*s*c-i*o*f+n*o*c+i*s*l-n*u*l)+y*(-r*s*l-e*a*f+e*s*h+r*o*f-n*o*h+n*a*l)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],l=r[5],f=r[6],h=r[7],c=r[8],p=r[9],d=r[10],g=r[11],y=r[12],v=r[13],m=r[14],w=r[15],_=p*m*h-v*d*h+v*f*g-l*m*g-p*f*w+l*d*w,b=y*d*h-c*m*h-y*f*g+u*m*g+c*f*w-u*d*w,E=c*v*h-y*p*h+y*l*g-u*v*g-c*l*w+u*p*w,x=y*p*f-c*v*f-y*l*d+u*v*d+c*l*m-u*p*m,T=i*_+o*b+s*E+a*x;if(0===T){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var k=1/T;return n[0]=_*k,n[1]=(v*d*a-p*m*a-v*s*g+o*m*g+p*s*w-o*d*w)*k,n[2]=(l*m*a-v*f*a+v*s*h-o*m*h-l*s*w+o*f*w)*k,n[3]=(p*f*a-l*d*a-p*s*h+o*d*h+l*s*g-o*f*g)*k,n[4]=b*k,n[5]=(c*m*a-y*d*a+y*s*g-i*m*g-c*s*w+i*d*w)*k,n[6]=(y*f*a-u*m*a-y*s*h+i*m*h+u*s*w-i*f*w)*k,n[7]=(u*d*a-c*f*a+c*s*h-i*d*h-u*s*g+i*f*g)*k,n[8]=E*k,n[9]=(y*p*a-c*v*a-y*o*g+i*v*g+c*o*w-i*p*w)*k,n[10]=(u*v*a-y*l*a+y*o*h-i*v*h-u*o*w+i*l*w)*k,n[11]=(c*l*a-u*p*a-c*o*h+i*p*h+u*o*g-i*l*g)*k,n[12]=x*k,n[13]=(c*v*s-y*p*s+y*o*d-i*v*d-c*o*m+i*p*m)*k,n[14]=(y*l*s-u*v*s-y*o*f+i*v*f+u*o*m-i*l*m)*k,n[15]=(u*p*s-c*l*s+c*o*f-i*p*f-u*o*d+i*l*d)*k,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,u=i*o,l=i*s;return this.set(u*o+n,u*s-r*a,u*a+r*s,0,u*s+r*a,l*s+n,l*a-r*o,0,u*a-r*s,l*a+r*o,i*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,u=i+i,l=o+o,f=s+s,h=i*u,c=i*l,p=i*f,d=o*l,g=o*f,y=s*f,v=a*u,m=a*l,w=a*f,_=n.x,b=n.y,E=n.z;return r[0]=(1-(d+y))*_,r[1]=(c+w)*_,r[2]=(p-m)*_,r[3]=0,r[4]=(c-w)*b,r[5]=(1-(h+y))*b,r[6]=(g+v)*b,r[7]=0,r[8]=(p+m)*E,r[9]=(g-v)*E,r[10]=(1-(h+d))*E,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:(h=new g.Vector3,c=new y,function(t,e,n){var r=this.elements,i=h.set(r[0],r[1],r[2]).length(),o=h.set(r[4],r[5],r[6]).length(),s=h.set(r[8],r[9],r[10]).length(),a=this.determinant();a<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],c.copy(this);var u=1/i,l=1/o,f=1/s;return c.elements[0]*=u,c.elements[1]*=u,c.elements[2]*=u,c.elements[4]*=l,c.elements[5]*=l,c.elements[6]*=l,c.elements[8]*=f,c.elements[9]*=f,c.elements[10]*=f,e.setFromRotationMatrix(c),n.x=i,n.y=o,n.z=s,this}),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),f=(n+r)/(n-r),h=-(o+i)/(o-i),c=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=u,s[9]=f,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=c,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var s=this.elements,a=1/(e-t),u=1/(n-r),l=1/(o-i),f=(e+t)*a,h=(n+r)*u,c=(o+i)*l;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-f,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}})}],r={},i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=153).default;function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});