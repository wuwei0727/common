<!DOCTYPE html>
<html xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="UTF-8">
    <title>车位规划</title>
    <link rel="stylesheet" href="../css/common/common.css" />
    <link rel="stylesheet" href="../css/list.css" />
    <link rel="stylesheet" href="../css/permiss.css" />
    <script src="../js/common/jquery-1.8.0.min.js"></script>
    <script src="../js/common/url.js"></script>
    <script src="../js/common/common.js"></script>
    <script src="../js/common/page.js"></script>
    <script src="../fMap/2/fengmap.core.min.js"></script>
    <script src="../fMap/2/fengmap.control.min.js"></script>
    <script src="../js/common/initFmap3.js"></script>
    <script src="../js/place.js"></script>
</head>

<body>
    <div class="contentTop">
        <span class="contentTitle">车位规划</span>
        <div class="search">
            <div class="searchItem">
                车位名称：<input type="text" onkeyup="this.value=this.value.replace(/\s/g,'')" name="name" id="name"
                    class="searchInp" autocomplete="off" placeholder="请输入车位名称" style="width:112px" />
            </div>
            <div class="searchItem">
                车牌号：<input type="text" autocomplete="off" onkeyup="this.value=this.value.replace(/\s/g,'')"
                    name="license" id="license" class="searchInp" placeholder="请输入车牌号" style="width:112px" />
            </div>
            <div class="searchItem seleBox">
                关联地图：
                <div class="batchBox mapWidth" onclick="switchSele(event)">
                    <div name="map" class="batchTxt" data-val="">--请选择关联地图--</div>
                    <div class="batchList" id="mapSelect">
                        <div onclick="seleBatch(this,'')">--请选择关联地图--</div>
                    </div>
                </div>
            </div>
            <!--
		 -->
            <div class="searchItem seleBox">
                关联公司：
                <div class="batchBox" onclick="switchSele(event)" style="width: 165px;">
                    <div name="company" class="batchTxt" style="width: 137px" data-val="">--请先选择关联地图--</div>
                    <div class="batchList" id="companySelect">
                        <div onclick="seleBatch(this,'')">--请先选择关联地图--</div>
                    </div>
                </div>
            </div>
            <!--
		 -->
            <div class="searchItem seleBox">
                状态：
                <div class="batchBox" onclick="switchSele(event)">
                    <div name="state" class="batchTxt" data-val="">--请选择--</div>
                    <div class="batchList">
                        <div onclick="seleBatch(this,'')">--请选择--</div>
                        <div onclick="seleBatch(this,'0')">空闲</div>
                        <div onclick="seleBatch(this,'1')">已停</div>
                        <!-- <div onclick="seleBatch(this,'2')">已预约</div> -->
                    </div>
                </div>
            </div>
            <!--
		 -->
            <div class="searchItem seleBox">
                类型：
                <div class="batchBox" onclick="switchSele(event)">
                    <div name="type" class="batchTxt" data-val="">--请选择--</div>
                    <div class="batchList">
                        <div onclick="seleBatch(this,'')">--请选择--</div>
                        <div onclick="seleBatch(this,'0')">普通车位</div>
                        <div onclick="seleBatch(this,'1')">充电桩车位</div>
                        <div onclick="seleBatch(this,'2')">专属车位</div>
                        <div onclick="seleBatch(this,'3')">无障碍车位</div>
                        <div onclick="seleBatch(this,'4')">超宽车位</div>
                        <div onclick="seleBatch(this,'5')">子母车位</div>
                        <div onclick="seleBatch(this,'6')">小型车位</div>
                        <!--                    <div onclick="seleBatch(this,'7')">VIP车位</div>-->
                    </div>
                </div>
            </div>
            <div class="searchItem seleBox">
                VIP：
                <div class="batchBox" onclick="switchSele(event)">
                    <div name="carbitType" class="batchTxt" data-val="">--请选择--</div>
                    <div class="batchList">
                        <div onclick="seleBatch(this,'')">--请选择--</div>
                        <div onclick="seleBatch(this,'0')">否</div>
                        <div onclick="seleBatch(this,'1')">是</div>
                    </div>
                </div>
            </div>
            <div class="searchItem seleBox">
                充电状态：
                <div class="batchBox" onclick="switchSele(event)">
                    <div name="charge" class="batchTxt" data-val="">--请选择--</div>
                    <div class="batchList">
                        <div onclick="seleBatch(this,'')">--请选择--</div>
                        <div onclick="seleBatch(this,'0')">空闲</div>
                        <div onclick="seleBatch(this,'1')">已使用</div>
                        <div onclick="seleBatch(this,'3')">无</div>
                    </div>
                </div>
            </div>
            <div class="searchItem seleBox">
                配置方式：
                <div class="batchBox" onclick="switchSele(event)" style="width: 165px;">
                    <div name="configWay" class="batchTxt" data-val="">--请选择--</div>
                    <div class="batchList">
                        <div onclick="seleBatch(this,'')">--请选择--</div>
                        <div onclick="seleBatch(this,'0')">无</div>
                        <div onclick="seleBatch(this,'1')">超声检测器</div>
                        <div onclick="seleBatch(this,'2')">视频方式</div>
                        <div onclick="seleBatch(this,'3')">视频方式加超声检测器</div>
                    </div>
                </div>
            </div>
            <div class="searchItem">
                楼层：<input type="text" onkeyup="this.value=this.value.replace(/\s/g,'')" name="floorName" id="floorName"
                    class="searchInp" autocomplete="off" placeholder="请输入楼层" style="width:112px" />
            </div>
            <span class="searchBtn" onclick="search()">搜索</span>
            <span class="searchBtn resetBtn" onclick="reset()">重置</span>
             <shiro:hasPermission name="pak:add">
            <div class="topBtn">
                <span onclick="addNewData()">新增</span>
            </div>
             </shiro:hasPermission>
            <span class="searchBtn resetBtn" onclick="exportShow()">导出</span>
        </div>
    </div>
    <!-- 信息 -->
    <div class="wrap">
        <table class="tab" id="tab">
            <thead>
                <tr>
                    <td name="line" class="line">序号</td>
                    <td name="name">
                        车位名称
                        <span class="tabSort" onclick="tabSort(this,'name')"></span>
                    </td>
                    <td name="mapName">地图</td>
                    <td name="companyName">公司</td>
                    <td name="floorName">楼层</td>
                    <td name="state">状态</td>
                    <td name="type">类型</td>
                    <td name="carbittype">VIP</td>
                    <td name="isReservable">是否可预约</td>
                    <td name="charge">充电状态</td>
                    <td name="configWay">配置方式</td>
                    <td name="license">车牌号</td>
                    <td name="user">管理者</td>
                    <td name="thirdPartyUpdateTime">最后更新时间</td>
                    <td name="operating">操作</td>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div class="listFooter clearfix">
            <label class="seleLabel">
                <input id="allCheck" onclick="allCheck(this)" type="checkbox" class="tabCheck" name="tabCheck">
                <span class="seleIcon"></span>全选
            </label>

            <shiro:hasPermission name="pak:del">
                <span class="deleBtn" onclick="showAllDele()">删除</span>
            </shiro:hasPermission>
            <div class="page">
                <span id="total" class="total"></span>
                <span class="turnPage prev" onclick="prevPage()"></span>
                <ul class="pageList"></ul>
                <span class="turnPage next" onclick="nextPage(this)"></span>
                跳至<input type="text" value="1" class="jumpPage" onkeyup="jumpCurPage(this,event)" />页
            </div>
        </div>
    </div>
    <!-- 提示 -->
    <div class="tips" id="tip"></div>
    <!-- 遮罩 -->
    <div class="mask" id="mask"></div>
    <!-- 确认提示框 -->
    <div class="confimPop" id="delePop">
        <div class="confimPopTop">
            <span class="popClose" onclick="hidePop('#delePop')"></span>
        </div>
        <div class="confimPopInfo">
            <p class="confimPopTitle">是否删除？</p>
            <p class="txtOverFlow">车位:<span id="deleTxt"></span></p>
        </div>
        <div class="confimPopFooter">
            <span class="confimPopEnt" onclick="entDele()">确定</span><span class="confimPopCancel"
                onclick="hidePop('#delePop')">取消</span>
        </div>
    </div>

    <!-- 车位导出 -->
    <div class="permissPop main" id="permissPop">
        <div class="popTop">
            车位数据<span id="saveTxt">导出</span>
            <span class="popClose" onclick="closePop('#permissPop')"></span>
        </div>
        <!-- 占位显示（虚化） -->
        <div style="height: 1px"></div>
        <div class="popCen">
            <div class="mainItemB">
                <span class="itemTxt"><span class="require">*</span>地图:</span>
                <div class="searchItem seleBoxmap">
                    <div class="batchBox" onclick="switchSele(event)" style="width: 220px;">
                        <div name="map" class="batchTxt" data-val="">--请选择--</div>
                        <div class="batchList" id="mapSelect1">
                            <div onclick="seleBatch(this,'')">--请选择--</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="managBtnCen" id="exportText" onclick="save()">导出</div>

        </div>
    </div>

    <div id="operating" class="hidden">
        <shiro:hasAnyPermissions name="pak:edit,pak:see">
            <span class="tabOper" id="editBtn">编辑</span>
        </shiro:hasAnyPermissions>
        <shiro:hasPermission name="pak:del">
            <span class="tabOper deleOpa" id="deleteBtn">删除</span>
        </shiro:hasPermission>
    </div>
    <!-- 商家所在位置 -->
    <div class="mapPop" id="mapPop">
        <div class="mapPopTop">
            车位所在位置
            <div class="close" onclick="hidePop('#mapPop')"></div>
        </div>
        <div class="fengmap" id="fengmap">
            <!--设备控件，2D/3D切换-->
            <div class="viewMode3">
                <div class="viewMode" onclick="changeMode(this)"></div>
            </div>
        </div>
    </div>
    <iframe id="addFrame" class="frameClass"></iframe>
    <iframe id="editFrame" class="frameClass"></iframe>
</body>
<script>
    //回车搜索
    $("#name").keydown(function (event) {
        if (event.keyCode === 13) {
            search(); //搜索
        }
    });

    $("#license").keydown(function (event) {
        if (event.keyCode === 13) {
            search(); //搜索
        }
    });
</script>

</html>