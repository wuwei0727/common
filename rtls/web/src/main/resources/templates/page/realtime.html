<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>实时数据</title>
	<link rel="stylesheet" href="../css/common/common.css" />
	<link rel="stylesheet" href="../css/realtime.css" />
	<script src="../js/common/jquery-1.8.0.min.js"></script>
	<script src="../js/common/url.js"></script>
	<script src="../js/common/common.js"></script>
	<script src="../fMap/2/fengmap.core.min.js"></script>
	<script src="../fMap/2/fengmap.control.min.js"></script>
	<!-- <script src="../js/common/initFmap.js"></script> -->
	<script src="../js/common/initFmapRealTime.js"></script>
	<script src="../js/realtime.js"></script>
</head>

<body>
	<shiro:hasAnyPermissions name="location:view">

		<div class="top">
			<span class="topTitle">项目概览</span>
			<!--用于连接websocket-->
			<span id="websocket" hidden>
				<shiro:authenticated>
					<shiro:principal property="uid" />
				</shiro:authenticated>
			</span>
			<div class="toView" onclick="toView()">跳转至展示页</div>
		</div>
	</shiro:hasAnyPermissions>
	<!-- 信息 -->
	<div class="wrap">
		<div class="topList">
			<div class="topItem itemMr stoppedPlaceBox" onclick="placeDetail('stoppedPlace')">
				<div class="topNum textOverFlow" id="stoppedPlace">0</div>
				<div class="topTxt">
					已停车位
					<img src="../image/position/arrow.png" />
				</div>
			</div>
			<div class="topItem itemMr freePlaceBox" onclick="placeDetail('freePlace')">
				<div class="topNum textOverFlow" id="freePlace">0</div>
				<div class="topTxt">
					空闲车位
					<img src="../image/position/arrow.png" />
				</div>
			</div>
			<div class="topItem itemMr stoppedChargeBox" onclick="placeDetail('stoppedCharge')">
				<div class="topNum textOverFlow" id="stoppedCharge">0</div>
				<div class="topTxt">
					已使用充电桩
					<img src="../image/position/arrow.png" />
				</div>
			</div>
			<div class="topItem freeChargeBox" onclick="placeDetail('freeCharge')">
				<div class="topNum textOverFlow" id="freeCharge">0</div>
				<div class="topTxt">
					空闲充电桩
					<img src="../image/position/arrow.png" />
				</div>
			</div>
		</div>
		<div class="map" id="mapBox">
			<div class="mapSelectBox" id="mapSelectBox">
				<div class="batchBox" style="width:180px" onclick="switchSele(event, undefined, 'realtime')">
					<div name="status" class="batchTxt batchTxtChange" data-val=""></div>
					<div class="batchList" id="mapSelect"></div>
				</div>
			</div>
			<div class="filter">
				<div class="filterItem">
					已停：<span class="state1 stopped"></span>
				</div>
				<div class="filterItem">
					空闲：<span class="state2 idle"></span>
				</div>
				<div class="filterItem">
					<input type="text" name="keyword" class="filterInp" autocomplete="off" placeholder="请输入车位号" />
				</div>
				<span class="searchBtn" onclick="inquire()">搜索</span>
			</div>
			<!-- 加载地图容器 -->
			<div id="fengmap" class="mapCanvas" style="width:50px;"></div>
			<div class="layer" id="layer">设置</div>
			<div class="viewMode1">
				<div class="mapMax" onclick="mapFullScreen(this)"></div>
			</div>
			<!--设备控件，2D/3D切换-->
			<div class="viewMode3">
				<div class="viewMode" onclick="changeMode(this)"></div>
			</div>
			<!--加载logo-->
			<div class="layer1Img">
				<img src="../image/common/PARKHome2.png" class="imgs1">
			</div>

			<div class="layerPop" id="layerPop">
				<div class="layerItem">
					<div class="layerItemTitle">地图文本标注</div>
					<div class="layerItemOpa">
						<span class="layerOpaMr curLayerOpa" onclick="mapFeatures(this,'label')">开启</span>
					</div>
				</div>
				<div id="marker"></div>
			</div>
		</div>
	</div>
	<!-- 提示 -->
	<div class="tips" id="tip"></div>
	<!-- 遮罩 -->
	<div class="mask" id="mask"></div>
</body>

</html>