/**Released Version v3.1.3,BUILD 653,Time 1691032746164. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.fengmap=i():t.fengmap=i()}(this,function(){return n=[function(R,t,i){"use strict";i.r(t);var v={LEFT_TOP:1,LEFT_BOTTOM:2,RIGHT_TOP:3,RIGHT_BOTTOM:4};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(e.key),e)}}i=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");t=t||{},this.u=null,this.h=t,this.v=null,this.A=null}var t,n,e;return t=i,(n=[{key:"addTo",value:function(t){this.u=t,this.g()}},{key:"remove",value:function(){this.h.contain.removeChild(this.A)}},{key:"on",value:function(t,i){this.A.onclick=function(){i&&i()},this.A.addEventListener("touchend",function(){i&&i()},!1)}},{key:"checkPosition",value:function(t,i,n){switch(n.style.left="",n.style.right="",n.style.top="",n.style.bottom="",t){case v.LEFT_TOP:n.style.left=(i=i||{x:10,y:10}).x+"px",n.style.top=i.y+"px",n.style.bottom="auto",n.style.right="auto";break;case v.RIGHT_TOP:n.style.right=-(i=i||{x:-10,y:10}).x+"px",n.style.top=i.y+"px",n.style.bottom="auto",n.style.left="auto";break;case v.LEFT_BOTTOM:n.style.left=(i=i||{x:10,y:-10}).x+"px",n.style.bottom=-i.y+"px",n.style.top="auto",n.style.right="auto";break;case v.RIGHT_BOTTOM:n.style.right=-(i=i||{x:-10,y:-10}).x+"px",n.style.bottom=-i.y+"px",n.style.top="auto",n.style.left="auto";break;default:n.style.left=(i=i||{x:10,y:10}).x+"px",n.style.top=i.y+"px",n.style.bottom="auto",n.style.right="auto"}}}])&&r(t.prototype,n),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}(),Object.assign(i.prototype,{g:function(){var t=this,i=document.createElement("div"),n=(i.classList.add("fm-compass-container"),void 0!==this.h.backgroundImageSize&&(i.style.width=this.h.backgroundImageSize+"px",i.style.height=this.h.backgroundImageSize+"px"),void 0!==this.h.backgroundImageURL&&(i.style.backgroundImage="url('"+this.h.backgroundImageURL+"')"),void 0===this.h.position&&void 0===this.h.offset||this.checkPosition(this.h.position,this.h.offset,i),(this.h.contain||(this.h.contain=this.u.getContainer(),this.u.getContainer())).appendChild(i),-this.u.getRotation());this.v=document.createElement("div"),this.v.classList.add("fm-compass-element"),this.v.style.transform="rotate("+n+"deg)",this.v.style.msTransform="rotate("+n+"deg)",this.v.style.mozTransform="rotate("+n+"deg)",this.v.style.webkitTransform="rotate("+n+"deg)",this.v.style.oTransform="rotate("+n+"deg)",void 0!==this.h.pointerImageURL&&(this.v.style.backgroundImage="url('"+this.h.pointerImageURL+"')"),void 0!==this.h.pointerImageSize&&(this.v.style.width=this.h.pointerImageSize+"px",this.v.style.height=this.h.pointerImageSize+"px"),i.appendChild(this.v),this.A=i,this.u.on("update",function(){t.k()})},k:function(){var t=-this.u.getRotation();this.v.style.transform="rotate("+t+"deg)",this.v.style.msTransform="rotate("+t+"deg)",this.v.style.mozTransform="rotate("+t+"deg)",this.v.style.webkitTransform="rotate("+t+"deg)",this.v.style.oTransform="rotate("+t+"deg)"}});function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===s(t)?t:String(t)}(e.key),e)}}var n=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.S=t=t||{},this.M=40,void 0!==t.maxWidth&&(this.M=t.minWidth),this.O=100,void 0!==t.maxWidth&&(this.O=t.maxWidth),(this.T=void 0)!==t.height&&(this.T=t.height),(this.C=void 0)!==t.fontSize&&(this.C=t.fontSize),(this.j=void 0)!==t.position&&(this.j=t.position),this.u=null,this.B=null,this.I=[1e7,5e6,2e6,1e6,5e5,2e5,1e5,5e4,25e3,2e4,1e4,5e3,2e3,1e3,500,200,100,50,20,10,5,2,1,.5,.2,.1,.05,.02,.01],this.P=this.P.bind(this)}var t,n,e;return t=i,(n=[{key:"addTo",value:function(t){this.u=t,this.g()}},{key:"remove",value:function(){this.u.off("zoom",this.P),this.u.getContainer().removeChild(this.B)}}])&&u(t.prototype,n),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();Object.assign(n.prototype,{g:function(){this.B=document.createElement("div"),this.B.classList.add("fm-control-scale-bar-contain"),this.B.style.width=this.M+"px",void 0!==this.T&&(this.B.style.height=this.T+"px"),this.B.style.zIndex=20,void 0===this.j&&void 0===this.S.offset||this.L(this.j,this.S.offset,this.B),this.u.getContainer().appendChild(this.B);var t=document.createElement("div"),t=(t.setAttribute("id","ruleWord"),t.classList.add("fm-control-scale-bar-text"),void 0!==this.C&&(t.style.fontSize=this.C+"px"),this.B.appendChild(t),document.createElement("div")),t=(t.classList.add("fm-control-scale-bar-left1"),this.B.appendChild(t),document.createElement("div")),t=(t.classList.add("fm-control-scale-bar-left2"),this.B.appendChild(t),document.createElement("div")),t=(t.classList.add("fm-control-scale-bar-right1"),this.B.appendChild(t),document.createElement("div")),t=(t.classList.add("fm-control-scale-bar-right2"),this.B.appendChild(t),document.createElement("div")),t=(t.classList.add("fm-control-scale-bar-bottom1"),this.B.appendChild(t),document.createElement("div"));t.classList.add("fm-control-scale-bar-bottom2"),this.B.appendChild(t),this.P(),this.u.on("zoom",this.P)},L:function(t,i,n){switch(n.style.left="",n.style.right="",n.style.top="",n.style.bottom="",t){case v.LEFT_TOP:n.style.left=(i=i||{x:10,y:10}).x+"px",n.style.top=i.y+"px";break;case v.RIGHT_TOP:n.style.right=-(i=i||{x:-10,y:10}).x+"px",n.style.top=i.y+"px";break;case v.LEFT_BOTTOM:n.style.left=(i=i||{x:10,y:-10}).x+"px",n.style.bottom=-i.y+"px";break;case v.RIGHT_BOTTOM:n.style.right=-(i=i||{x:-10,y:-10}).x+"px",n.style.bottom=-i.y+"px";break;default:n.style.left=(i=i||{x:10,y:10}).x+"px",n.style.top=i.y+"px"}},P:function(t){var i={x:document.body.clientWidth/2,y:document.body.clientHeight/2},n={x:i.x+100,y:i.y},i=fengmap.FMUtil.coordsScreenToMap(this.u,i),n=fengmap.FMUtil.coordsScreenToMap(this.u,n),i=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y))/100,n=this.I[Math.floor(this.u.getZoom())-1],i=(this.B.style.width=n/i+"px",""),i=n<1e3&&1<=n?n+"米":n<1?1e3*n+"毫米":n/1e3+"公里";document.getElementById("ruleWord").innerHTML=i}});function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===a(t)?t:String(t)}(e.key),e)}}var l=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var i,n,e;return i=t,e=[{key:"toColor",value:function(t){var i;return"number"==typeof t?t:3<=(i=t.split(",")).length?parseInt(i[0])<<16|parseInt(i[1])<<8|parseInt(i[2]):(console.error("color format error",t),0)}},{key:"bindEvent",value:function(t,r,i,s){t.addEventListener(i,function(t){var i,n=t||window.event,e=n.target||n.srcElement,o=n.currentTarget;for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var i=(this.document||this.ownerDocument).querySelectorAll(t),n=i.length;0<=--n&&i.item(n)!==this;);return-1<n});e!==o;)e.matches(r)&&(i=e,s.call(i,n)),e=e.parentNode})}},{key:"scrollTopAnFun",value:function(){var f,m=!1;return function i(n){var e=n.el,t=n.to,o=n.form,r=(n.time,t<o?"up":"bottom"),s=10,u=(o<t?t-o:t==o?0:o-t)/s,a=0,h=function(t){var i=t.val,n=t.nbak,e=t.n,t=t.elTop;return"up"==r?t+(n-e)*i:t-(n-e)*i};function l(){--f<=0?c():window.setTimeout(function(){!1!==f&&((a=h({val:s,nbak:u,n:f,elTop:t,VDIRECTIONE:r}))&&(e.scrollTop=a),l())},s)}var c=function(){f=m=!1,e.scrollTop=0==o?0:o};m?(f=0,window.setTimeout(function(){var t=Object(n,{to:e.scrollTop});m=!1,i(t)},s+1)):(m=!0,f=u,l())}}},{key:"sleep",value:function(t){for(var i=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-i>t);n++);}},{key:"getClikEventName",value:function(){return window.PointerEvent?"pointerdown":"click"}}],(n=null)&&h(i.prototype,n),e&&h(i,e),Object.defineProperty(i,"prototype",{writable:!1}),t}(),e={FMMap_CONTROL_SMALL:"small",FMMap_CONTROL_NORMAL:"normal"};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===c(t)?t:String(t)}(e.key),e)}}function m(t,i,n){return i&&f(t.prototype,i),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var d=m(function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.size=e.FMMap_CONTROL_NORMAL,this.position=v.LEFT_TOP,this.offset={x:10,y:10},this.imgURL="resource/style/wedgets/img/",this.floorButtonCount=5,this.needAllLayerBtn=!0,Object.assign(this,i)}),y={MODE_3D:2,MODE_2D:4},A=(Object.freeze(y),y);function b(t,i){var n=document.createElement("div"),t='<div class="fm-scroll" id="scroll_'.concat(t+i,'"></div>');return n.innerHTML=t.trim(),n.firstChild}function p(t,i){t&&i?t.appendChild(i):console.error(t,i)}for(var g=[],w=0;w<256;w++)g[w]=(w<16?"0":"")+w.toString(16);var k={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(g[255&t]+g[t>>8&255]+g[t>>16&255]+g[t>>24&255]+"-"+g[255&i]+g[i>>8&255]+"-"+g[i>>16&15|64]+g[i>>24&255]+"-"+g[63&n|128]+g[n>>8&255]+"-"+g[n>>16&255]+g[n>>24&255]+g[255&e]+g[e>>8&255]+g[e>>16&255]+g[e>>24&255]).toUpperCase()},clamp:function(t,i,n){return Math.max(i,Math.min(n,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,n,e,o){return e+(t-i)*(o-e)/(n-i)},lerp:function(t,i,n){return(1-n)*t+n*i},smoothstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*(3-2*t)},smootherstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*k.DEG2RAD},radToDeg:function(t){return t*k.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,n,e,o){var r=Math.cos,s=Math.sin,u=r(n/2),n=s(n/2),a=r((i+e)/2),h=s((i+e)/2),l=r((i-e)/2),c=s((i-e)/2),r=r((e-i)/2),s=s((e-i)/2);"XYX"===o?t.set(u*h,n*l,n*c,u*a):"YZY"===o?t.set(n*c,u*h,n*l,u*a):"ZXZ"===o?t.set(n*l,n*c,u*h,u*a):"XZX"===o?t.set(u*h,n*s,n*r,u*a):"YXY"===o?t.set(n*r,u*h,n*s,u*a):"ZYZ"===o?t.set(n*s,n*r,u*h,u*a):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===x(t)?t:String(t)}(e.key),e)}}function E(t,i,n){return i&&S(t.prototype,i),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var M,O=E(function t(i,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var e=i.getState().viewBuildingID,o=!0,r=n.buildingID,n=i.getMapOptions().buildingID,s=r&&r!==n&&e===n,n=r&&e!==n,u=document.querySelector(".fm-enter-exit-building-button-enter"),a=document.querySelector(".fm-enter-exit-building-button-exit");s?u.classList.remove("fm-hide"):n&&a.classList.remove("fm-hide"),u.addEventListener("pointerdown",function(){null!==r&&!1!==o&&(o=!1,i.enterBuilding({buildingID:r,finish:function(){o=!0}}),e=r)}),a.addEventListener("pointerdown",function(){!1!==o&&(o=!1,i.exitBuilding({finish:function(){o=!0}}))})});function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===T(t)?t:String(t)}(e.key),e)}}y=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.B=(t=t||{}).contain,this.U=new d(t),this.R=this.U.floorButtonCount,this.u=null,this.V=!1,this._=!0,this.N=10,this.D=null,this.F=null,this.G=[],this.Z=null,this.Y=null,this.H=null,this.uuid=null,this.J=null,this.scrollTopAn_=new l.scrollTopAnFun,this.viewModeControl=void 0===t.viewModeControl||t.viewModeControl,this.floorModeControl=void 0===t.floorModeControl||t.floorModeControl,this.timer=null,this.X=t.buildingID,this.K=void 0===t.showMap||t.showMap,this.hasDOM=!1,this.enable=!0,this.W=void 0===t.entranceIcon||t.entranceIcon}var t,n,e;return t=i,(n=[{key:"applicationBuilding",value:function(){this.Z=this.u.getBuilding(this.X),0!==this.Z.getFloorInfos().length&&(null!=this.Z.level?this.J=this.Z.level:this.Z.setLevel({level:this.J}),this.B||(this.B=this.u.getContainer()),this.createDOM(),1<this.Z.visibleLevels.length?this.setLayerStatus(!0):this.setLayerStatus(!1))}},{key:"buildingIsInZoomRange",value:function(t){var i=this.u.getZoom(),t=t.zoomRange,n=!0;return n=t&&(i<t.minLevel||i>t.maxLevel)?!1:n}},{key:"findBuilding",value:function(){var t=!1,i=this.u.getState(),n=!1,e=!1,o=this.u.focusBuilding;return o?o.buildingID===i.viewBuildingID||(i=this.buildingIsInZoomRange(o),o.overviewMode!==fengmap.FMOverviewMode.OUTDOOR&&i)?(t=!0,this.X!==o.buildingID&&(e=!0),this.X=o.buildingID,n=!0):!0===this.K&&(t=!0,i=this.u.getMapOptions().buildingID,this.X!==i&&(e=!0),this.X=i,n=!0):!0===this.K&&(t=!0,o=this.u.getMapOptions().buildingID,this.X!==o&&(e=!0),this.X=o,n=!0),!1===t&&(null!==this.X&&(e=!0),this.X=null),{isShowToolbar:n,isBuildingChange:e}}},{key:"addTo",value:function(t){((this.u=t).toolBar=this).initEvent(),this.findBuilding().isShowToolbar&&this.applicationBuilding()}},{key:"switchBuilding",value:function(){this.removeDOM(),this.X=null,this.Z=null,this.findBuilding().isShowToolbar&&this.applicationBuilding()}},{key:"remove",value:function(){this.removeEvent(),this.removeDOM(),delete this.u.toolBar}},{key:"removeDOM",value:function(){this.F&&this.B.removeChild(this.F),this.F=null,this.hasDOM=!1}},{key:"removeEvent",value:function(){this.u.off("levelChanged",this.gidchange),this.u.off("visibleLevelsLoaded",this.handleLayerChangeStyle),this.u.off("buildingEntered",this.handleBuildingEntered),this.u.off("buildingExited",this.handleBuildingExited),this.u.off("buildingOverviewModeChanged",this.handleBuildingOverviewModeChanged),this.u.off("ViewBuildingChange",this.handleViewBuildingChange),this.u.off("zoom",this.handleCheckZoom)}},{key:"initEvent",value:function(){function t(t){var i;!n.enable||!n.Z||t.buildingID&&t.buildingID!==n.Z.buildingID||!t.buildingID&&n.Z.buildingID!==n.u.getMapOptions().buildingID||(i=n.Z.getFloorInfos().map(function(t){return t.level}),t.level<i[0])||t.level>i[i.length-1]||(n.D.scrollTop=n.getCenterScrolltopById(t.level,i.length),n.setGidStyleByEvent(t.level,"levelChanged"))}var n=this;this.gidchange=t,this.u.on("levelChanged",t),this.q=function(t){return(n.map?n.map.mapView.container_:document).querySelector(t)},this.handleBuildingEntered=this.handleBuildingEntered.bind(this),this.handleBuildingExited=this.handleBuildingExited.bind(this),this.handleBuildingOverviewModeChanged=this.handleBuildingOverviewModeChanged.bind(this),this.handleLayerChangeStyle=this.handleLayerChangeStyle.bind(this),this.handleViewBuildingChange=this.handleViewBuildingChange.bind(this),this.handleCheckZoom=this.handleCheckZoom.bind(this),this.u.on("ViewBuildingChange",this.handleViewBuildingChange),this.u.on("buildingEntered",this.handleBuildingEntered),this.u.on("buildingExited",this.handleBuildingExited),this.u.on("buildingOverviewModeChanged",this.handleBuildingOverviewModeChanged),this.u.on("visibleLevelsLoaded",this.handleLayerChangeStyle),this.u.on("visibleLevelsLoaded",this.handleLayerChangeStyle),this.u.on("zoom",this.handleCheckZoom)}},{key:"handleCheckZoom",value:function(){this.findBuilding().isBuildingChange&&this.switchBuilding()}},{key:"createDOM",value:function(){this.hasDOM=!0,this.uuid=k.generateUUID();(t=document.createElement("div")).innerHTML='\n    <div class="fm-control-groups" </div>'.trim();var t=t.firstChild,i=(this.F=t,this.U.position),n=this.U.offset,e=t;switch(e.style.left="",e.style.right="",e.style.top="",e.style.bottom="",i){case v.LEFT_TOP:e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.bottom="auto",e.style.right="auto";break;case v.RIGHT_TOP:e.style.right=-n.x+"px",e.style.top=n.y+"px",e.style.bottom="auto",e.style.left="auto";break;case v.LEFT_BOTTOM:e.style.left=n.x+"px",e.style.bottom=-n.y+"px",e.style.top="auto",e.style.right="auto";break;case v.RIGHT_BOTTOM:e.style.right=-n.x+"px",e.style.bottom=-n.y+"px",e.style.top="auto",e.style.left="auto";break;default:e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.bottom="auto",e.style.right="auto"}p(this.B,t);var o,i=this.Z.getFloorInfos().map(function(t){return t.level}),r=i.length,s=this.R,u=!0,a=(this.viewModeControl&&(this.u.getViewMode()===A.MODE_3D?this._=!1:this._=!0,this.Y=((o=document.createElement("div")).innerHTML='\n    <div class="fm-view fm-view-3d"></div>'.trim(),o.firstChild),this.initViewModePanelEvent(this.Y),p(t,this.Y),this.setViewModeToStyle(this.Y,this._?"2d":"3d")),(o=document.createElement("div")).innerHTML='\n      <div class="fm-layer">\n        <div class="fm-layer-image-many"> </div>\n      </div>'.trim(),o.firstChild);if(this.U.needAllLayerBtn&&p(t,a),this.$=a,this.eventSwitchBtn(a),this.handleLayerChangeStyle=this.handleLayerChangeStyle.bind(this),this.floorModeControl){r<=this.R&&(s=r,u=!1);this._layer;this.V&&this._layers,(a=document.createElement("div")).innerHTML='<div class = "fm-floor-list-group" > </div'.trim();var r=a.firstChild,h=(p(t,r),u&&r.appendChild(b("up",this.uuid)),(a=document.createElement("div")).innerHTML='<div class = "fm-floor-list" > </div'.trim(),a.firstChild);p(r,h),this.D=h,this.G=this.Z.getFloorInfos();for(var l,c,f,m=this.G.length-1;-1<m;m--)h.appendChild((l=this.G[m],c=this.uuid,f=void 0,f=document.createElement("div"),c='\n    <div class="fm-floor-name-container">\n      <label\n        class="fm-floor-name fm-floor-name-normal"\n        data-gid='.concat(l.level,'\n        id="gid_').concat(l.level+c,'"\n        <span>').concat(l.alias&&l.alias.toUpperCase()||l.name.toUpperCase(),"</span>\n      </label>\n    </div>\n    "),f.innerHTML=c.trim(),f.firstChild)),0<m&&h.appendChild((l=void 0,(l=document.createElement("div")).innerHTML='\n  <hr class="fm-floor-line" />'.trim(),l.firstChild));var a=document.querySelector(".fm-floor-line"),d=0,a=(a&&(d=a.getBoundingClientRect().height),this.tt=document.querySelector(".fm-floor-name-container").clientHeight+d,document.querySelector(".fm-floor-list").style.height=this.tt*s+"px",u&&r.appendChild(b("down",this.uuid)),h.scrollTop=this.getCenterScrolltopById(this.J,i.length),document.getElementById("gid_"+this.J+this.uuid));null!=a&&(a.classList.remove("fm-floor-name-normal"),a.classList.add("fm-floor-name-active")),this.eventBtnPanelInit(h),this.eventPanelInit(t,h,i),this.W&&((d=document.createElement("div")).classList.add("fm-enter-exit-building"),d.innerHTML='\n   <div class="fm-enter-exit-building-button fm-enter-exit-building-button-enter fm-hide">\n    </div>\n    <div class="fm-enter-exit-building-button fm-enter-exit-building-button-exit fm-hide">\n    </div>\n  '.trim(),p(t,d),new O(this.u,{buildingID:this.X}))}}},{key:"handleLayerChange",value:function(){var t,i;this.hasDOM&&(i=!(t=this).V,this.changeLevelsSelect(i),t.u.followFocus)&&t.Z&&(i=t.Z.level,-1==t.Z.visibleLevels.indexOf(i)&&t.Z.visibleLevels.push(i),t.changeFocusLevel(i))}},{key:"handleLayerChangeStyle",value:function(t){this.hasDOM&&this.Z&&t.buildingID===this.Z.buildingID&&(1<this.Z.visibleLevels.length?this.setLayerStatus(!0):this.setLayerStatus(!1))}},{key:"eventSwitchBtn",value:function(t){var i;this.hasDOM&&(i=l.getClikEventName(),this.handleLayerChange=this.handleLayerChange.bind(this),t.addEventListener(i,this.handleLayerChange))}},{key:"setViewModeToStyle",value:function(t,i){this.hasDOM&&("2d"==i?(t.classList.remove("fm-view-3d"),t.classList.add("fm-view-2d")):(t.classList.remove("fm-view-2d"),t.classList.add("fm-view-3d")))}},{key:"initViewModePanelEvent",value:function(t){var i=this,n=l.getClikEventName(),e=!0;t.addEventListener(n,function(){!1!==e&&(e=!1,i.u.getViewMode()===A.MODE_3D?(i.u.setViewMode({mode:A.MODE_2D,finish:function(){e=!0}}),i.setViewModeToStyle(this,"2d")):(i.u.setViewMode({mode:A.MODE_3D,finish:function(){e=!0}}),i.setViewModeToStyle(this,"3d")))})}},{key:"eventBtnPanelInit",value:function(n){function t(t){o.changeScrollBtnPic();var i=0;t.wheelDelta?i+=-t.wheelDelta:t.detail&&(i+=t.detail),e.scrollTopAn_({el:n,to:n.scrollTop,form:n.scrollTop+i}),t.stopPropagation()}var e=this,o=this;o.changeScrollBtnPic(),l.bindEvent(n,"label","click",function(){var t;!o.enable||o.J===parseInt(this.dataset.gid)||(o.foucusId=parseInt(this.dataset.gid),t=o.Z.getFloorInfos().map(function(t){return t.level}),this.dataset.gid<t[0])||this.dataset.gid>t[t.length-1]||(n.scrollTop=o.getCenterScrolltopById(parseInt(this.dataset.gid),t.length),o.setGidStyleByClick(this.dataset.gid,"click"))});n.addEventListener("mousewheel",t,{passive:!0}),n.addEventListener("MozMousePixelScroll",t,!1),n.addEventListener("touchstart",this.touchstart.bind(this),!1),n.addEventListener("touchmove",this.touchmove.bind(this),!1),n.addEventListener("touchend",this.touchend.bind(this),!0)}},{key:"touchstart",value:function(t){t.preventDefault(),this.touchStartPointY=t.touches[0].pageY,this.touchPointX=t.touches[0].pageX,this.touchPointY=t.touches[0].pageY,t.stopPropagation()}},{key:"touchmove",value:function(t){t.preventDefault(),this.touchEndPointX=t.touches[0].pageX,this.touchEndPointY=t.touches[0].pageY,this.handleTouchEnd(t),t.stopPropagation()}},{key:"handleTouchEnd",value:function(t){var i=this;0<(t=t||window.event).changedTouches.length&&(i.touchEndPointX=t.changedTouches[0].pageX,i.touchEndPointY=t.changedTouches[0].pageY),(t=t.target)instanceof HTMLSpanElement==!0&&t.parentElement,0!=(t=-(i.touchEndPointY-i.touchPointY))&&(i.touchPointX=i.touchEndPointX,i.touchPointY=i.touchEndPointY,i=i.q(".fm-floor-list"),this.scrollTopAn_({el:i,to:i.scrollTop,form:i.scrollTop+t}))}},{key:"touchend",value:function(t){var i=this,n=null,e=(0<(t=t||window.event).changedTouches.length&&(i.touchEndPointX=t.changedTouches[0].pageX,i.touchEndPointY=t.changedTouches[0].pageY),(n=t.target)instanceof HTMLSpanElement==!0&&(n=n.parentElement),Math.abs(i.touchEndPointY-i.touchStartPointY));e<5&&0<=e&&n&&(e=parseInt(n.dataset.gid),isNaN(e)||(i.foucusId=e,i.setGidStyleByClick(e,"click"))),t.stopPropagation()}},{key:"eventPanelInit",value:function(t,i,n){var e=this;t.onselectstart=function(){return!1},t.style.MozUserSelect="none",l.bindEvent(t,".fm-scroll","click",function(t){var i;this.id==="scroll_up"+e.uuid?(i=e.J+1,i=Math.min(n[n.length-1],i),e.foucusId!=i&&(e.foucusId=i,e.setGidStyleByClick(i,"click"))):(i=e.J-1,i=Math.max(n[0],i),e.foucusId!=i&&(e.foucusId=i,e.setGidStyleByClick(i,"click")))}),l.bindEvent(t,".fm-scroll","touchend",function(t){var i;this.id==="scroll_up"+e.uuid?(i=e.J+1,i=Math.min(n[n.length-1],i),e.foucusId!=i&&(e.foucusId=i,e.setGidStyleByClick(i,"click"))):(i=e.J-1,i=Math.max(n[0],i),e.foucusId!=i&&(e.foucusId=i,e.setGidStyleByClick(i,"click")))})}},{key:"getCenterScrolltopById",value:function(t,i){return(i-t-Math.floor(this.R/2))*this.tt}},{key:"changeScrollBtnPic",value:function(){var t=this.J,i=this.Z.getFloorInfos().map(function(t){return t.level}),n=(i.sort(function(t,i){return t-i}),document.getElementById("scroll_down"+this.uuid)),e=document.getElementById("scroll_up"+this.uuid);t==i[0]&&n?(n.classList.remove("fm-scroll-down"),n.classList.add("fm-scroll-down-grey")):n&&(n.classList.remove("fm-scroll-down-grey"),n.classList.add("fm-scroll-down")),t==i[i.length-1]&&e?(e.classList.remove("fm-scroll-up"),e.classList.add("fm-scroll-up-grey")):e&&(e.classList.remove("fm-scroll-up-grey"),e.classList.add("fm-scroll-up"))}},{key:"changeFocusLevel",value:function(t){this.foucusId=t}},{key:"changeLevelsSelect",value:function(t){this.allLayer=t,this.setLayerStatus(t)}},{key:"setLayerStatus",value:function(t){this.V=t,this.V?(this.$.firstElementChild.classList.remove("fm-layer-image-one"),this.$.firstElementChild.classList.add("fm-layer-image-many")):(this.$.firstElementChild.classList.remove("fm-layer-image-many"),this.$.firstElementChild.classList.add("fm-layer-image-one"))}},{key:"onChange",value:function(t){M=t}},{key:"foucusId",get:function(){return this.J},set:function(t){var i=this;this.Z&&(null!==this.H&&!1===this.it&&this.H.finish(),this.it=!1,this.Z.setLevel({level:t,finish:function(){i.it=!0},callback:function(t){i.H=t}}),M)&&M([t])}},{key:"setGidStyleByEvent",value:function(t){this.setGidStyleByClick(t)}},{key:"setGidStyleByClick",value:function(t){var i=document.getElementById("gid_"+this.J+this.uuid);i&&(i.classList.remove("fm-floor-name-active"),i.classList.add("fm-floor-name-normal"),this.J=parseInt(t),(i=document.getElementById("gid_"+t+this.uuid)).classList.remove("fm-floor-name-normal"),i.classList.add("fm-floor-name-active"),this.changeScrollBtnPic())}},{key:"allLayer",get:function(){return this.V},set:function(t){this.Z&&((this.V=t)?this.Z.setVisibleLevels(this.Z.getFloorInfos().map(function(t){return t.level})):this.Z.setVisibleLevels([this.Z.level]))}},{key:"handleBuildingEntered",value:function(i){var n=this;null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var t;n.switchBuilding(),n.u.followFocus&&(n.Z=n.u.getBuilding(i.buildingID),n.Z)&&(n.Z.overviewMode==fengmap.FMOverviewMode.NORMAL||n.Z.overviewMode==fengmap.FMOverviewMode.INDOOR||n.u.focusBuilding&&n.u.focusBuilding.buildingID==n.u.getState().viewBuildingID)&&(t=n.Z.level,n.changeFocusLevel(t))},200)}},{key:"handleBuildingExited",value:function(t){var i=this;null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var t;i.switchBuilding(),i.u.followFocus&&(t=i.Z,t=null==i.Z?i.u.getBuilding(i.u.getMapOptions().buildingID):t)&&(null!==i.H&&!1===i.it&&i.H.finish(),i.it=!1,t.setLevel({level:t.level,finish:function(){i.it=!0},callback:function(t){i.H=t}}))},200)}},{key:"handleBuildingOverviewModeChanged",value:function(){this.switchBuilding()}},{key:"handleViewBuildingChange",value:function(){this.switchBuilding()}}])&&C(t.prototype,n),e&&C(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===j(t)?t:String(t)}(e.key),e)}}var I=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");t=t||{},this.u=null,this.nt=new d(t),this.nt.position||(this.nt.position=v.LEFT_TOP),this.B=t.contain,this.nt.offset||(this.nt.offset={x:10,y:10}),this.et=null,this.ot=t.imgURL||"resource/style/wedgets/img/"}var t,n,e;return t=i,(n=[{key:"addTo",value:function(t){this.u=t,this.B||(this.B=this.u.getContainer()),this.init()}},{key:"remove",value:function(){this.B.removeChild(this.et)}},{key:"init",value:function(){var t=this.createPanel(),i=(this.et=t,this);this.checkPosition(this.nt.position,this.nt.offset,t),l.bindEvent(t,"img","mouseover",function(t){this.src=this.dataset.on}),l.bindEvent(t,"img","mouseout",function(t){this.src=this.dataset.leave}),l.bindEvent(t,"div","click",function(t){"in"===this.dataset.type?i.u.zoomIn():i.u.zoomOut()}),l.bindEvent(t,"div","touchend",function(t){"in"===this.dataset.type?i.u.zoomIn():i.u.zoomOut()})}},{key:"showZoom",value:function(t){this.et.style.display=t?"block":"none"}},{key:"createPanel",value:function(){var t=document.createElement("div");return t.setAttribute("class","fm-control-zoom-bar"),t.style.left=0,t.style.top=0,this.B.appendChild(t),t.innerHTML=this.createInnerHtml(),t}},{key:"createInnerHtml",value:function(){return'\n            <div data-type="in" class="fm-control-zoom-bar-button fm-control-zoom-button-bar-in"></div>\n            <hr class="fm-control-zoom-bar-hr"/>\n            <div data-type="out" class="fm-control-zoom-bar-button fm-control-zoom-button-bar-out"></div>\n        '}},{key:"checkPosition",value:function(t,i,n){switch(n.style.left="",n.style.right="",n.style.top="",n.style.bottom="",t){case v.LEFT_TOP:n.style.left=i.x+"px",n.style.top=i.y+"px";break;case v.RIGHT_TOP:n.style.right=-i.x+"px",n.style.top=i.y+"px";break;case v.LEFT_BOTTOM:n.style.left=i.x+"px",n.style.bottom=-i.y+"px";break;case v.RIGHT_BOTTOM:n.style.right=-i.x+"px",n.style.bottom=-i.y+"px"}}}])&&B(t.prototype,n),e&&B(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===P(t)?t:String(t)}(e.key),e)}}var V=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");t=t||{},this.u=null,this.nt=new d(t),this.nt.position||(this.nt.position=v.LEFT_TOP),this.B=t.contain,this.nt.offset||(this.nt.offset={x:10,y:10}),this.et=null,this.ot=t.imgURL||"resource/style/wedgets/img/"}var t,n,e;return t=i,(n=[{key:"addTo",value:function(t){this.u=t,this.B||(this.B=this.u.getContainer()),this.init()}},{key:"remove",value:function(){this.B.removeChild(this.et)}},{key:"init",value:function(){var t=this.createPanel(),i=(this.et=t,this);this.checkPosition(this.nt.position,this.nt.offset,t),l.bindEvent(t,"img","mouseover",function(t){this.src=this.dataset.on}),l.bindEvent(t,"img","mouseout",function(t){this.src=this.dataset.leave}),l.bindEvent(t,"div","click",function(t){"in"===this.dataset.type?i.u.zoomIn():i.u.zoomOut()}),l.bindEvent(t,"div","touchend",function(t){"in"===this.dataset.type?i.u.zoomIn():i.u.zoomOut()})}},{key:"showZoom",value:function(t){this.et.style.display=t?"block":"none"}},{key:"createPanel",value:function(){var t=document.createElement("div");t.setAttribute("class","fm-control-zoom"),t.style.zIndex=20,t.style.position="absolute",t.style.backgroundColor="white",t.style.boxShadow="2px 2px 3px rgba(0,0,0, 0.3)",t.style.borderRadius="2px",t.style.left=0,t.style.top=0,this.B.appendChild(t);return t.innerHTML=this.createInnerHtml("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAABmZmYAAABV8S+1AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAATSURBVAjXY2DAC0JDQwMgBF4AAFvvAp8tw46tAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAIElEQVQokWNgGAXUB4zGsrL/ydHIwsDAcI/KjhkFZAMA5XkCUOIdNxMAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAABmZmYAAABV8S+1AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAXSURBVAjXY2BgZQACXERoaGgAhMCrDgBkQQLbnsbDyQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAOElEQVQokWM0lpVlwAE+QGkBbJJMuHQRAiNBIwsDA8M7HHJ8UBqrPEU2CuGQg8UjVvkhFKr01wgAH8cEixbYBa8AAAAASUVORK5CYII="),t}},{key:"createInnerHtml",value:function(t,i,n,e){return'\n\n            <div data-type="in" style="padding: 14px; cursor: pointer;">\n            <img src='.concat(n," data-leave=").concat(n," data-on=").concat(e,' style="width: 14px; height: 14px;"/>\n             </div>\n            <hr style="height: 1px; border-top: 1px solid rgba(153, 153, 153, 0.45); border-right: none; border-bottom: none; border-left: none; border-image: initial; width: 60%; margin: 0px 20%;">\n            <div data-type="out" style="padding: 14px; cursor: pointer;">\n            <img src=').concat(t," data-leave=").concat(t," data-on=").concat(i,' style="width: 14px; height: 14px;"/>\n            </div>\n        ')}},{key:"checkPosition",value:function(t,i,n){switch(n.style.left="",n.style.right="",n.style.top="",n.style.bottom="",t){case v.LEFT_TOP:n.style.left=i.x+"px",n.style.top=i.y+"px";break;case v.RIGHT_TOP:n.style.right=-i.x+"px",n.style.top=i.y+"px";break;case v.LEFT_BOTTOM:n.style.left=i.x+"px",n.style.bottom=-i.y+"px";break;case v.RIGHT_BOTTOM:n.style.right=-i.x+"px",n.style.bottom=-i.y+"px"}}}])&&L(t.prototype,n),e&&L(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}(),U=window.fengmap||{};U.FMCompass=i,U.FMControlPosition=v,U.FMScaleBar=n,U.FMToolbar=y,U.FMZoomBar=I,U.FMZoomControl=V,t.default=U}],e={},o.m=n,o.c=e,o.d=function(t,i,n){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"rt",{value:!0})},o.t=function(i,t){if(1&t&&(i=o(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.rt)return i;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var e in i)o.d(n,e,function(t){return i[t]}.bind(null,e));return n},o.n=function(t){var i=t&&t.rt?function(){return t.default}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="",o(o.s=0).default;function o(t){var i;return(e[t]||(i=e[t]={i:t,l:!1,exports:{}},n[t].call(i.exports,i,i.exports,o),i.l=!0,i)).exports}var n,e});