<!DOCTYPE html>
<html xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
  <meta charset="UTF-8">
  <title>报警管理</title>
  <link rel="stylesheet" href="../css/common/common.css" />
  <link rel="stylesheet" href="../css/list.css" />
  <script src="../js/common/jquery-1.8.0.min.js"></script>
  <script src="../js/common/url.js"></script>
  <script src="../js/common/common.js"></script>
  <script src="../js/common/page.js"></script>
  <script src="../fMap/2/fengmap.core.min.js"></script>
  <script src="../fMap/2/fengmap.control.min.js"></script>
  <script src="../js/common/initFmap3.js"></script>
  <script src="../js/callPolice.js"></script>
</head>

<body>
  <div class="contentTop">
    <span class="contentTitle">报警管理</span>
    <div class="search">

      <div class="searchItem seleBox">
        关联地图：
        <div class="batchBox mapWidth" onclick="switchSele(event)">
          <div name="map" class="batchTxt" data-val="">--请选择关联地图--</div>
          <div class="batchList" id="mapSelect">
            <div onclick="seleBatch(this,'')">--请选择关联地图--</div>
          </div>
        </div>
      </div>

      <div class="searchItem seleBox">
        设备编号：<input type="text" autocomplete="off" name="num" id="num" onkeyup="this.value=this.value.replace(/\s/g,'')"
          class="searchInp" placeholder="请输入设备编号" />
      </div>


      <div class="searchItem seleBox">
        车位号：<input type="text" autocomplete="off" name="placeName" id="placeName"
          onkeyup="this.value=this.value.replace(/\s/g,'')" class="searchInp" placeholder="请输入车位号" />
      </div>

      <div class="searchItem seleBox">
        设备类别：
        <div class="batchBox" onclick="switchSele(event)">
          <div name="deviceType" class="batchTxt" data-val="">全部</div>
          <div class="batchList" id="deviceNameSelect">
            <div onclick="seleBatch(this,'')">全部</div>
            <div onclick="seleBatch(this,'1')">信标/道钉</div>
            <div onclick="seleBatch(this,'2')">网关</div>
            <div onclick="seleBatch(this,'3')">车位检测器</div>
          </div>
        </div>
      </div>

      <div class="searchItem seleBox">
        报警类型：
        <div class="batchBox" onclick="switchSele(event)">
          <div name="alarmType" class="batchTxt" data-val="">全部</div>
          <div class="batchList" id="alarmTypeSelect">
            <div onclick="seleBatch(this,'')">全部</div>
            <div onclick="seleBatch(this,'1')">离线报警</div>
            <div onclick="seleBatch(this,'2')">低电量报警</div>
            <div onclick="seleBatch(this,'3')">其他故障</div>
          </div>
        </div>
      </div>

      <div class="searchItem seleBox">
        报警级别：
        <div class="batchBox" onclick="switchSele(event)">
          <div name="priority" class="batchTxt" data-val="">全部</div>
          <div class="batchList">
            <div onclick="seleBatch(this,'')">全部</div>
            <div onclick="seleBatch(this,'1')">高</div>
            <div onclick="seleBatch(this,'2')">中</div>
            <div onclick="seleBatch(this,'3')">低</div>
          </div>
        </div>
      </div>

      <div class="searchItem seleBox">
        报警状态：
        <div class="batchBox" onclick="switchSele(event)">
          <div name="state" class="batchTxt" data-val="">全部</div>
          <div class="batchList">
            <div onclick="seleBatch(this,'')">全部</div>
            <div id="hasH" onclick="seleBatch(this,'0')">报警中</div>
            <div onclick="seleBatch(this,'1')">已结束</div>
          </div>
        </div>
      </div>

      <span class="searchBtn" onclick="search()">搜索</span>
      <span class="searchBtn resetBtn" onclick="reset()">重置</span>

      <!-- <shiro:hasPermission name="peb:add"> -->
      <!-- <div class="topBtn">
        <span onclick="addCompany()">新增</span>
      </div> -->
      <!-- </shiro:hasPermission> -->

    </div>
  </div>
  <!-- 信息 -->
  <div class="wrap">
    <table class="tab" id="tab">
      <thead>
        <tr>
          <td name="line" class="line">序号</td>
          <td name="mapName">关联地图</td>
          <td name="num">设备编号</td>
          <td name="equipmentType">设备类别</td>
          <td name="placeName">关联车位</td>
          <td name="alarmType2">报警类型</td>
          <td name="priority">报警级别</td>
          <td name="state">报警状态</td>
          <td name="startTime">开始时间</td>
          <td name="endTime">结束时间</td>
          <td name="desc">备注</td>
          <td name="operating">操作</td>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="listFooter clearfix">
      <label class="seleLabel">
        <input id="allCheck" onclick="allCheck(this)" type="checkbox" class="tabCheck" name="tabCheck">
        <span class="seleIcon"></span>全选</label>
       <shiro:hasPermission name="das:se">
        <span class="deleBtn" onclick="showAllDele()">解除报警</span>
       </shiro:hasPermission>
      <div class="page">
        <span id="total" class="total"></span>
        <span class="turnPage prev" onclick="prevPage()"></span>
        <ul class="pageList"></ul>
        <span class="turnPage next" onclick="nextPage(this)"></span>
        跳至<input type="text" value="1" class="jumpPage" onkeyup="jumpCurPage(this,event)" />页
      </div>
    </div>
  </div>
  <!-- 提示 -->
  <div class="tips" id="tip"></div>
  <!-- 遮罩 -->
  <div class="mask" id="mask"></div>
  <!-- 确认提示框 -->
  <div class="confimPop" id="delePop">
    <div class="confimPopTop">
      <span class="popClose" onclick="hidePop('#delePop')"></span>
    </div>
    <div class="confimPopInfo">
      <p class="confimPopTitle">解除报警？</p>
      <p class="txtOverFlow">设备编号/车位名：<span id="deleTxt"></span></p>
    </div>
    <div class="confimPopFooter">
      <span class="confimPopEnt" onclick="entDele()">确定</span>
      <span class="confimPopCancel" onclick="hidePop('#delePop')">取消</span>
    </div>
  </div>



  <div id="operating" class="hidden">
    <shiro:hasPermission name="das:se">
      <span class="tabOper deleOpa" id="deleteBtn">删除</span>
    </shiro:hasPermission>
  </div>

  <iframe id="addFrame" class="frameClass"></iframe>
  <iframe id="editFrame" class="frameClass"></iframe>
</body>
<script>
  //回车搜索
  $("#name").keydown(function (event) {
    if (event.keyCode === 13) {
      search(); //搜索
    }
  });
</script>

</html>